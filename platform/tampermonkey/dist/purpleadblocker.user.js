// ==UserScript==
// @name         Purple Adblocker
// @source       https://github.com/arthurbolsoni/Purple-adblock
// @version      2.6.6
// @description  Per aspera ad astra
// @author       ArthurBolzoni
// @downloadURL  https://raw.githubusercontent.com/arthurbolsoni/Purple-adblock/main/tampermonkey/dist/purpleadblocker.user.js
// @updateURL    https://raw.githubusercontent.com/arthurbolsoni/Purple-adblock/main/tampermonkey/dist/purpleadblocker.user.js
// @match        *://*.twitch.tv/*
// @run-at       document-start
// @grant        none
// ==/UserScript==

/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
//this line gonna import the content from compile worker as string
//@ts-expect-error
const app_worker_js_1 = __importDefault(__webpack_require__(/*! ../dist/app.worker.js */ "./dist/app.worker.js"));
(function () {
    let mainWorker;
    window.Worker = class WorkerInjector extends Worker {
        constructor(twitchBlobUrl) {
            console.log("new worker intance " + twitchBlobUrl);
            if (twitchBlobUrl == "")
                super(twitchBlobUrl);
            console.log("[Purple]: init " + twitchBlobUrl);
            const newBlobStr = `${app_worker_js_1.default}
      importScripts('${twitchBlobUrl}');`;
            super(URL.createObjectURL(new Blob([newBlobStr], { type: "text/javascript" })));
            mainWorker = this;
            mainWorker.declareEventWorker();
            mainWorker.declareEventWindow();
            mainWorker.integrity();
        }
        integrity() {
            return __awaiter(this, void 0, void 0, function* () {
                __webpack_require__.g.request = fetch;
                __webpack_require__.g.fetch = (url, options) => __awaiter(this, void 0, void 0, function* () {
                    const response = yield __webpack_require__.g.request(url, options);
                    const body = yield response.text();
                    if (url == "https://gql.twitch.tv/integrity") {
                        mainWorker.postMessage({ funcName: "setIntegrity", value: body });
                    }
                    return new Response(body, response);
                });
            });
        }
        declareEventWorker() {
            this.addEventListener("message", (event) => {
                var _a, _b, _c, _d, _e;
                switch ((_a = event === null || event === void 0 ? void 0 : event.data) === null || _a === void 0 ? void 0 : _a.type) {
                    case "getSettings": {
                        window.postMessage({ type: "getSettings", value: null });
                        break;
                    }
                    case "PlayerQualityChanged": {
                        mainWorker.postMessage({ funcName: "setQuality", value: event.data.arg.name });
                        break;
                    }
                    case "pause": {
                        mainWorker.postMessage({ funcName: "pause", args: undefined, id: 1 });
                        break;
                    }
                    case "play": {
                        mainWorker.postMessage({ funcName: "play", args: undefined, id: 1 });
                        break;
                    }
                    default: {
                        break;
                    }
                }
                switch ((_c = (_b = event === null || event === void 0 ? void 0 : event.data) === null || _b === void 0 ? void 0 : _b.arg) === null || _c === void 0 ? void 0 : _c.key) {
                    case "quality": {
                        if (!event.data.arg.value.name)
                            break;
                        console.log("Changed quality by player: " + event.data.arg.value.name);
                        mainWorker.postMessage({ funcName: "setQuality", value: event.data.arg.value.name });
                        break;
                    }
                    case "state": {
                        mainWorker.postMessage({ funcName: event.data.arg.value });
                    }
                    default: {
                        break;
                    }
                }
                switch ((_e = (_d = event === null || event === void 0 ? void 0 : event.data) === null || _d === void 0 ? void 0 : _d.arg) === null || _e === void 0 ? void 0 : _e.name) {
                    case "pause": {
                        break;
                    }
                    case "play": {
                        break;
                    }
                    default: {
                        break;
                    }
                }
            });
        }
        declareEventWindow() {
            //Event listener from window and extension.
            window.addEventListener("message", (event) => {
                switch (event.data.type) {
                    case "setSettings": {
                        //send settings to worker
                        mainWorker.postMessage({ funcName: "setSettings", value: event.data.value });
                    }
                }
            });
        }
    };
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxrRUFBa0U7QUFDbEUsa0JBQWtCO0FBQ2xCLDBFQUF3QztBQUV4QyxDQUFDO0lBQ0MsSUFBSSxVQUFlLENBQUM7SUFFcEIsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLGNBQWUsU0FBUSxNQUFNO1FBQ2pELFlBQVksYUFBa0I7WUFDNUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsR0FBRyxhQUFhLENBQUMsQ0FBQztZQUVuRCxJQUFJLGFBQWEsSUFBSSxFQUFFO2dCQUFFLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM5QyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixHQUFHLGFBQWEsQ0FBQyxDQUFDO1lBRS9DLE1BQU0sVUFBVSxHQUFHLEdBQUcsdUJBQUc7dUJBQ1IsYUFBYSxLQUFLLENBQUM7WUFFcEMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hGLFVBQVUsR0FBRyxJQUFJLENBQUM7WUFDbEIsVUFBVSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDaEMsVUFBVSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDaEMsVUFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3pCLENBQUM7UUFFSyxTQUFTOztnQkFDYixNQUFNLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtnQkFDdEIsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFPLEdBQVEsRUFBRSxPQUFZLEVBQUUsRUFBRTtvQkFDOUMsTUFBTSxRQUFRLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDcEQsTUFB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

/***/ }),

/***/ "./dist/app.worker.js":
/*!****************************!*\
  !*** ./dist/app.worker.js ***!
  \****************************/
/***/ ((module) => {

module.exports = "/******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/app.controller.ts\":\n/*!*******************************!*\\\n  !*** ./src/app.controller.ts ***!\n  \\*******************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.AppController = void 0;\r\nconst controller_decorator_1 = __webpack_require__(/*! ./decorator/controller.decorator */ \"./src/decorator/controller.decorator.ts\");\r\nconst handler_decorator_1 = __webpack_require__(/*! ./decorator/handler.decorator */ \"./src/decorator/handler.decorator.ts\");\r\nlet AppController = class AppController {\r\n    constructor(appService) {\r\n        this.appService = appService;\r\n        this.getSettings = () => __webpack_require__.g.postMessage({ type: \"getSettings\" });\r\n        this.getSettings();\r\n    }\r\n    setIntegrity(data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.appService.setIntegrityToken(JSON.parse(data.value).token);\r\n        });\r\n    }\r\n    onChannel(url, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const response = yield __webpack_require__.g.request(url, options);\r\n            if (!response.ok) {\r\n                console.log(\"Error on channel load\");\r\n                return response;\r\n            }\r\n            const text = yield response.text();\r\n            const channelName = /hls\\/(.*).m3u8/gm.exec(url) || [];\r\n            yield this.appService.setChannel(channelName[1]);\r\n            return new Response(text);\r\n        });\r\n    }\r\n    onFetch(url, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const body = yield (yield request(url, options)).text();\r\n            const playlist = yield this.appService.onFetch(body);\r\n            return new Response(playlist);\r\n        });\r\n    }\r\n    onChannelPicture(url, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Response();\r\n        });\r\n    }\r\n    setSettings(data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.appService.setSettings(data);\r\n        });\r\n    }\r\n    setQuality(data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.appService.quality = data.value;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    (0, handler_decorator_1.Message)(\"setIntegrity\")\r\n], AppController.prototype, \"setIntegrity\", null);\r\n__decorate([\r\n    (0, handler_decorator_1.Fetch)(\"usher.ttvnw.net/api/channel/hls/\", \"picture-by-picture\")\r\n], AppController.prototype, \"onChannel\", null);\r\n__decorate([\r\n    (0, handler_decorator_1.Fetch)(\"hls.ttvnw.net/v1/playlist/\")\r\n], AppController.prototype, \"onFetch\", null);\r\n__decorate([\r\n    (0, handler_decorator_1.Fetch)(\"picture-by-picture\")\r\n], AppController.prototype, \"onChannelPicture\", null);\r\n__decorate([\r\n    (0, handler_decorator_1.Message)(\"setSettings\")\r\n], AppController.prototype, \"setSettings\", null);\r\n__decorate([\r\n    (0, handler_decorator_1.Message)(\"setQuality\")\r\n], AppController.prototype, \"setQuality\", null);\r\nAppController = __decorate([\r\n    (0, controller_decorator_1.Controller)()\r\n], AppController);\r\nexports.AppController = AppController;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvYXBwLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMkVBQThEO0FBQzlELHFFQUErRDtBQUkvRCxJQUFhLGFBQWEsR0FBMUIsTUFBYSxhQUFhO0lBR3hCLFlBQTZCLFVBQWtCO1FBQWxCLGVBQVUsR0FBVixVQUFVLENBQVE7UUFGL0MsZ0JBQVcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUM7UUFHOUQsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3JCLENBQUM7SUFHSyxZQUFZLENBQUMsSUFBUzs7WUFDMUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsRSxDQUFDO0tBQUE7SUFHSyxTQUFTLENBQUMsR0FBVyxFQUFFLE9BQVk7O1lBQ3ZDLE1BQU0sUUFBUSxHQUFhLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDOUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztnQkFDckMsT0FBTyxRQUFRLENBQUM7YUFDakI7WUFFRCxNQUFNLElBQUksR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNuQyxNQUFNLFdBQVcsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1lBRXZELE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakQsT0FBTyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixDQUFDO0tBQUE7SUFHSyxPQUFPLENBQUMsR0FBVyxFQUFFLE9BQVk7O1lBQ3JDLE1BQU0sSUFBSSxHQUFXLE1BQU0sQ0FBQyxNQUFNLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNoRSxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3JELE9BQU8sSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDaEMsQ0FBQztLQUFBO0lBR0ssZ0JBQWdCLENBQUMsR0FBVyxFQUFFLE9BQVk7O1lBQzlDLE9BQU8sSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUN4QixDQUFDO0tBQUE7SUFHSyxXQUFXLENBQUMsSUFBUzs7WUFDekIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEMsQ0FBQztLQUFBO0lBR0ssVUFBVSxDQUFDLElBQVM7O1lBQ3hCLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDdkMsQ0FBQztLQUFBO0NBQ0YsQ0FBQTtBQXhDQztJQURDLElBQUEsMkJBQU8sRUFBQyxjQUFjLENBQUM7aURBR3ZCO0FBR0Q7SUFEQyxJQUFBLHlCQUFLLEVBQUMsa0NBQWtDLEVBQUUsb0JBQW9CLENBQUM7OENBYS9EO0FBR0Q7SUFEQyxJQUFBLHlCQUFLLEVBQUMsNEJBQTRCLENBQUM7NENBS25DO0FBR0Q7SUFEQyxJQUFBLHlCQUFLLEVBQUMsb0JBQW9CLENBQUM7cURBRzNCO0FBR0Q7SUFEQyxJQUFBLDJCQUFPLEVBQUMsYUFBYSxDQUFDO2dEQUd0QjtBQUdEO0lBREMsSUFBQSwyQkFBTyxFQUFDLFlBQVksQ0FBQzsrQ0FHckI7QUEvQ1UsYUFBYTtJQUR6QixJQUFBLGlDQUFVLEdBQUU7R0FDQSxhQUFhLENBZ0R6QjtBQWhEWSxzQ0FBYSJ9\n\n/***/ }),\n\n/***/ \"./src/app.worker.ts\":\n/*!***************************!*\\\n  !*** ./src/app.worker.ts ***!\n  \\***************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst app_controller_1 = __webpack_require__(/*! ./app.controller */ \"./src/app.controller.ts\");\r\nconst player_1 = __webpack_require__(/*! ./modules/player/player */ \"./src/modules/player/player.ts\");\r\nfunction app() {\r\n    __webpack_require__.g.logPrint = (x) => console.log(\"[Purple]: \", x);\r\n    __webpack_require__.g.appController = new app_controller_1.AppController(new player_1.Player());\r\n    __webpack_require__.g.logPrint(\"Script running\");\r\n}\r\nexports[\"default\"] = app;\r\n__webpack_require__.g.request = __webpack_require__.g.fetch;\r\n__webpack_require__.g.fetch = (url, options) => __awaiter(void 0, void 0, void 0, function* () {\r\n    if (typeof url === \"string\") {\r\n        for (var i = 0, len = routerList.length; i < len; i++) {\r\n            if (url.includes(routerList[i].match) && !url.includes(routerList[i].ignore)) {\r\n                return new Promise((resolve, reject) => __awaiter(void 0, void 0, void 0, function* () { return resolve(yield __webpack_require__.g.appController[routerList[i].propertyKey](url, options)); }));\r\n            }\r\n        }\r\n    }\r\n    return __webpack_require__.g.request.apply(this, [url, options]);\r\n});\r\n__webpack_require__.g.addEventListener(\"message\", (e) => {\r\n    __webpack_require__.g.messageList.forEach((x) => {\r\n        if (e.data.funcName == x.match)\r\n            __webpack_require__.g.appController[x.propertyKey](e.data);\r\n    });\r\n});\r\napp();\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLndvcmtlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9hcHAud29ya2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEscURBQWlEO0FBQ2pELG9EQUFpRDtBQVVqRCxTQUF3QixHQUFHO0lBQ3pCLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzNELE1BQU0sQ0FBQyxhQUFhLEdBQUcsSUFBSSw4QkFBYSxDQUFDLElBQUksZUFBTSxFQUFFLENBQUMsQ0FBQztJQUV2RCxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDcEMsQ0FBQztBQUxELHNCQUtDO0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQzlCLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBTyxHQUFRLEVBQUUsT0FBWSxFQUFFLEVBQUU7SUFDOUMsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7UUFDM0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNyRCxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTyxDQUFDLEVBQUU7Z0JBQzdFLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBTyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUUsa0RBQUMsT0FBQSxPQUFPLENBQUMsTUFBTSxNQUFNLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQSxHQUFBLENBQUMsQ0FBQzthQUM3SDtTQUNGO0tBQ0Y7SUFDRCxPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3BELENBQUMsQ0FBQSxDQUFDO0FBRUYsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQU0sRUFBRSxFQUFFO0lBQzVDLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7UUFDL0IsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsS0FBSztZQUFFLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM5RSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsR0FBRyxFQUFFLENBQUMifQ==\n\n/***/ }),\n\n/***/ \"./src/decorator/controller.decorator.ts\":\n/*!***********************************************!*\\\n  !*** ./src/decorator/controller.decorator.ts ***!\n  \\***********************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Controller = void 0;\r\nconst Controller = () => {\r\n    return (target) => { };\r\n};\r\nexports.Controller = Controller;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbGxlci5kZWNvcmF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVjb3JhdG9yL2NvbnRyb2xsZXIuZGVjb3JhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFPLE1BQU0sVUFBVSxHQUFHLEdBQW1CLEVBQUU7SUFDN0MsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLEdBQUUsQ0FBQyxDQUFDO0FBQ3hCLENBQUMsQ0FBQztBQUZXLFFBQUEsVUFBVSxjQUVyQiJ9\n\n/***/ }),\n\n/***/ \"./src/decorator/handler.decorator.ts\":\n/*!********************************************!*\\\n  !*** ./src/decorator/handler.decorator.ts ***!\n  \\********************************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Message = exports.Fetch = void 0;\r\nconst Fetch = (match, ignore = null) => {\r\n    return (target, propertyKey) => {\r\n        if (!__webpack_require__.g.routerList)\r\n            __webpack_require__.g.routerList = [];\r\n        __webpack_require__.g.routerList.push({ propertyKey: propertyKey, match: match, ignore: ignore });\r\n    };\r\n};\r\nexports.Fetch = Fetch;\r\nconst Message = (match) => {\r\n    return (target, propertyKey) => {\r\n        if (!__webpack_require__.g.messageList)\r\n            __webpack_require__.g.messageList = [];\r\n        __webpack_require__.g.messageList.push({ propertyKey: propertyKey, match: match });\r\n    };\r\n};\r\nexports.Message = Message;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFuZGxlci5kZWNvcmF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVjb3JhdG9yL2hhbmRsZXIuZGVjb3JhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFPLE1BQU0sS0FBSyxHQUFHLENBQUMsS0FBYSxFQUFFLFNBQXdCLElBQUksRUFBbUIsRUFBRTtJQUNwRixPQUFPLENBQUMsTUFBTSxFQUFFLFdBQVcsRUFBRSxFQUFFO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVTtZQUFFLE1BQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsV0FBVyxFQUFFLFdBQXFCLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUMvRixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFMVyxRQUFBLEtBQUssU0FLaEI7QUFFSyxNQUFNLE9BQU8sR0FBRyxDQUFDLEtBQWEsRUFBbUIsRUFBRTtJQUN4RCxPQUFPLENBQUMsTUFBTSxFQUFFLFdBQVcsRUFBRSxFQUFFO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVztZQUFFLE1BQU0sQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ2pELE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsV0FBVyxFQUFFLFdBQXFCLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDaEYsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBTFcsUUFBQSxPQUFPLFdBS2xCIn0=\n\n/***/ }),\n\n/***/ \"./src/modules/player/player.ts\":\n/*!**************************************!*\\\n  !*** ./src/modules/player/player.ts ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Player = void 0;\r\nconst stream_1 = __webpack_require__(/*! ../stream/stream */ \"./src/modules/stream/stream.ts\");\r\nconst stream_enum_1 = __webpack_require__(/*! ../stream/interface/stream.enum */ \"./src/modules/stream/interface/stream.enum.ts\");\r\nconst m3u8_parser_1 = __webpack_require__(/*! m3u8-parser */ \"./node_modules/m3u8-parser/dist/m3u8-parser.es.js\");\r\nclass Player {\r\n    constructor() {\r\n        this.integrityToken = \"\"; //the integrity token\r\n        this.streamList = []; //the list of streams that are currently being played\r\n        this.actualChannel = \"\"; //the channel\r\n        this.playingAds = false; //if the stream is playing ads\r\n        this.quality = \"\"; //the quality of the stream\r\n        this.getQuality = () => __webpack_require__.g.postMessage({ type: \"getQuality\" });\r\n        this.getSettings = () => __webpack_require__.g.postMessage({ type: \"getSettings\" });\r\n        this.pause = () => __webpack_require__.g.postMessage({ type: \"pause\" });\r\n        this.play = () => __webpack_require__.g.postMessage({ type: \"play\" });\r\n        this.setSettings = (setting) => {\r\n            this.setting = setting;\r\n            logPrint(\"Settings loaded\");\r\n        };\r\n        this.setIntegrityToken = (integrityToken) => this.integrityToken = integrityToken;\r\n        this.pauseAndPlay = () => __awaiter(this, void 0, void 0, function* () {\r\n            this.pause();\r\n            yield new Promise(resolve => setTimeout(resolve, 500));\r\n            this.play();\r\n        });\r\n        this.onStartAds = () => {\r\n            console.log(\"ads started\");\r\n            this.pauseAndPlay();\r\n            this.pauseAndPlay();\r\n        };\r\n        this.onEndAds = () => {\r\n            console.log(\"ads ended\");\r\n            this.pauseAndPlay();\r\n            this.pauseAndPlay();\r\n        };\r\n        this.isAds = (x, allowChange = false) => {\r\n            const ads = this.hasAds(x);\r\n            if (!allowChange)\r\n                return ads;\r\n            if (this.playingAds == false && this.playingAds != ads)\r\n                this.onStartAds();\r\n            if (this.playingAds == true && this.playingAds != ads)\r\n                this.onEndAds();\r\n            this.playingAds = ads;\r\n            return this.playingAds;\r\n        };\r\n        this.hasAds = (x) => (x === null || x === void 0 ? void 0 : x.toString().includes(\"stitched\")) || (x === null || x === void 0 ? void 0 : x.toString().includes(\"Amazon\")) || (x === null || x === void 0 ? void 0 : x.toString().includes(\"DCM\"));\r\n        this.currentStream = (channel = this.actualChannel) => {\r\n            var _a;\r\n            return (_a = this.streamList) === null || _a === void 0 ? void 0 : _a.find((x) => x.channelName === channel);\r\n        };\r\n    }\r\n    isWhitelist() {\r\n        var _a, _b;\r\n        return ((_b = (_a = this.setting) === null || _a === void 0 ? void 0 : _a.whitelist) === null || _b === void 0 ? void 0 : _b.includes(this.actualChannel)) || false;\r\n    }\r\n    onFetch(text) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isWhitelist())\r\n                return text;\r\n            if (!this.isAds(text, true))\r\n                return this.mergeM3u8Contents([text]);\r\n            let dump = [];\r\n            this.currentStream().createStreamAccess(stream_enum_1.StreamType.FRONTPAGE, this.integrityToken);\r\n            this.currentStream().createStreamAccess(stream_enum_1.StreamType.PICTURE, this.integrityToken);\r\n            const frontpage = yield this.fetchm3u8ByStreamType(stream_enum_1.StreamType.FRONTPAGE);\r\n            // if (frontpage.data) return this.mergeM3u8Contents([frontpage.data, ...dump]);\r\n            dump = dump.concat(frontpage.dump);\r\n            const picture = yield this.fetchm3u8ByStreamType(stream_enum_1.StreamType.PICTURE);\r\n            // if (external.data) return this.mergeM3u8Contents([external.data, ...dump]);\r\n            dump = dump.concat(picture.dump);\r\n            console.log(\"All stream types failed\");\r\n            return this.mergeM3u8Contents([text, ...dump]);\r\n        });\r\n    }\r\n    generateM3u8(manifest) {\r\n        let m3u8Content = `#EXTM3U\\n`;\r\n        if (manifest.targetDuration) {\r\n            m3u8Content += `#EXT-X-TARGETDURATION:${manifest.targetDuration}\\n`;\r\n        }\r\n        if (manifest.mediaSequence) {\r\n            m3u8Content += `#EXT-X-MEDIA-SEQUENCE:${manifest.mediaSequence}\\n`;\r\n        }\r\n        if (manifest.segments) {\r\n            manifest.segments.forEach((segment) => {\r\n                if (segment.duration) {\r\n                    m3u8Content += `#EXTINF:${segment.duration}`;\r\n                    m3u8Content += `\\n`;\r\n                }\r\n                m3u8Content += `${segment.uri}\\n`;\r\n            });\r\n        }\r\n        return m3u8Content;\r\n    }\r\n    mergeM3u8Contents(conteudosM3u8) {\r\n        const manifestos = conteudosM3u8.map((conteudo) => {\r\n            const analisador = new m3u8_parser_1.Parser();\r\n            analisador.push(conteudo);\r\n            analisador.end();\r\n            // extract titles from #EXTINF tags in each segment\r\n            const manifest = analisador.manifest;\r\n            if (manifest.segments) {\r\n                manifest.segments.forEach((segment) => {\r\n                    // Find the #EXTINF tag associated with the current segment\r\n                    const extinfTagRegex = new RegExp(`#EXTINF:([0-9.]*)?,?(.*)(?:\\n|\\r\\n)${segment.uri}`);\r\n                    const match = conteudo.match(extinfTagRegex);\r\n                    if (match) {\r\n                        segment.title = match[2] ? match[2].trim() : \"\";\r\n                    }\r\n                });\r\n            }\r\n            return manifest;\r\n        });\r\n        const manifestoPrincipal = manifestos[0];\r\n        const manifestosSuporte = manifestos.slice(1);\r\n        if (manifestoPrincipal.segments) {\r\n            console.log(\"Segmentos encontrados no manifesto principal:\", manifestoPrincipal.segments.length);\r\n            console.log(\"Manifestos de suporte encontrados:\", manifestosSuporte.length);\r\n            let segmentRemoved = 0;\r\n            // Percorrer os segmentos do manifesto principal e preencher as lacunas com os segmentos do manifesto de suporte\r\n            for (let i = 0; i < manifestoPrincipal.segments.length; i++) {\r\n                const segmentoPrincipal = manifestoPrincipal.segments[i];\r\n                let isChanged = false;\r\n                if (this.hasAds(segmentoPrincipal.title)) {\r\n                    manifestosSuporte.forEach((manifestoSuporte) => {\r\n                        var _a;\r\n                        // Encontre o primeiro segmento de suporte que NÃO contenha o título \"Amazon\" e tenha um tempo semelhante ao segmentoPrincipal (ignorando milissegundos)\r\n                        const segmentoSuporte = (_a = manifestoSuporte === null || manifestoSuporte === void 0 ? void 0 : manifestoSuporte.segments) === null || _a === void 0 ? void 0 : _a.find((seg) => {\r\n                            if (this.hasAds(seg.title))\r\n                                return false;\r\n                            const dataPrincipal = new Date(segmentoPrincipal.dateTimeString);\r\n                            const dataSuporte = new Date(seg.dateTimeString);\r\n                            dataPrincipal.setMilliseconds(0);\r\n                            dataSuporte.setMilliseconds(0);\r\n                            return dataPrincipal.getTime() === dataSuporte.getTime();\r\n                        });\r\n                        if (segmentoSuporte) {\r\n                            // Substitua o segmento principal pelo segmento de suporte\r\n                            manifestoPrincipal.segments[i] = segmentoSuporte;\r\n                            isChanged = true;\r\n                        }\r\n                    });\r\n                    // Se o segmento principal ainda contiver o título \"Amazon\", remova-o\r\n                    if (!isChanged) {\r\n                        manifestoPrincipal.segments.splice(i, 1);\r\n                        i--;\r\n                        segmentRemoved++;\r\n                    }\r\n                }\r\n            }\r\n            console.log(\"Segmento com ads removidos:\", segmentRemoved);\r\n        }\r\n        // Criar uma nova lista de reprodução M3U8 com os segmentos mesclados\r\n        const conteudoM3u8Mesclado = this.generateM3u8(manifestoPrincipal);\r\n        // console.log(\"Conteúdo M3U8 mesclado:\", conteudoM3u8Mesclado);\r\n        return conteudoM3u8Mesclado;\r\n    }\r\n    fetchm3u8ByStreamType(accessType) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            logPrint(\"Stream Type: \" + accessType);\r\n            let dump = [];\r\n            let servers = this.currentStream().getStreamByStreamType(accessType);\r\n            for (const server of servers) {\r\n                //filter server url by quality or bestquality\r\n                const streamUrl = server.findByQuality(this.quality) || server.bestQuality();\r\n                //try get m3u8 content and return if don't have ads.\r\n                const text = yield (yield __webpack_require__.g.request(streamUrl === null || streamUrl === void 0 ? void 0 : streamUrl.url)).text();\r\n                dump.push(text);\r\n                if (this.isAds(text)) {\r\n                    logPrint(\"Stream Type: \" + accessType + \" - Ads found\");\r\n                    this.currentStream().removeServer(server);\r\n                    continue;\r\n                }\r\n                return { data: text, dump: dump };\r\n            }\r\n            return { data: null, dump: dump };\r\n        });\r\n    }\r\n    setChannel(channelName) {\r\n        logPrint(\"Loading channel\", channelName);\r\n        this.actualChannel = channelName;\r\n        const currentStream = new stream_1.Stream(this.actualChannel);\r\n        this.streamList.push(currentStream);\r\n    }\r\n}\r\nexports.Player = Player;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGxheWVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZHVsZXMvcGxheWVyL3BsYXllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSw2Q0FBMEM7QUFFMUMsaUVBQTZEO0FBRTdELDZDQUFxQztBQUVyQyxNQUFhLE1BQU07SUFBbkI7UUFDRSxtQkFBYyxHQUFHLEVBQUUsQ0FBQyxDQUFDLHFCQUFxQjtRQUUxQyxlQUFVLEdBQWEsRUFBRSxDQUFDLENBQUMscURBQXFEO1FBQ2hGLGtCQUFhLEdBQVcsRUFBRSxDQUFDLENBQUMsYUFBYTtRQUN6QyxlQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsOEJBQThCO1FBRWxELFlBQU8sR0FBVyxFQUFFLENBQUMsQ0FBQywyQkFBMkI7UUFFakQsZUFBVSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUM5RCxnQkFBVyxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLENBQUMsQ0FBQztRQUNoRSxVQUFLLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3BELFNBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFFbEQsZ0JBQVcsR0FBRyxDQUFDLE9BQWdCLEVBQUUsRUFBRTtZQUNqQyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUN2QixRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUM5QixDQUFDLENBQUM7UUFFRixzQkFBaUIsR0FBRyxDQUFDLGNBQXNCLEVBQUUsRUFBRSxDQUFDLElBQUks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\n\n/***/ }),\n\n/***/ \"./src/modules/stream/interface/stream.enum.ts\":\n/*!*****************************************************!*\\\n  !*** ./src/modules/stream/interface/stream.enum.ts ***!\n  \\*****************************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.StreamType = void 0;\r\nvar StreamType;\r\n(function (StreamType) {\r\n    StreamType[\"PICTURE\"] = \"picture-in-picture\";\r\n    StreamType[\"THUNDERDOME\"] = \"thunderdome\";\r\n    StreamType[\"EMBED\"] = \"embed\";\r\n    StreamType[\"FRONTPAGE\"] = \"frontpage\";\r\n    StreamType[\"SITE\"] = \"site\";\r\n    StreamType[\"EXTERNAL\"] = \"external\";\r\n    StreamType[\"DNS\"] = \"dns\";\r\n})(StreamType = exports.StreamType || (exports.StreamType = {}));\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyZWFtLmVudW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9kdWxlcy9zdHJlYW0vaW50ZXJmYWNlL3N0cmVhbS5lbnVtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLElBQVksVUFRWDtBQVJELFdBQVksVUFBVTtJQUNwQiw0Q0FBOEIsQ0FBQTtJQUM5Qix5Q0FBMkIsQ0FBQTtJQUMzQiw2QkFBZSxDQUFBO0lBQ2YscUNBQXVCLENBQUE7SUFDdkIsMkJBQWEsQ0FBQTtJQUNiLG1DQUFxQixDQUFBO0lBQ3JCLHlCQUFXLENBQUE7QUFDYixDQUFDLEVBUlcsVUFBVSxHQUFWLGtCQUFVLEtBQVYsa0JBQVUsUUFRckIifQ==\n\n/***/ }),\n\n/***/ \"./src/modules/stream/interface/stream.types.ts\":\n/*!******************************************************!*\\\n  !*** ./src/modules/stream/interface/stream.types.ts ***!\n  \\******************************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Server = exports.StreamUrl = void 0;\r\nclass StreamUrl {\r\n    constructor() {\r\n        this.url = \"\";\r\n        this.quality = \"\";\r\n    }\r\n}\r\nexports.StreamUrl = StreamUrl;\r\nclass Server {\r\n    constructor(partial) {\r\n        this.bestQuality = () => {\r\n            return this.urlList[0];\r\n        };\r\n        this.findByQuality = (quality) => this.urlList.find((x) => x.quality == quality);\r\n        Object.assign(this, partial);\r\n    }\r\n}\r\nexports.Server = Server;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyZWFtLnR5cGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZHVsZXMvc3RyZWFtL2ludGVyZmFjZS9zdHJlYW0udHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsTUFBYSxTQUFTO0lBQXRCO1FBQ0UsUUFBRyxHQUFXLEVBQUUsQ0FBQztRQUNqQixZQUFPLEdBQVcsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7Q0FBQTtBQUhELDhCQUdDO0FBQ0QsTUFBYSxNQUFNO0lBVWpCLFlBQVksT0FBd0I7UUFMcEMsZ0JBQVcsR0FBRyxHQUFHLEVBQUU7WUFDakIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLENBQUMsQ0FBQztRQUNGLGtCQUFhLEdBQUcsQ0FBQyxPQUFlLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDO1FBR2xGLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLENBQUM7Q0FDRjtBQWJELHdCQWFDIn0=\n\n/***/ }),\n\n/***/ \"./src/modules/stream/stream.ts\":\n/*!**************************************!*\\\n  !*** ./src/modules/stream/stream.ts ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Stream = void 0;\r\nconst twitch_service_1 = __webpack_require__(/*! ../twitch/twitch.service */ \"./src/modules/twitch/twitch.service.ts\");\r\nconst stream_types_1 = __webpack_require__(/*! ./interface/stream.types */ \"./src/modules/stream/interface/stream.types.ts\");\r\nclass Stream {\r\n    constructor(channelName) {\r\n        this.serverList = []; //the list of servers links m3u8\r\n        this.channelName = channelName;\r\n        this.twitchService = new twitch_service_1.TwitchService(\"\");\r\n    }\r\n    removeServer(server) {\r\n        const index = this.serverList.indexOf(server);\r\n        if (index > -1)\r\n            this.serverList.splice(index, 1);\r\n    }\r\n    //add m3u8 links with quality to the list of servers\r\n    createServer(text, type = \"local\", sig = true) {\r\n        const qualityUrlSplit = [];\r\n        let captureArray;\r\n        const REGEX = /NAME=\"((?:\\S+\\s+\\S+|\\S+))\",AUTO(?:^|\\S+\\s+)(?:^|\\S+\\s+)(https:\\/\\/video(\\S+).m3u8)/g;\r\n        while ((captureArray = REGEX.exec(text)) !== null) {\r\n            qualityUrlSplit.push({ quality: captureArray[1], url: captureArray[2] });\r\n        }\r\n        const streamList = new stream_types_1.Server({ type: type, urlList: qualityUrlSplit, sig: sig });\r\n        this.serverList.push(streamList);\r\n    }\r\n    //create a new stream access\r\n    createStreamAccess(playerType, integrityToken) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const streamDataAccess = yield this.twitchService.playbackAccessToken_Template(this.channelName, playerType);\r\n                const m3u8Text = yield this.twitchService.getM3U8(this.channelName, streamDataAccess);\r\n                this.createServer(m3u8Text, playerType);\r\n            }\r\n            catch (e) {\r\n                logPrint(e);\r\n            }\r\n        });\r\n    }\r\n    getStreamByStreamType(accessType) {\r\n        //filter all server by type\r\n        const servers = this.serverList.filter((x) => x.type == accessType);\r\n        if (!servers)\r\n            return [];\r\n        return servers;\r\n    }\r\n}\r\nexports.Stream = Stream;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyZWFtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZHVsZXMvc3RyZWFtL3N0cmVhbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSw2REFBeUQ7QUFFekQsMkRBQTZEO0FBRTdELE1BQWEsTUFBTTtJQUtqQixZQUFZLFdBQW1CO1FBSi9CLGVBQVUsR0FBYSxFQUFFLENBQUMsQ0FBQyxnQ0FBZ0M7UUFLekQsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLDhCQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVELFlBQVksQ0FBQyxNQUFjO1FBQ3pCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztZQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBRUQsb0RBQW9EO0lBQ3BELFlBQVksQ0FBQyxJQUFZLEVBQUUsSUFBSSxHQUFHLE9BQU8sRUFBRSxHQUFHLEdBQUcsSUFBSTtRQUNuRCxNQUFNLGVBQWUsR0FBZ0IsRUFBRSxDQUFDO1FBQ3hDLElBQUksWUFBb0MsQ0FBQztRQUV6QyxNQUFNLEtBQUssR0FBRyxxRkFBcUYsQ0FBQztRQUVwRyxPQUFPLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUU7WUFDakQsZUFBZSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDMUU7UUFFRCxNQUFNLFVBQVUsR0FBVyxJQUFJLHFCQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDMUYsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVELDRCQUE0QjtJQUN0QixrQkFBa0IsQ0FBQyxVQUFzQixFQUFFLGNBQXNCOztZQUNyRSxJQUFJO2dCQUNGLE1BQU0sZ0JBQWdCLEdBQUcsTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDLDRCQUE0QixDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7Z0JBQzdHLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUN0RixJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQzthQUN6QztZQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNWLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNiO1FBQ0gsQ0FBQztLQUFBO0lBRUQscUJBQXFCLENBQUMsVUFBc0I7UUFDMUMsMkJBQTJCO1FBQzNCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLFVBQVUsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxPQUFPO1lBQUUsT0FBTyxFQUFFLENBQUM7UUFFeEIsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztDQUNGO0FBaERELHdCQWdEQyJ9\n\n/***/ }),\n\n/***/ \"./src/modules/twitch/twitch.service.ts\":\n/*!**********************************************!*\\\n  !*** ./src/modules/twitch/twitch.service.ts ***!\n  \\**********************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.TwitchService = void 0;\r\nclass TwitchService {\r\n    constructor(integrityToken) {\r\n        this.integrityToken = integrityToken;\r\n    }\r\n    playbackAccessToken(playerType) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return { value: \"\", signature: \"\" };\r\n        });\r\n    }\r\n    playbackAccessToken_Template(channelName, playerType) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const query = 'query PlaybackAccessToken_Template($login: String!, $isLive: Boolean!, $vodID: ID!, $isVod: Boolean!, $playerType: String!) { streamPlaybackAccessToken(channelName: $login, params: {platform: \"web\", playerBackend: \"mediaplayer\", playerType: $playerType}) @include(if: $isLive) { value signature __typename } videoPlaybackAccessToken(id: $vodID, params: {platform: \"web\", playerBackend: \"mediaplayer\", playerType: $playerType}) @include(if: $isVod) { value signature __typename }}';\r\n            const body = {\r\n                operationName: \"PlaybackAccessToken_Template\",\r\n                query: query,\r\n                variables: {\r\n                    isLive: true,\r\n                    isVod: false,\r\n                    vodID: \"\",\r\n                    login: channelName,\r\n                    playerType: playerType,\r\n                },\r\n            };\r\n            const gql = yield __webpack_require__.g.request(\"https://gql.twitch.tv/gql\", {\r\n                method: \"POST\",\r\n                headers: { \"Host\": \"gql.twitch.tv\", \"Client-ID\": \"kimne78kx3ncx6brgo4mv6wki5h1ko\" },\r\n                body: JSON.stringify(body),\r\n            });\r\n            const streamDataAccess = yield gql.json();\r\n            return { token: streamDataAccess.data.streamPlaybackAccessToken.value, signature: streamDataAccess.data.streamPlaybackAccessToken.signature };\r\n        });\r\n    }\r\n    getM3U8(channelName, playbackAccessToken) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const params = \"allow_source=true&fast_bread=true&p=\" +\r\n                Math.floor(Math.random() * 1e7) +\r\n                \"&player_backend=mediaplayer&playlist_include_framerate=true&reassignments_supported=false&sig=\" +\r\n                playbackAccessToken.signature +\r\n                \"&supported_codecs=avc1&token=\" +\r\n                playbackAccessToken.token;\r\n            return (yield __webpack_require__.g.request(\"https://usher.ttvnw.net/api/channel/hls/\" + channelName + \".m3u8?\" + params)).text();\r\n        });\r\n    }\r\n}\r\nexports.TwitchService = TwitchService;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHdpdGNoLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbW9kdWxlcy90d2l0Y2gvdHdpdGNoLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsTUFBYSxhQUFhO0lBQ3RCLFlBQTZCLGNBQXNCO1FBQXRCLG1CQUFjLEdBQWQsY0FBYyxDQUFRO0lBQUksQ0FBQztJQUdsRCxtQkFBbUIsQ0FBQyxVQUFrQjs7WUFDeEMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQ3hDLENBQUM7S0FBQTtJQUVLLDRCQUE0QixDQUFDLFdBQW1CLEVBQUUsVUFBa0I7O1lBQ3RFLE1BQU0sS0FBSyxHQUNQLGllQUFpZSxDQUFDO1lBQ3RlLE1BQU0sSUFBSSxHQUFHO2dCQUNULGFBQWEsRUFBRSw4QkFBOEI7Z0JBQzdDLEtBQUssRUFBRSxLQUFLO2dCQUNaLFNBQVMsRUFBRTtvQkFDUCxNQUFNLEVBQUUsSUFBSTtvQkFDWixLQUFLLEVBQUUsS0FBSztvQkFDWixLQUFLLEVBQUUsRUFBRTtvQkFDVCxLQUFLLEVBQUUsV0FBVztvQkFDbEIsVUFBVSxFQUFFLFVBQVU7aUJBQ3pCO2FBQ0osQ0FBQztZQUVGLE1BQU0sR0FBRyxHQUFHLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQywyQkFBMkIsRUFBRTtnQkFDMUQsTUFBTSxFQUFFLE1BQU07Z0JBQ2QsT0FBTyxFQUFFLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsZ0NBQWdDLEVBQUU7Z0JBQ25GLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQzthQUM3QixDQUFDLENBQUM7WUFDSCxNQUFNLGdCQUFnQixHQUFHLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1lBRTFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ2xKLENBQUM7S0FBQTtJQUVLLE9BQU8sQ0FBQyxXQUFtQixFQUFFLG1CQUF5RDs7WUFDeEYsTUFBTSxNQUFNLEdBQ1Isc0NBQXNDO2dCQUN0QyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUM7Z0JBQy9CLGdHQUFnRztnQkFDaEcsbUJBQW1CLENBQUMsU0FBUztnQkFDN0IsK0JBQStCO2dCQUMvQixtQkFBbUIsQ0FBQyxLQUFLLENBQUM7WUFFOUIsT0FBTyxDQUFDLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQywwQ0FBMEMsR0FBRyxXQUFXLEdBQUcsUUFBUSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdkgsQ0FBQztLQUFBO0NBQ0o7QUE1Q0Qsc0NBNENDIn0=\n\n/***/ }),\n\n/***/ \"./node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js\":\n/*!*************************************************************************!*\\\n  !*** ./node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js ***!\n  \\*************************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ decodeB64ToUint8Array)\n/* harmony export */ });\n/* harmony import */ var global_window__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! global/window */ \"./node_modules/global/window.js\");\n/* harmony import */ var global_window__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(global_window__WEBPACK_IMPORTED_MODULE_0__);\n\n\nvar atob = function atob(s) {\n  return (global_window__WEBPACK_IMPORTED_MODULE_0___default().atob) ? global_window__WEBPACK_IMPORTED_MODULE_0___default().atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nfunction decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}\n\n/***/ }),\n\n/***/ \"./node_modules/@videojs/vhs-utils/es/stream.js\":\n/*!******************************************************!*\\\n  !*** ./node_modules/@videojs/vhs-utils/es/stream.js ***!\n  \\******************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Stream)\n/* harmony export */ });\n/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n    // In Video.js we slice listener functions\n    // on trigger so that it does not mess up the order\n    // while we loop through.\n    //\n    // Here we slice on off so that the loop in trigger\n    // can continue using it's old reference to loop without\n    // messing up the order.\n\n    this.listeners[type] = this.listeners[type].slice(0);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\n\n\n/***/ }),\n\n/***/ \"./node_modules/global/window.js\":\n/*!***************************************!*\\\n  !*** ./node_modules/global/window.js ***!\n  \\***************************************/\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof __webpack_require__.g !== \"undefined\") {\n    win = __webpack_require__.g;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n\n\n/***/ }),\n\n/***/ \"./node_modules/m3u8-parser/dist/m3u8-parser.es.js\":\n/*!*********************************************************!*\\\n  !*** ./node_modules/m3u8-parser/dist/m3u8-parser.es.js ***!\n  \\*********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LineStream\": () => (/* binding */ LineStream),\n/* harmony export */   \"ParseStream\": () => (/* binding */ ParseStream),\n/* harmony export */   \"Parser\": () => (/* binding */ Parser)\n/* harmony export */ });\n/* harmony import */ var _videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @videojs/vhs-utils/es/stream.js */ \"./node_modules/@videojs/vhs-utils/es/stream.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var _videojs_vhs_utils_es_decode_b64_to_uint8_array_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @videojs/vhs-utils/es/decode-b64-to-uint8-array.js */ \"./node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js\");\n/*! @name m3u8-parser @version 6.0.0 @license Apache-2.0 */\n\n\n\n\n/**\n * @file m3u8/line-stream.js\n */\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nclass LineStream extends _videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor() {\n    super();\n    this.buffer = '';\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  push(data) {\n    let nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  }\n\n}\n\nconst TAB = String.fromCharCode(0x09);\n\nconst parseByterange = function (byterangeString) {\n  // optionally match and capture 0+ digits before `@`\n  // optionally match and capture 0+ digits after `@`\n  const match = /([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString || '');\n  const result = {};\n\n  if (match[1]) {\n    result.length = parseInt(match[1], 10);\n  }\n\n  if (match[2]) {\n    result.offset = parseInt(match[2], 10);\n  }\n\n  return result;\n};\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\n\nconst attributeSeparator = function () {\n  const key = '[^=]*';\n  const value = '\"[^\"]*\"|[^,]*';\n  const keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nconst parseAttributes = function (attributes) {\n  const result = {};\n\n  if (!attributes) {\n    return result;\n  } // split the string using attributes as the separator\n\n\n  const attrs = attributes.split(attributeSeparator());\n  let i = attrs.length;\n  let attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nclass ParseStream extends _videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor() {\n    super();\n    this.customParsers = [];\n    this.tagMappers = [];\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  push(line) {\n    let match;\n    let event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    const newLines = this.tagMappers.reduce((acc, mapper) => {\n      const mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(newLine => {\n      for (let i = 0; i < this.customParsers.length; i++) {\n        if (this.customParsers[i].call(this, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        this.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n        return;\n      }\n\n      match = /^#EXTINF:([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = (0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(parseByterange(match[1]), {\n          type: 'tag',\n          tagType: 'byterange'\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-MAP:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          const attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            event.byterange = parseByterange(attributes.BYTERANGE);\n          }\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            const split = event.attributes.RESOLUTION.split('x');\n            const resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['FRAME-RATE']) {\n            event.attributes['FRAME-RATE'] = parseFloat(event.attributes['FRAME-RATE']);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-KEY:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-START:(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-SKIP:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'skip'\n        };\n        event.attributes = parseAttributes(match[1]);\n\n        if (event.attributes.hasOwnProperty('SKIPPED-SEGMENTS')) {\n          event.attributes['SKIPPED-SEGMENTS'] = parseInt(event.attributes['SKIPPED-SEGMENTS'], 10);\n        }\n\n        if (event.attributes.hasOwnProperty('RECENTLY-REMOVED-DATERANGES')) {\n          event.attributes['RECENTLY-REMOVED-DATERANGES'] = event.attributes['RECENTLY-REMOVED-DATERANGES'].split(TAB);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PART:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['DURATION'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['INDEPENDENT', 'GAP'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        if (event.attributes.hasOwnProperty('BYTERANGE')) {\n          event.attributes.byterange = parseByterange(event.attributes.BYTERANGE);\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'server-control'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['CAN-SKIP-UNTIL', 'PART-HOLD-BACK', 'HOLD-BACK'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['CAN-SKIP-DATERANGES', 'CAN-BLOCK-RELOAD'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PART-INF:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part-inf'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['PART-TARGET'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'preload-hint'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['BYTERANGE-START', 'BYTERANGE-LENGTH'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n            const subkey = key === 'BYTERANGE-LENGTH' ? 'length' : 'offset';\n            event.attributes.byterange = event.attributes.byterange || {};\n            event.attributes.byterange[subkey] = event.attributes[key]; // only keep the parsed byterange object.\n\n            delete event.attributes[key];\n          }\n        });\n        this.trigger('data', event);\n        return;\n      }\n\n      match = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'rendition-report'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['LAST-MSN', 'LAST-PART'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n          }\n        });\n        this.trigger('data', event);\n        return;\n      } // unknown tag type\n\n\n      this.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n\n\n  addParser({\n    expression,\n    customType,\n    dataParser,\n    segment\n  }) {\n    if (typeof dataParser !== 'function') {\n      dataParser = line => line;\n    }\n\n    this.customParsers.push(line => {\n      const match = expression.exec(line);\n\n      if (match) {\n        this.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType,\n          segment\n        });\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n\n\n  addTagMapper({\n    expression,\n    map\n  }) {\n    const mapFn = line => {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  }\n\n}\n\nconst camelCase = str => str.toLowerCase().replace(/-(\\w)/g, a => a[1].toUpperCase());\n\nconst camelCaseKeys = function (attributes) {\n  const result = {};\n  Object.keys(attributes).forEach(function (key) {\n    result[camelCase(key)] = attributes[key];\n  });\n  return result;\n}; // set SERVER-CONTROL hold back based upon targetDuration and partTargetDuration\n// we need this helper because defaults are based upon targetDuration and\n// partTargetDuration being set, but they may not be if SERVER-CONTROL appears before\n// target durations are set.\n\n\nconst setHoldBack = function (manifest) {\n  const {\n    serverControl,\n    targetDuration,\n    partTargetDuration\n  } = manifest;\n\n  if (!serverControl) {\n    return;\n  }\n\n  const tag = '#EXT-X-SERVER-CONTROL';\n  const hb = 'holdBack';\n  const phb = 'partHoldBack';\n  const minTargetDuration = targetDuration && targetDuration * 3;\n  const minPartDuration = partTargetDuration && partTargetDuration * 2;\n\n  if (targetDuration && !serverControl.hasOwnProperty(hb)) {\n    serverControl[hb] = minTargetDuration;\n    this.trigger('info', {\n      message: `${tag} defaulting HOLD-BACK to targetDuration * 3 (${minTargetDuration}).`\n    });\n  }\n\n  if (minTargetDuration && serverControl[hb] < minTargetDuration) {\n    this.trigger('warn', {\n      message: `${tag} clamping HOLD-BACK (${serverControl[hb]}) to targetDuration * 3 (${minTargetDuration})`\n    });\n    serverControl[hb] = minTargetDuration;\n  } // default no part hold back to part target duration * 3\n\n\n  if (partTargetDuration && !serverControl.hasOwnProperty(phb)) {\n    serverControl[phb] = partTargetDuration * 3;\n    this.trigger('info', {\n      message: `${tag} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${serverControl[phb]}).`\n    });\n  } // if part hold back is too small default it to part target duration * 2\n\n\n  if (partTargetDuration && serverControl[phb] < minPartDuration) {\n    this.trigger('warn', {\n      message: `${tag} clamping PART-HOLD-BACK (${serverControl[phb]}) to partTargetDuration * 2 (${minPartDuration}).`\n    });\n    serverControl[phb] = minPartDuration;\n  }\n};\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\n\nclass Parser extends _videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor() {\n    super();\n    this.lineStream = new LineStream();\n    this.parseStream = new ParseStream();\n    this.lineStream.pipe(this.parseStream);\n    /* eslint-disable consistent-this */\n\n    const self = this;\n    /* eslint-enable consistent-this */\n\n    const uris = [];\n    let currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    let currentMap; // if specified, the active decryption key\n\n    let key;\n    let hasParts = false;\n\n    const noop = function () {};\n\n    const defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    const widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    let currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // keep track of the last seen segment's byte range end, as segments are not required\n    // to provide the offset, in which case it defaults to the next byte after the\n    // previous segment\n\n    let lastByterangeEnd = 0; // keep track of the last seen part's byte range end.\n\n    let lastPartByterangeEnd = 0;\n    this.on('end', () => {\n      // only add preloadSegment if we don't yet have a uri for it.\n      // and we actually have parts/preloadHints\n      if (currentUri.uri || !currentUri.parts && !currentUri.preloadHints) {\n        return;\n      }\n\n      if (!currentUri.map && currentMap) {\n        currentUri.map = currentMap;\n      }\n\n      if (!currentUri.key && key) {\n        currentUri.key = key;\n      }\n\n      if (!currentUri.timeline && typeof currentTimeline === 'number') {\n        currentUri.timeline = currentTimeline;\n      }\n\n      this.manifest.preloadSegment = currentUri;\n    }); // update the manifest with the m3u8 entry from the parse stream\n\n    this.parseStream.on('data', function (entry) {\n      let mediaGroup;\n      let rendition;\n      ({\n        tag() {\n          // switch based on the tag type\n          (({\n            version() {\n              if (entry.version) {\n                this.manifest.version = entry.version;\n              }\n            },\n\n            'allow-cache'() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n\n            byterange() {\n              const byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */\n                  entry.offset = lastByterangeEnd;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n\n              lastByterangeEnd = byterange.offset + byterange.length;\n            },\n\n            endlist() {\n              this.manifest.endList = true;\n            },\n\n            inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n\n            key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.apple.streamingkeydelivery') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.apple.fps.1_0'] = {\n                  attributes: entry.attributes\n                };\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.microsoft.playready') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.microsoft.playready'] = {\n                  uri: entry.attributes.URI\n                };\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                const VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = this.manifest.contentProtection || {};\n                this.manifest.contentProtection['com.widevine.alpha'] = {\n                  attributes: {\n                    schemeIdUri: entry.attributes.KEYFORMAT,\n                    // remove '0x' from the key id string\n                    keyId: entry.attributes.KEYID.substring(2)\n                  },\n                  // decode the base64-encoded PSSH box\n                  pssh: (0,_videojs_vhs_utils_es_decode_b64_to_uint8_array_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(entry.attributes.URI.split(',')[1])\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                key.iv = entry.attributes.IV;\n              }\n            },\n\n            'media-sequence'() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n\n            'discontinuity-sequence'() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n\n            'playlist-type'() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n\n            map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n\n              if (key) {\n                currentMap.key = key;\n              }\n            },\n\n            'stream-inf'() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              (0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(currentUri.attributes, entry.attributes);\n            },\n\n            media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              const mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n\n            discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n\n            'program-date-time'() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n\n            targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n              setHoldBack.call(this, this.manifest);\n            },\n\n            start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n\n            'cue-out'() {\n              currentUri.cueOut = entry.data;\n            },\n\n            'cue-out-cont'() {\n              currentUri.cueOutCont = entry.data;\n            },\n\n            'cue-in'() {\n              currentUri.cueIn = entry.data;\n            },\n\n            'skip'() {\n              this.manifest.skip = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-SKIP', entry.attributes, ['SKIPPED-SEGMENTS']);\n            },\n\n            'part'() {\n              hasParts = true; // parts are always specifed before a segment\n\n              const segmentIndex = this.manifest.segments.length;\n              const part = camelCaseKeys(entry.attributes);\n              currentUri.parts = currentUri.parts || [];\n              currentUri.parts.push(part);\n\n              if (part.byterange) {\n                if (!part.byterange.hasOwnProperty('offset')) {\n                  part.byterange.offset = lastPartByterangeEnd;\n                }\n\n                lastPartByterangeEnd = part.byterange.offset + part.byterange.length;\n              }\n\n              const partIndex = currentUri.parts.length - 1;\n              this.warnOnMissingAttributes_(`#EXT-X-PART #${partIndex} for segment #${segmentIndex}`, entry.attributes, ['URI', 'DURATION']);\n\n              if (this.manifest.renditionReports) {\n                this.manifest.renditionReports.forEach((r, i) => {\n                  if (!r.hasOwnProperty('lastPart')) {\n                    this.trigger('warn', {\n                      message: `#EXT-X-RENDITION-REPORT #${i} lacks required attribute(s): LAST-PART`\n                    });\n                  }\n                });\n              }\n            },\n\n            'server-control'() {\n              const attrs = this.manifest.serverControl = camelCaseKeys(entry.attributes);\n\n              if (!attrs.hasOwnProperty('canBlockReload')) {\n                attrs.canBlockReload = false;\n                this.trigger('info', {\n                  message: '#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false'\n                });\n              }\n\n              setHoldBack.call(this, this.manifest);\n\n              if (attrs.canSkipDateranges && !attrs.hasOwnProperty('canSkipUntil')) {\n                this.trigger('warn', {\n                  message: '#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set'\n                });\n              }\n            },\n\n            'preload-hint'() {\n              // parts are always specifed before a segment\n              const segmentIndex = this.manifest.segments.length;\n              const hint = camelCaseKeys(entry.attributes);\n              const isPart = hint.type && hint.type === 'PART';\n              currentUri.preloadHints = currentUri.preloadHints || [];\n              currentUri.preloadHints.push(hint);\n\n              if (hint.byterange) {\n                if (!hint.byterange.hasOwnProperty('offset')) {\n                  // use last part byterange end or zero if not a part.\n                  hint.byterange.offset = isPart ? lastPartByterangeEnd : 0;\n\n                  if (isPart) {\n                    lastPartByterangeEnd = hint.byterange.offset + hint.byterange.length;\n                  }\n                }\n              }\n\n              const index = currentUri.preloadHints.length - 1;\n              this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${index} for segment #${segmentIndex}`, entry.attributes, ['TYPE', 'URI']);\n\n              if (!hint.type) {\n                return;\n              } // search through all preload hints except for the current one for\n              // a duplicate type.\n\n\n              for (let i = 0; i < currentUri.preloadHints.length - 1; i++) {\n                const otherHint = currentUri.preloadHints[i];\n\n                if (!otherHint.type) {\n                  continue;\n                }\n\n                if (otherHint.type === hint.type) {\n                  this.trigger('warn', {\n                    message: `#EXT-X-PRELOAD-HINT #${index} for segment #${segmentIndex} has the same TYPE ${hint.type} as preload hint #${i}`\n                  });\n                }\n              }\n            },\n\n            'rendition-report'() {\n              const report = camelCaseKeys(entry.attributes);\n              this.manifest.renditionReports = this.manifest.renditionReports || [];\n              this.manifest.renditionReports.push(report);\n              const index = this.manifest.renditionReports.length - 1;\n              const required = ['LAST-MSN', 'URI'];\n\n              if (hasParts) {\n                required.push('LAST-PART');\n              }\n\n              this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${index}`, entry.attributes, required);\n            },\n\n            'part-inf'() {\n              this.manifest.partInf = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-PART-INF', entry.attributes, ['PART-TARGET']);\n\n              if (this.manifest.partInf.partTarget) {\n                this.manifest.partTargetDuration = this.manifest.partInf.partTarget;\n              }\n\n              setHoldBack.call(this, this.manifest);\n            }\n\n          })[entry.tagType] || noop).call(self);\n        },\n\n        uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (key) {\n            currentUri.key = key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // reset the last byterange end as it needs to be 0 between parts\n\n\n          lastPartByterangeEnd = 0; // prepare for the next URI\n\n          currentUri = {};\n        },\n\n        comment() {// comments are not important for playback\n        },\n\n        custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n\n      })[entry.type].call(self);\n    });\n  }\n\n  warnOnMissingAttributes_(identifier, attributes, required) {\n    const missing = [];\n    required.forEach(function (key) {\n      if (!attributes.hasOwnProperty(key)) {\n        missing.push(key);\n      }\n    });\n\n    if (missing.length) {\n      this.trigger('warn', {\n        message: `${identifier} lacks required attribute(s): ${missing.join(', ')}`\n      });\n    }\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n\n\n  push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n\n\n  end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n    this.trigger('end');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n\n\n  addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n\n\n  addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  }\n\n}\n\n\n\n\n/***/ }),\n\n/***/ \"./node_modules/@babel/runtime/helpers/esm/extends.js\":\n/*!************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!\n  \\************************************************************/\n/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ _extends)\n/* harmony export */ });\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/global */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.g = (function() {\n/******/ \t\t\tif (typeof globalThis === 'object') return globalThis;\n/******/ \t\t\ttry {\n/******/ \t\t\t\treturn this || new Function('return this')();\n/******/ \t\t\t} catch (e) {\n/******/ \t\t\t\tif (typeof window === 'object') return window;\n/******/ \t\t\t}\n/******/ \t\t})();\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(\"./src/app.worker.ts\");\n/******/ \t\n/******/ })()\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3REFBd0Q7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBOztBQUVBLCtEQUErRCxFQUFFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0U7O0FBRXhFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxRQUFROzs7QUFHUjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCLGFBQWEsVUFBVTtBQUN2QixhQUFhLFVBQVU7QUFDdkIsYUFBYSxVQUFVO0FBQ3ZCLGFBQWEsVUFBVTtBQUN2Qjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QixhQUFhLFVBQVU7QUFDdkIsYUFBYSxVQUFVO0FBQ3ZC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QUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsaUNBQWlDLFdBQVc7V0FDNUM7V0FDQTs7Ozs7V0NQQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHlDQUF5Qyx3Q0FBd0M7V0FDakY7V0FDQTtXQUNBOzs7OztXQ1BBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsR0FBRztXQUNIO1dBQ0E7V0FDQSxDQUFDOzs7OztXQ1BEOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7VUVOQTtVQUNBO1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9hcHAuY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLndvcmtlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGVjb3JhdG9yL2NvbnRyb2xsZXIuZGVjb3JhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9kZWNvcmF0b3IvaGFuZGxlci5kZWNvcmF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvcGxheWVyL3BsYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9zdHJlYW0vaW50ZXJmYWNlL3N0cmVhbS5lbnVtLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3N0cmVhbS9pbnRlcmZhY2Uvc3RyZWFtLnR5cGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3N0cmVhbS9zdHJlYW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdHdpdGNoL3R3aXRjaC5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdmlkZW9qcy92aHMtdXRpbHMvZXMvZGVjb2RlLWI2NC10by11aW50OC1hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHZpZGVvanMvdmhzLXV0aWxzL2VzL3N0cmVhbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZ2xvYmFsL3dpbmRvdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbTN1OC1wYXJzZXIvZGlzdC9tM3U4LXBhcnNlci5lcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly8vd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5BcHBDb250cm9sbGVyID0gdm9pZCAwO1xyXG5jb25zdCBjb250cm9sbGVyX2RlY29yYXRvcl8xID0gcmVxdWlyZShcIi4vZGVjb3JhdG9yL2NvbnRyb2xsZXIuZGVjb3JhdG9yXCIpO1xyXG5jb25zdCBoYW5kbGVyX2RlY29yYXRvcl8xID0gcmVxdWlyZShcIi4vZGVjb3JhdG9yL2hhbmRsZXIuZGVjb3JhdG9yXCIpO1xyXG5sZXQgQXBwQ29udHJvbGxlciA9IGNsYXNzIEFwcENvbnRyb2xsZXIge1xyXG4gICAgY29uc3RydWN0b3IoYXBwU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuYXBwU2VydmljZSA9IGFwcFNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5nZXRTZXR0aW5ncyA9ICgpID0+IGdsb2JhbC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwiZ2V0U2V0dGluZ3NcIiB9KTtcclxuICAgICAgICB0aGlzLmdldFNldHRpbmdzKCk7XHJcbiAgICB9XHJcbiAgICBzZXRJbnRlZ3JpdHkoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwU2VydmljZS5zZXRJbnRlZ3JpdHlUb2tlbihKU09OLnBhcnNlKGRhdGEudmFsdWUpLnRva2VuKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9uQ2hhbm5lbCh1cmwsIG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIGdsb2JhbC5yZXF1ZXN0KHVybCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3Igb24gY2hhbm5lbCBsb2FkXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSB5aWVsZCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gL2hsc1xcLyguKikubTN1OC9nbS5leGVjKHVybCkgfHwgW107XHJcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuYXBwU2VydmljZS5zZXRDaGFubmVsKGNoYW5uZWxOYW1lWzFdKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSh0ZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9uRmV0Y2godXJsLCBvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgYm9keSA9IHlpZWxkICh5aWVsZCByZXF1ZXN0KHVybCwgb3B0aW9ucykpLnRleHQoKTtcclxuICAgICAgICAgICAgY29uc3QgcGxheWxpc3QgPSB5aWVsZCB0aGlzLmFwcFNlcnZpY2Uub25GZXRjaChib2R5KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShwbGF5bGlzdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvbkNoYW5uZWxQaWN0dXJlKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNldFNldHRpbmdzKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcFNlcnZpY2Uuc2V0U2V0dGluZ3MoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRRdWFsaXR5KGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcFNlcnZpY2UucXVhbGl0eSA9IGRhdGEudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgKDAsIGhhbmRsZXJfZGVjb3JhdG9yXzEuTWVzc2FnZSkoXCJzZXRJbnRlZ3JpdHlcIilcclxuXSwgQXBwQ29udHJvbGxlci5wcm90b3R5cGUsIFwic2V0SW50ZWdyaXR5XCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICAgICgwLCBoYW5kbGVyX2RlY29yYXRvcl8xLkZldGNoKShcInVzaGVyLnR0dm53Lm5ldC9hcGkvY2hhbm5lbC9obHMvXCIsIFwicGljdHVyZS1ieS1waWN0dXJlXCIpXHJcbl0sIEFwcENvbnRyb2xsZXIucHJvdG90eXBlLCBcIm9uQ2hhbm5lbFwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICAoMCwgaGFuZGxlcl9kZWNvcmF0b3JfMS5GZXRjaCkoXCJobHMudHR2bncubmV0L3YxL3BsYXlsaXN0L1wiKVxyXG5dLCBBcHBDb250cm9sbGVyLnByb3RvdHlwZSwgXCJvbkZldGNoXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICAgICgwLCBoYW5kbGVyX2RlY29yYXRvcl8xLkZldGNoKShcInBpY3R1cmUtYnktcGljdHVyZVwiKVxyXG5dLCBBcHBDb250cm9sbGVyLnByb3RvdHlwZSwgXCJvbkNoYW5uZWxQaWN0dXJlXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICAgICgwLCBoYW5kbGVyX2RlY29yYXRvcl8xLk1lc3NhZ2UpKFwic2V0U2V0dGluZ3NcIilcclxuXSwgQXBwQ29udHJvbGxlci5wcm90b3R5cGUsIFwic2V0U2V0dGluZ3NcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgKDAsIGhhbmRsZXJfZGVjb3JhdG9yXzEuTWVzc2FnZSkoXCJzZXRRdWFsaXR5XCIpXHJcbl0sIEFwcENvbnRyb2xsZXIucHJvdG90eXBlLCBcInNldFF1YWxpdHlcIiwgbnVsbCk7XHJcbkFwcENvbnRyb2xsZXIgPSBfX2RlY29yYXRlKFtcclxuICAgICgwLCBjb250cm9sbGVyX2RlY29yYXRvcl8xLkNvbnRyb2xsZXIpKClcclxuXSwgQXBwQ29udHJvbGxlcik7XHJcbmV4cG9ydHMuQXBwQ29udHJvbGxlciA9IEFwcENvbnRyb2xsZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVlYQndMbU52Ym5SeWIyeHNaWEl1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTl6Y21NdllYQndMbU52Ym5SeWIyeHNaWEl1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWpzN096czdPenM3T3pzN096czdPenM3TzBGQlFVRXNNa1ZCUVRoRU8wRkJRemxFTEhGRlFVRXJSRHRCUVVrdlJDeEpRVUZoTEdGQlFXRXNSMEZCTVVJc1RVRkJZU3hoUVVGaE8wbEJSM2hDTEZsQlFUWkNMRlZCUVd0Q08xRkJRV3hDTEdWQlFWVXNSMEZCVml4VlFVRlZMRU5CUVZFN1VVRkdMME1zWjBKQlFWY3NSMEZCUnl4SFFVRkhMRVZCUVVVc1EwRkJReXhOUVVGTkxFTkJRVU1zVjBGQlZ5eERRVUZETEVWQlFVVXNTVUZCU1N4RlFVRkZMR0ZCUVdFc1JVRkJSU3hEUVVGRExFTkJRVU03VVVGSE9VUXNTVUZCU1N4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8wbEJRM0pDTEVOQlFVTTdTVUZIU3l4WlFVRlpMRU5CUVVNc1NVRkJVenM3V1VGRE1VSXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRSUVVOc1JTeERRVUZETzB0QlFVRTdTVUZIU3l4VFFVRlRMRU5CUVVNc1IwRkJWeXhGUVVGRkxFOUJRVms3TzFsQlEzWkRMRTFCUVUwc1VVRkJVU3hIUVVGaExFMUJRVTBzVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl4SFFVRkhMRVZCUVVVc1QwRkJUeXhEUVVGRExFTkJRVU03V1VGRE9VUXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhGUVVGRkxFVkJRVVU3WjBKQlEyaENMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zZFVKQlFYVkNMRU5CUVVNc1EwRkJRenRuUWtGRGNrTXNUMEZCVHl4UlFVRlJMRU5CUVVNN1lVRkRha0k3V1VGRlJDeE5RVUZOTEVsQlFVa3NSMEZCUnl4TlFVRk5MRkZCUVZFc1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlF6dFpRVU51UXl4TlFVRk5MRmRCUVZjc1IwRkJSeXhyUWtGQmEwSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUlVGQlJTeERRVUZETzFsQlJYWkVMRTFCUVUwc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eFZRVUZWTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGFrUXNUMEZCVHl4SlFVRkpMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dFJRVU0xUWl4RFFVRkRPMHRCUVVFN1NVRkhTeXhQUVVGUExFTkJRVU1zUjBGQlZ5eEZRVUZGTEU5QlFWazdPMWxCUTNKRExFMUJRVTBzU1VGQlNTeEhRVUZYTEUxQlFVMHNRMEZCUXl4TlFVRk5MRTlCUVU4c1EwRkJReXhIUVVGSExFVkJRVVVzVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRVZCUVVVc1EwRkJRenRaUVVOb1JTeE5RVUZOTEZGQlFWRXNSMEZCUnl4TlFVRk5MRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTNKRUxFOUJRVThzU1VGQlNTeFJRVUZSTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNN1VVRkRhRU1zUTBGQlF6dExRVUZCTzBsQlIwc3NaMEpCUVdkQ0xFTkJRVU1zUjBGQlZ5eEZRVUZGTEU5QlFWazdPMWxCUXpsRExFOUJRVThzU1VGQlNTeFJRVUZSTEVWQlFVVXNRMEZCUXp0UlFVTjRRaXhEUVVGRE8wdEJRVUU3U1VGSFN5eFhRVUZYTEVOQlFVTXNTVUZCVXpzN1dVRkRla0lzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03VVVGRGNFTXNRMEZCUXp0TFFVRkJPMGxCUjBzc1ZVRkJWU3hEUVVGRExFbEJRVk03TzFsQlEzaENMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVDBGQlR5eEhRVUZITEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNN1VVRkRka01zUTBGQlF6dExRVUZCTzBOQlEwWXNRMEZCUVR0QlFYaERRenRKUVVSRExFbEJRVUVzTWtKQlFVOHNSVUZCUXl4alFVRmpMRU5CUVVNN2FVUkJSM1pDTzBGQlIwUTdTVUZFUXl4SlFVRkJMSGxDUVVGTExFVkJRVU1zYTBOQlFXdERMRVZCUVVVc2IwSkJRVzlDTEVOQlFVTTdPRU5CWVM5RU8wRkJSMFE3U1VGRVF5eEpRVUZCTEhsQ1FVRkxMRVZCUVVNc05FSkJRVFJDTEVOQlFVTTdORU5CUzI1RE8wRkJSMFE3U1VGRVF5eEpRVUZCTEhsQ1FVRkxMRVZCUVVNc2IwSkJRVzlDTEVOQlFVTTdjVVJCUnpOQ08wRkJSMFE3U1VGRVF5eEpRVUZCTERKQ1FVRlBMRVZCUVVNc1lVRkJZU3hEUVVGRE8yZEVRVWQwUWp0QlFVZEVPMGxCUkVNc1NVRkJRU3d5UWtGQlR5eEZRVUZETEZsQlFWa3NRMEZCUXpzclEwRkhja0k3UVVFdlExVXNZVUZCWVR0SlFVUjZRaXhKUVVGQkxHbERRVUZWTEVkQlFVVTdSMEZEUVN4aFFVRmhMRU5CWjBSNlFqdEJRV2hFV1N4elEwRkJZU0o5IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBhcHBfY29udHJvbGxlcl8xID0gcmVxdWlyZShcIi4vYXBwLmNvbnRyb2xsZXJcIik7XHJcbmNvbnN0IHBsYXllcl8xID0gcmVxdWlyZShcIi4vbW9kdWxlcy9wbGF5ZXIvcGxheWVyXCIpO1xyXG5mdW5jdGlvbiBhcHAoKSB7XHJcbiAgICBnbG9iYWwubG9nUHJpbnQgPSAoeCkgPT4gY29uc29sZS5sb2coXCJbUHVycGxlXTogXCIsIHgpO1xyXG4gICAgZ2xvYmFsLmFwcENvbnRyb2xsZXIgPSBuZXcgYXBwX2NvbnRyb2xsZXJfMS5BcHBDb250cm9sbGVyKG5ldyBwbGF5ZXJfMS5QbGF5ZXIoKSk7XHJcbiAgICBnbG9iYWwubG9nUHJpbnQoXCJTY3JpcHQgcnVubmluZ1wiKTtcclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBhcHA7XHJcbmdsb2JhbC5yZXF1ZXN0ID0gZ2xvYmFsLmZldGNoO1xyXG5nbG9iYWwuZmV0Y2ggPSAodXJsLCBvcHRpb25zKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgIGlmICh0eXBlb2YgdXJsID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvdXRlckxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHVybC5pbmNsdWRlcyhyb3V0ZXJMaXN0W2ldLm1hdGNoKSAmJiAhdXJsLmluY2x1ZGVzKHJvdXRlckxpc3RbaV0uaWdub3JlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyByZXR1cm4gcmVzb2x2ZSh5aWVsZCBnbG9iYWwuYXBwQ29udHJvbGxlcltyb3V0ZXJMaXN0W2ldLnByb3BlcnR5S2V5XSh1cmwsIG9wdGlvbnMpKTsgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdsb2JhbC5yZXF1ZXN0LmFwcGx5KHRoaXMsIFt1cmwsIG9wdGlvbnNdKTtcclxufSk7XHJcbmdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZSkgPT4ge1xyXG4gICAgZ2xvYmFsLm1lc3NhZ2VMaXN0LmZvckVhY2goKHgpID0+IHtcclxuICAgICAgICBpZiAoZS5kYXRhLmZ1bmNOYW1lID09IHgubWF0Y2gpXHJcbiAgICAgICAgICAgIGdsb2JhbC5hcHBDb250cm9sbGVyW3gucHJvcGVydHlLZXldKGUuZGF0YSk7XHJcbiAgICB9KTtcclxufSk7XHJcbmFwcCgpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lZWEJ3TG5kdmNtdGxjaTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5aGNIQXVkMjl5YTJWeUxuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSTdPenM3T3pzN096czdPMEZCUVVFc2NVUkJRV2xFTzBGQlEycEVMRzlFUVVGcFJEdEJRVlZxUkN4VFFVRjNRaXhIUVVGSE8wbEJRM3BDTEUxQlFVMHNRMEZCUXl4UlFVRlJMRWRCUVVjc1EwRkJReXhEUVVGTkxFVkJRVVVzUlVGQlJTeERRVUZETEU5QlFVOHNRMEZCUXl4SFFVRkhMRU5CUVVNc1dVRkJXU3hGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETzBsQlF6TkVMRTFCUVUwc1EwRkJReXhoUVVGaExFZEJRVWNzU1VGQlNTdzRRa0ZCWVN4RFFVRkRMRWxCUVVrc1pVRkJUU3hGUVVGRkxFTkJRVU1zUTBGQlF6dEpRVVYyUkN4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNN1FVRkRjRU1zUTBGQlF6dEJRVXhFTEhOQ1FVdERPMEZCUlVRc1RVRkJUU3hEUVVGRExFOUJRVThzUjBGQlJ5eE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRPMEZCUXpsQ0xFMUJRVTBzUTBGQlF5eExRVUZMTEVkQlFVY3NRMEZCVHl4SFFVRlJMRVZCUVVVc1QwRkJXU3hGUVVGRkxFVkJRVVU3U1VGRE9VTXNTVUZCU1N4UFFVRlBMRWRCUVVjc1MwRkJTeXhSUVVGUkxFVkJRVVU3VVVGRE0wSXNTMEZCU3l4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFVkJRVVVzUjBGQlJ5eEhRVUZITEZWQlFWVXNRMEZCUXl4TlFVRk5MRVZCUVVVc1EwRkJReXhIUVVGSExFZEJRVWNzUlVGQlJTeERRVUZETEVWQlFVVXNSVUZCUlR0WlFVTnlSQ3hKUVVGSkxFZEJRVWNzUTBGQlF5eFJRVUZSTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRkZCUVZFc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVHl4RFFVRkRMRVZCUVVVN1owSkJRemRGTEU5QlFVOHNTVUZCU1N4UFFVRlBMRU5CUVVNc1EwRkJUeXhQUVVGUExFVkJRVVVzVFVGQlRTeEZRVUZGTEVWQlFVVXNhMFJCUVVNc1QwRkJRU3hQUVVGUExFTkJRVU1zVFVGQlRTeE5RVUZOTEVOQlFVTXNZVUZCWVN4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4SFFVRkhMRVZCUVVVc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlFTeEhRVUZCTEVOQlFVTXNRMEZCUXp0aFFVTTNTRHRUUVVOR08wdEJRMFk3U1VGRFJDeFBRVUZQTEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUlVGQlJTeERRVUZETEVkQlFVY3NSVUZCUlN4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM0JFTEVOQlFVTXNRMEZCUVN4RFFVRkRPMEZCUlVZc1RVRkJUU3hEUVVGRExHZENRVUZuUWl4RFFVRkRMRk5CUVZNc1JVRkJSU3hEUVVGRExFTkJRVTBzUlVGQlJTeEZRVUZGTzBsQlF6VkRMRTFCUVUwc1EwRkJReXhYUVVGWExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRVZCUVVVN1VVRkRMMElzU1VGQlNTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1NVRkJTU3hEUVVGRExFTkJRVU1zUzBGQlN6dFpRVUZGTEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRKUVVNNVJTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk1MRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJSVWdzUjBGQlJ5eEZRVUZGTEVOQlFVTWlmUT09IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Db250cm9sbGVyID0gdm9pZCAwO1xyXG5jb25zdCBDb250cm9sbGVyID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuICh0YXJnZXQpID0+IHsgfTtcclxufTtcclxuZXhwb3J0cy5Db250cm9sbGVyID0gQ29udHJvbGxlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWTI5dWRISnZiR3hsY2k1a1pXTnZjbUYwYjNJdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl1TGk4dUxpOXpjbU12WkdWamIzSmhkRzl5TDJOdmJuUnliMnhzWlhJdVpHVmpiM0poZEc5eUxuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSTdPenRCUVVGUExFMUJRVTBzVlVGQlZTeEhRVUZITEVkQlFXMUNMRVZCUVVVN1NVRkROME1zVDBGQlR5eERRVUZETEUxQlFVMHNSVUZCUlN4RlFVRkZMRWRCUVVVc1EwRkJReXhEUVVGRE8wRkJRM2hDTEVOQlFVTXNRMEZCUXp0QlFVWlhMRkZCUVVFc1ZVRkJWU3hqUVVWeVFpSjkiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLk1lc3NhZ2UgPSBleHBvcnRzLkZldGNoID0gdm9pZCAwO1xyXG5jb25zdCBGZXRjaCA9IChtYXRjaCwgaWdub3JlID0gbnVsbCkgPT4ge1xyXG4gICAgcmV0dXJuICh0YXJnZXQsIHByb3BlcnR5S2V5KSA9PiB7XHJcbiAgICAgICAgaWYgKCFnbG9iYWwucm91dGVyTGlzdClcclxuICAgICAgICAgICAgZ2xvYmFsLnJvdXRlckxpc3QgPSBbXTtcclxuICAgICAgICBnbG9iYWwucm91dGVyTGlzdC5wdXNoKHsgcHJvcGVydHlLZXk6IHByb3BlcnR5S2V5LCBtYXRjaDogbWF0Y2gsIGlnbm9yZTogaWdub3JlIH0pO1xyXG4gICAgfTtcclxufTtcclxuZXhwb3J0cy5GZXRjaCA9IEZldGNoO1xyXG5jb25zdCBNZXNzYWdlID0gKG1hdGNoKSA9PiB7XHJcbiAgICByZXR1cm4gKHRhcmdldCwgcHJvcGVydHlLZXkpID0+IHtcclxuICAgICAgICBpZiAoIWdsb2JhbC5tZXNzYWdlTGlzdClcclxuICAgICAgICAgICAgZ2xvYmFsLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgZ2xvYmFsLm1lc3NhZ2VMaXN0LnB1c2goeyBwcm9wZXJ0eUtleTogcHJvcGVydHlLZXksIG1hdGNoOiBtYXRjaCB9KTtcclxuICAgIH07XHJcbn07XHJcbmV4cG9ydHMuTWVzc2FnZSA9IE1lc3NhZ2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFHRnVaR3hsY2k1a1pXTnZjbUYwYjNJdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl1TGk4dUxpOXpjbU12WkdWamIzSmhkRzl5TDJoaGJtUnNaWEl1WkdWamIzSmhkRzl5TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lJN096dEJRVUZQTEUxQlFVMHNTMEZCU3l4SFFVRkhMRU5CUVVNc1MwRkJZU3hGUVVGRkxGTkJRWGRDTEVsQlFVa3NSVUZCYlVJc1JVRkJSVHRKUVVOd1JpeFBRVUZQTEVOQlFVTXNUVUZCVFN4RlFVRkZMRmRCUVZjc1JVRkJSU3hGUVVGRk8xRkJRemRDTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1ZVRkJWVHRaUVVGRkxFMUJRVTBzUTBGQlF5eFZRVUZWTEVkQlFVY3NSVUZCUlN4RFFVRkRPMUZCUXk5RExFMUJRVTBzUTBGQlF5eFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1YwRkJWeXhGUVVGRkxGZEJRWEZDTEVWQlFVVXNTMEZCU3l4RlFVRkZMRXRCUVVzc1JVRkJSU3hOUVVGTkxFVkJRVVVzVFVGQlRTeEZRVUZGTEVOQlFVTXNRMEZCUXp0SlFVTXZSaXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTTdRVUZNVnl4UlFVRkJMRXRCUVVzc1UwRkxhRUk3UVVGRlN5eE5RVUZOTEU5QlFVOHNSMEZCUnl4RFFVRkRMRXRCUVdFc1JVRkJiVUlzUlVGQlJUdEpRVU40UkN4UFFVRlBMRU5CUVVNc1RVRkJUU3hGUVVGRkxGZEJRVmNzUlVGQlJTeEZRVUZGTzFGQlF6ZENMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVjBGQlZ6dFpRVUZGTEUxQlFVMHNRMEZCUXl4WFFVRlhMRWRCUVVjc1JVRkJSU3hEUVVGRE8xRkJRMnBFTEUxQlFVMHNRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzVjBGQlZ5eEZRVUZGTEZkQlFYRkNMRVZCUVVVc1MwRkJTeXhGUVVGRkxFdEJRVXNzUlVGQlJTeERRVUZETEVOQlFVTTdTVUZEYUVZc1EwRkJReXhEUVVGRE8wRkJRMG9zUTBGQlF5eERRVUZETzBGQlRGY3NVVUZCUVN4UFFVRlBMRmRCUzJ4Q0luMD0iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuUGxheWVyID0gdm9pZCAwO1xyXG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCIuLi9zdHJlYW0vc3RyZWFtXCIpO1xyXG5jb25zdCBzdHJlYW1fZW51bV8xID0gcmVxdWlyZShcIi4uL3N0cmVhbS9pbnRlcmZhY2Uvc3RyZWFtLmVudW1cIik7XHJcbmNvbnN0IG0zdThfcGFyc2VyXzEgPSByZXF1aXJlKFwibTN1OC1wYXJzZXJcIik7XHJcbmNsYXNzIFBsYXllciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmludGVncml0eVRva2VuID0gXCJcIjsgLy90aGUgaW50ZWdyaXR5IHRva2VuXHJcbiAgICAgICAgdGhpcy5zdHJlYW1MaXN0ID0gW107IC8vdGhlIGxpc3Qgb2Ygc3RyZWFtcyB0aGF0IGFyZSBjdXJyZW50bHkgYmVpbmcgcGxheWVkXHJcbiAgICAgICAgdGhpcy5hY3R1YWxDaGFubmVsID0gXCJcIjsgLy90aGUgY2hhbm5lbFxyXG4gICAgICAgIHRoaXMucGxheWluZ0FkcyA9IGZhbHNlOyAvL2lmIHRoZSBzdHJlYW0gaXMgcGxheWluZyBhZHNcclxuICAgICAgICB0aGlzLnF1YWxpdHkgPSBcIlwiOyAvL3RoZSBxdWFsaXR5IG9mIHRoZSBzdHJlYW1cclxuICAgICAgICB0aGlzLmdldFF1YWxpdHkgPSAoKSA9PiBnbG9iYWwucG9zdE1lc3NhZ2UoeyB0eXBlOiBcImdldFF1YWxpdHlcIiB9KTtcclxuICAgICAgICB0aGlzLmdldFNldHRpbmdzID0gKCkgPT4gZ2xvYmFsLnBvc3RNZXNzYWdlKHsgdHlwZTogXCJnZXRTZXR0aW5nc1wiIH0pO1xyXG4gICAgICAgIHRoaXMucGF1c2UgPSAoKSA9PiBnbG9iYWwucG9zdE1lc3NhZ2UoeyB0eXBlOiBcInBhdXNlXCIgfSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ID0gKCkgPT4gZ2xvYmFsLnBvc3RNZXNzYWdlKHsgdHlwZTogXCJwbGF5XCIgfSk7XHJcbiAgICAgICAgdGhpcy5zZXRTZXR0aW5ncyA9IChzZXR0aW5nKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZyA9IHNldHRpbmc7XHJcbiAgICAgICAgICAgIGxvZ1ByaW50KFwiU2V0dGluZ3MgbG9hZGVkXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRJbnRlZ3JpdHlUb2tlbiA9IChpbnRlZ3JpdHlUb2tlbikgPT4gdGhpcy5pbnRlZ3JpdHlUb2tlbiA9IGludGVncml0eVRva2VuO1xyXG4gICAgICAgIHRoaXMucGF1c2VBbmRQbGF5ID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vblN0YXJ0QWRzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImFkcyBzdGFydGVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlQW5kUGxheSgpO1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlQW5kUGxheSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkVuZEFkcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJhZHMgZW5kZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2VBbmRQbGF5KCk7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2VBbmRQbGF5KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmlzQWRzID0gKHgsIGFsbG93Q2hhbmdlID0gZmFsc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYWRzID0gdGhpcy5oYXNBZHMoeCk7XHJcbiAgICAgICAgICAgIGlmICghYWxsb3dDaGFuZ2UpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5aW5nQWRzID09IGZhbHNlICYmIHRoaXMucGxheWluZ0FkcyAhPSBhZHMpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RhcnRBZHMoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWluZ0FkcyA9PSB0cnVlICYmIHRoaXMucGxheWluZ0FkcyAhPSBhZHMpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRW5kQWRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWluZ0FkcyA9IGFkcztcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxheWluZ0FkcztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFzQWRzID0gKHgpID0+ICh4ID09PSBudWxsIHx8IHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHgudG9TdHJpbmcoKS5pbmNsdWRlcyhcInN0aXRjaGVkXCIpKSB8fCAoeCA9PT0gbnVsbCB8fCB4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB4LnRvU3RyaW5nKCkuaW5jbHVkZXMoXCJBbWF6b25cIikpIHx8ICh4ID09PSBudWxsIHx8IHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHgudG9TdHJpbmcoKS5pbmNsdWRlcyhcIkRDTVwiKSk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3RyZWFtID0gKGNoYW5uZWwgPSB0aGlzLmFjdHVhbENoYW5uZWwpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zdHJlYW1MaXN0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmluZCgoeCkgPT4geC5jaGFubmVsTmFtZSA9PT0gY2hhbm5lbCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGlzV2hpdGVsaXN0KCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuICgoX2IgPSAoX2EgPSB0aGlzLnNldHRpbmcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS53aGl0ZWxpc3QpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbmNsdWRlcyh0aGlzLmFjdHVhbENoYW5uZWwpKSB8fCBmYWxzZTtcclxuICAgIH1cclxuICAgIG9uRmV0Y2godGV4dCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzV2hpdGVsaXN0KCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWRzKHRleHQsIHRydWUpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2VNM3U4Q29udGVudHMoW3RleHRdKTtcclxuICAgICAgICAgICAgbGV0IGR1bXAgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RyZWFtKCkuY3JlYXRlU3RyZWFtQWNjZXNzKHN0cmVhbV9lbnVtXzEuU3RyZWFtVHlwZS5GUk9OVFBBR0UsIHRoaXMuaW50ZWdyaXR5VG9rZW4pO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJlYW0oKS5jcmVhdGVTdHJlYW1BY2Nlc3Moc3RyZWFtX2VudW1fMS5TdHJlYW1UeXBlLlBJQ1RVUkUsIHRoaXMuaW50ZWdyaXR5VG9rZW4pO1xyXG4gICAgICAgICAgICBjb25zdCBmcm9udHBhZ2UgPSB5aWVsZCB0aGlzLmZldGNobTN1OEJ5U3RyZWFtVHlwZShzdHJlYW1fZW51bV8xLlN0cmVhbVR5cGUuRlJPTlRQQUdFKTtcclxuICAgICAgICAgICAgLy8gaWYgKGZyb250cGFnZS5kYXRhKSByZXR1cm4gdGhpcy5tZXJnZU0zdThDb250ZW50cyhbZnJvbnRwYWdlLmRhdGEsIC4uLmR1bXBdKTtcclxuICAgICAgICAgICAgZHVtcCA9IGR1bXAuY29uY2F0KGZyb250cGFnZS5kdW1wKTtcclxuICAgICAgICAgICAgY29uc3QgcGljdHVyZSA9IHlpZWxkIHRoaXMuZmV0Y2htM3U4QnlTdHJlYW1UeXBlKHN0cmVhbV9lbnVtXzEuU3RyZWFtVHlwZS5QSUNUVVJFKTtcclxuICAgICAgICAgICAgLy8gaWYgKGV4dGVybmFsLmRhdGEpIHJldHVybiB0aGlzLm1lcmdlTTN1OENvbnRlbnRzKFtleHRlcm5hbC5kYXRhLCAuLi5kdW1wXSk7XHJcbiAgICAgICAgICAgIGR1bXAgPSBkdW1wLmNvbmNhdChwaWN0dXJlLmR1bXApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFsbCBzdHJlYW0gdHlwZXMgZmFpbGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXJnZU0zdThDb250ZW50cyhbdGV4dCwgLi4uZHVtcF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVNM3U4KG1hbmlmZXN0KSB7XHJcbiAgICAgICAgbGV0IG0zdThDb250ZW50ID0gYCNFWFRNM1VcXG5gO1xyXG4gICAgICAgIGlmIChtYW5pZmVzdC50YXJnZXREdXJhdGlvbikge1xyXG4gICAgICAgICAgICBtM3U4Q29udGVudCArPSBgI0VYVC1YLVRBUkdFVERVUkFUSU9OOiR7bWFuaWZlc3QudGFyZ2V0RHVyYXRpb259XFxuYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1hbmlmZXN0Lm1lZGlhU2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgbTN1OENvbnRlbnQgKz0gYCNFWFQtWC1NRURJQS1TRVFVRU5DRToke21hbmlmZXN0Lm1lZGlhU2VxdWVuY2V9XFxuYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1hbmlmZXN0LnNlZ21lbnRzKSB7XHJcbiAgICAgICAgICAgIG1hbmlmZXN0LnNlZ21lbnRzLmZvckVhY2goKHNlZ21lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWdtZW50LmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbTN1OENvbnRlbnQgKz0gYCNFWFRJTkY6JHtzZWdtZW50LmR1cmF0aW9ufWA7XHJcbiAgICAgICAgICAgICAgICAgICAgbTN1OENvbnRlbnQgKz0gYFxcbmA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtM3U4Q29udGVudCArPSBgJHtzZWdtZW50LnVyaX1cXG5gO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG0zdThDb250ZW50O1xyXG4gICAgfVxyXG4gICAgbWVyZ2VNM3U4Q29udGVudHMoY29udGV1ZG9zTTN1OCkge1xyXG4gICAgICAgIGNvbnN0IG1hbmlmZXN0b3MgPSBjb250ZXVkb3NNM3U4Lm1hcCgoY29udGV1ZG8pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYW5hbGlzYWRvciA9IG5ldyBtM3U4X3BhcnNlcl8xLlBhcnNlcigpO1xyXG4gICAgICAgICAgICBhbmFsaXNhZG9yLnB1c2goY29udGV1ZG8pO1xyXG4gICAgICAgICAgICBhbmFsaXNhZG9yLmVuZCgpO1xyXG4gICAgICAgICAgICAvLyBleHRyYWN0IHRpdGxlcyBmcm9tICNFWFRJTkYgdGFncyBpbiBlYWNoIHNlZ21lbnRcclxuICAgICAgICAgICAgY29uc3QgbWFuaWZlc3QgPSBhbmFsaXNhZG9yLm1hbmlmZXN0O1xyXG4gICAgICAgICAgICBpZiAobWFuaWZlc3Quc2VnbWVudHMpIHtcclxuICAgICAgICAgICAgICAgIG1hbmlmZXN0LnNlZ21lbnRzLmZvckVhY2goKHNlZ21lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSAjRVhUSU5GIHRhZyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgc2VnbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dGluZlRhZ1JlZ2V4ID0gbmV3IFJlZ0V4cChgI0VYVElORjooWzAtOS5dKik/LD8oLiopKD86XFxufFxcclxcbikke3NlZ21lbnQudXJpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gY29udGV1ZG8ubWF0Y2goZXh0aW5mVGFnUmVnZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50LnRpdGxlID0gbWF0Y2hbMl0gPyBtYXRjaFsyXS50cmltKCkgOiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtYW5pZmVzdDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBtYW5pZmVzdG9QcmluY2lwYWwgPSBtYW5pZmVzdG9zWzBdO1xyXG4gICAgICAgIGNvbnN0IG1hbmlmZXN0b3NTdXBvcnRlID0gbWFuaWZlc3Rvcy5zbGljZSgxKTtcclxuICAgICAgICBpZiAobWFuaWZlc3RvUHJpbmNpcGFsLnNlZ21lbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VnbWVudG9zIGVuY29udHJhZG9zIG5vIG1hbmlmZXN0byBwcmluY2lwYWw6XCIsIG1hbmlmZXN0b1ByaW5jaXBhbC5zZWdtZW50cy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1hbmlmZXN0b3MgZGUgc3Vwb3J0ZSBlbmNvbnRyYWRvczpcIiwgbWFuaWZlc3Rvc1N1cG9ydGUubGVuZ3RoKTtcclxuICAgICAgICAgICAgbGV0IHNlZ21lbnRSZW1vdmVkID0gMDtcclxuICAgICAgICAgICAgLy8gUGVyY29ycmVyIG9zIHNlZ21lbnRvcyBkbyBtYW5pZmVzdG8gcHJpbmNpcGFsIGUgcHJlZW5jaGVyIGFzIGxhY3VuYXMgY29tIG9zIHNlZ21lbnRvcyBkbyBtYW5pZmVzdG8gZGUgc3Vwb3J0ZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hbmlmZXN0b1ByaW5jaXBhbC5zZWdtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudG9QcmluY2lwYWwgPSBtYW5pZmVzdG9QcmluY2lwYWwuc2VnbWVudHNbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNBZHMoc2VnbWVudG9QcmluY2lwYWwudGl0bGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFuaWZlc3Rvc1N1cG9ydGUuZm9yRWFjaCgobWFuaWZlc3RvU3Vwb3J0ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29udHJlIG8gcHJpbWVpcm8gc2VnbWVudG8gZGUgc3Vwb3J0ZSBxdWUgTsODTyBjb250ZW5oYSBvIHTDrXR1bG8gXCJBbWF6b25cIiBlIHRlbmhhIHVtIHRlbXBvIHNlbWVsaGFudGUgYW8gc2VnbWVudG9QcmluY2lwYWwgKGlnbm9yYW5kbyBtaWxpc3NlZ3VuZG9zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50b1N1cG9ydGUgPSAoX2EgPSBtYW5pZmVzdG9TdXBvcnRlID09PSBudWxsIHx8IG1hbmlmZXN0b1N1cG9ydGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1hbmlmZXN0b1N1cG9ydGUuc2VnbWVudHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5kKChzZWcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc0FkcyhzZWcudGl0bGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFQcmluY2lwYWwgPSBuZXcgRGF0ZShzZWdtZW50b1ByaW5jaXBhbC5kYXRlVGltZVN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhU3Vwb3J0ZSA9IG5ldyBEYXRlKHNlZy5kYXRlVGltZVN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhUHJpbmNpcGFsLnNldE1pbGxpc2Vjb25kcygwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdXBvcnRlLnNldE1pbGxpc2Vjb25kcygwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhUHJpbmNpcGFsLmdldFRpbWUoKSA9PT0gZGF0YVN1cG9ydGUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnRvU3Vwb3J0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3Vic3RpdHVhIG8gc2VnbWVudG8gcHJpbmNpcGFsIHBlbG8gc2VnbWVudG8gZGUgc3Vwb3J0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuaWZlc3RvUHJpbmNpcGFsLnNlZ21lbnRzW2ldID0gc2VnbWVudG9TdXBvcnRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlIG8gc2VnbWVudG8gcHJpbmNpcGFsIGFpbmRhIGNvbnRpdmVyIG8gdMOtdHVsbyBcIkFtYXpvblwiLCByZW1vdmEtb1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hbmlmZXN0b1ByaW5jaXBhbC5zZWdtZW50cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudFJlbW92ZWQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZWdtZW50byBjb20gYWRzIHJlbW92aWRvczpcIiwgc2VnbWVudFJlbW92ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmlhciB1bWEgbm92YSBsaXN0YSBkZSByZXByb2R1w6fDo28gTTNVOCBjb20gb3Mgc2VnbWVudG9zIG1lc2NsYWRvc1xyXG4gICAgICAgIGNvbnN0IGNvbnRldWRvTTN1OE1lc2NsYWRvID0gdGhpcy5nZW5lcmF0ZU0zdTgobWFuaWZlc3RvUHJpbmNpcGFsKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNvbnRlw7pkbyBNM1U4IG1lc2NsYWRvOlwiLCBjb250ZXVkb00zdThNZXNjbGFkbyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRldWRvTTN1OE1lc2NsYWRvO1xyXG4gICAgfVxyXG4gICAgZmV0Y2htM3U4QnlTdHJlYW1UeXBlKGFjY2Vzc1R5cGUpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICBsb2dQcmludChcIlN0cmVhbSBUeXBlOiBcIiArIGFjY2Vzc1R5cGUpO1xyXG4gICAgICAgICAgICBsZXQgZHVtcCA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgc2VydmVycyA9IHRoaXMuY3VycmVudFN0cmVhbSgpLmdldFN0cmVhbUJ5U3RyZWFtVHlwZShhY2Nlc3NUeXBlKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzZXJ2ZXIgb2Ygc2VydmVycykge1xyXG4gICAgICAgICAgICAgICAgLy9maWx0ZXIgc2VydmVyIHVybCBieSBxdWFsaXR5IG9yIGJlc3RxdWFsaXR5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW1VcmwgPSBzZXJ2ZXIuZmluZEJ5UXVhbGl0eSh0aGlzLnF1YWxpdHkpIHx8IHNlcnZlci5iZXN0UXVhbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgLy90cnkgZ2V0IG0zdTggY29udGVudCBhbmQgcmV0dXJuIGlmIGRvbid0IGhhdmUgYWRzLlxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHlpZWxkICh5aWVsZCBnbG9iYWwucmVxdWVzdChzdHJlYW1VcmwgPT09IG51bGwgfHwgc3RyZWFtVXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdHJlYW1VcmwudXJsKSkudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgZHVtcC5wdXNoKHRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBZHModGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dQcmludChcIlN0cmVhbSBUeXBlOiBcIiArIGFjY2Vzc1R5cGUgKyBcIiAtIEFkcyBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJlYW0oKS5yZW1vdmVTZXJ2ZXIoc2VydmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHRleHQsIGR1bXA6IGR1bXAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBkdW1wOiBkdW1wIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRDaGFubmVsKGNoYW5uZWxOYW1lKSB7XHJcbiAgICAgICAgbG9nUHJpbnQoXCJMb2FkaW5nIGNoYW5uZWxcIiwgY2hhbm5lbE5hbWUpO1xyXG4gICAgICAgIHRoaXMuYWN0dWFsQ2hhbm5lbCA9IGNoYW5uZWxOYW1lO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTdHJlYW0gPSBuZXcgc3RyZWFtXzEuU3RyZWFtKHRoaXMuYWN0dWFsQ2hhbm5lbCk7XHJcbiAgICAgICAgdGhpcy5zdHJlYW1MaXN0LnB1c2goY3VycmVudFN0cmVhbSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5QbGF5ZXIgPSBQbGF5ZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWNHeGhlV1Z5TG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMaTR2TGk0dkxpNHZjM0pqTDIxdlpIVnNaWE12Y0d4aGVXVnlMM0JzWVhsbGNpNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lPenM3T3pzN096czdPenM3UVVGQlFTdzJRMEZCTUVNN1FVRkZNVU1zYVVWQlFUWkVPMEZCUlRkRUxEWkRRVUZ4UXp0QlFVVnlReXhOUVVGaExFMUJRVTA3U1VGQmJrSTdVVUZEUlN4dFFrRkJZeXhIUVVGSExFVkJRVVVzUTBGQlF5eERRVUZETEhGQ1FVRnhRanRSUVVVeFF5eGxRVUZWTEVkQlFXRXNSVUZCUlN4RFFVRkRMRU5CUVVNc2NVUkJRWEZFTzFGQlEyaEdMR3RDUVVGaExFZEJRVmNzUlVGQlJTeERRVUZETEVOQlFVTXNZVUZCWVR0UlFVTjZReXhsUVVGVkxFZEJRVWNzUzBGQlN5eERRVUZETEVOQlFVTXNPRUpCUVRoQ08xRkJSV3hFTEZsQlFVOHNSMEZCVnl4RlFVRkZMRU5CUVVNc1EwRkJReXd5UWtGQk1rSTdVVUZGYWtRc1pVRkJWU3hIUVVGSExFZEJRVWNzUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4WFFVRlhMRU5CUVVNc1JVRkJSU3hKUVVGSkxFVkJRVVVzV1VGQldTeEZRVUZGTEVOQlFVTXNRMEZCUXp0UlFVTTVSQ3huUWtGQlZ5eEhRVUZITEVkQlFVY3NSVUZCUlN4RFFVRkRMRTFCUVUwc1EwRkJReXhYUVVGWExFTkJRVU1zUlVGQlJTeEpRVUZKTEVWQlFVVXNZVUZCWVN4RlFVRkZMRU5CUVVNc1EwRkJRenRSUVVOb1JTeFZRVUZMTEVkQlFVY3NSMEZCUnl4RlFVRkZMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRVmNzUTBGQlF5eEZRVUZGTEVsQlFVa3NSVUZCUlN4UFFVRlBMRVZCUVVVc1EwRkJReXhEUVVGRE8xRkJRM0JFTEZOQlFVa3NSMEZCUnl4SFFVRkhMRVZCUVVVc1EwRkJReXhOUVVGTkxFTkJRVU1zVjBGQlZ5eERRVUZETEVWQlFVVXNTVUZCU1N4RlFVRkZMRTFCUVUwc1JVRkJSU3hEUVVGRExFTkJRVU03VVVGRmJFUXNaMEpCUVZjc1IwRkJSeXhEUVVGRExFOUJRV2RDTEVWQlFVVXNSVUZCUlR0WlFVTnFReXhKUVVGSkxFTkJRVU1zVDBGQlR5eEhRVUZITEU5QlFVOHNRMEZCUXp0WlFVTjJRaXhSUVVGUkxFTkJRVU1zYVVKQlFXbENMRU5CUVVNc1EwRkJRenRSUVVNNVFpeERRVUZETEVOQlFVTTdVVUZGUml4elFrRkJhVUlzUjBGQlJ5eERRVUZETEdOQlFYTkNMRVZCUVVVc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eGpRVUZqTEVkQlFVY3NZMEZCWXl4RFFVRkRPMUZCUlhKR0xHbENRVUZaTEVkQlFVY3NSMEZCVXl4RlFVRkZPMWxCUTNoQ0xFbEJRVWtzUTBGQlF5eExRVUZMTEVWQlFVVXNRMEZCUXp0WlFVTmlMRTFCUVUwc1NVRkJTU3hQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEVWQlFVVXNRMEZCUXl4VlFVRlZMRU5CUVVNc1QwRkJUeXhGUVVGRkxFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEZGtRc1NVRkJTU3hEUVVGRExFbEJRVWtzUlVGQlJTeERRVUZETzFGQlEyUXNRMEZCUXl4RFFVRkJMRU5CUVVNN1VVRkZSaXhsUVVGVkxFZEJRVWNzUjBGQlJ5eEZRVUZGTzFsQlEyaENMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTTdXVUZETTBJc1NVRkJTU3hEUVVGRExGbEJRVmtzUlVGQlJTeERRVUZETzFsQlEzQkNMRWxCUVVrc1EwRkJReXhaUVVGWkxFVkJRVVVzUTBGQlF6dFJRVU4wUWl4RFFVRkRMRU5CUVVNN1VVRkRSaXhoUVVGUkxFZEJRVWNzUjBGQlJ5eEZRVUZGTzFsQlEyUXNUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF6dFpRVU42UWl4SlFVRkpMRU5CUVVNc1dVRkJXU3hGUVVGRkxFTkJRVU03V1VGRGNFSXNTVUZCU1N4RFFVRkRMRmxCUVZrc1JVRkJSU3hEUVVGRE8xRkJRM1JDTEVOQlFVTXNRMEZCUXp0UlFVVkdMRlZCUVVzc1IwRkJSeXhEUVVGRExFTkJRVk1zUlVGQlJTeGpRVUYxUWl4TFFVRkxMRVZCUVVVc1JVRkJSVHRaUVVOc1JDeE5RVUZOTEVkQlFVY3NSMEZCUnl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6TkNMRWxCUVVrc1EwRkJReXhYUVVGWE8yZENRVUZGTEU5QlFVOHNSMEZCUnl4RFFVRkRPMWxCUXpkQ0xFbEJRVWtzU1VGQlNTeERRVUZETEZWQlFWVXNTVUZCU1N4TFFVRkxMRWxCUVVrc1NVRkJTU3hEUVVGRExGVkJRVlVzU1VGQlNTeEhRVUZITzJkQ1FVRkZMRWxCUVVrc1EwRkJReXhWUVVGVkxFVkJRVVVzUTBGQlF6dFpRVU14UlN4SlFVRkpMRWxCUVVrc1EwRkJReXhWUVVGVkxFbEJRVWtzU1VGQlNTeEpRVUZKTEVsQlFVa3NRMEZCUXl4VlFVRlZMRWxCUVVrc1IwRkJSenRuUWtGQlJTeEpRVUZKTEVOQlFVTXNVVUZCVVN4RlFVRkZMRU5CUVVNN1dVRkRka1VzU1VGQlNTeERRVUZETEZWQlFWVXNSMEZCUnl4SFFVRkhMRU5CUVVNN1dVRkZkRUlzVDBGQlR5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRPMUZCUTNwQ0xFTkJRVU1zUTBGQlF6dFJRVVZHTEZkQlFVMHNSMEZCUnl4RFFVRkRMRU5CUVZNc1JVRkJSU3hGUVVGRkxFTkJRVU1zUTBGQlFTeERRVUZETEdGQlFVUXNRMEZCUXl4MVFrRkJSQ3hEUVVGRExFTkJRVVVzVVVGQlVTeEhRVUZITEZGQlFWRXNRMEZCUXl4VlFVRlZMRU5CUVVNc1RVRkJTU3hEUVVGRExHRkJRVVFzUTBGQlF5eDFRa0ZCUkN4RFFVRkRMRU5CUVVVc1VVRkJVU3hIUVVGSExGRkJRVkVzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUVN4TFFVRkpMRU5CUVVNc1lVRkJSQ3hEUVVGRExIVkNRVUZFTEVOQlFVTXNRMEZCUlN4UlFVRlJMRWRCUVVjc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZCTEVOQlFVTTdVVUZGYUVrc2EwSkJRV0VzUjBGQlJ5eERRVUZETEZWQlFXdENMRWxCUVVrc1EwRkJReXhoUVVGaExFVkJRVlVzUlVGQlJUczdXVUZETDBRc1QwRkJUeXhOUVVGQkxFbEJRVWtzUTBGQlF5eFZRVUZWTERCRFFVRkZMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVk1zUlVGQlJTeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRmRCUVZjc1MwRkJTeXhQUVVGUExFTkJRVVVzUTBGQlF6dFJRVU14UlN4RFFVRkRMRU5CUVVNN1NVRnRTMG9zUTBGQlF6dEpRV3BMUXl4WFFVRlhPenRSUVVOVUxFOUJRVThzUTBGQlFTeE5RVUZCTEUxQlFVRXNTVUZCU1N4RFFVRkRMRTlCUVU4c01FTkJRVVVzVTBGQlV5d3dRMEZCUlN4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF5eExRVUZKTEV0QlFVc3NRMEZCUXp0SlFVTjRSU3hEUVVGRE8wbEJSVXNzVDBGQlR5eERRVUZETEVsQlFWazdPMWxCUTNoQ0xFbEJRVWtzU1VGQlNTeERRVUZETEZkQlFWY3NSVUZCUlR0blFrRkJSU3hQUVVGUExFbEJRVWtzUTBGQlF6dFpRVU53UXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eEpRVUZKTEVWQlFVVXNTVUZCU1N4RFFVRkRPMmRDUVVGRkxFOUJRVThzU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVVnVSU3hKUVVGSkxFbEJRVWtzUjBGQllTeEZRVUZGTEVOQlFVTTdXVUZGZUVJc1NVRkJTU3hEUVVGRExHRkJRV0VzUlVGQlJTeERRVUZETEd0Q1FVRnJRaXhEUVVGRExIZENRVUZWTEVOQlFVTXNVMEZCVXl4RlFVRkZMRWxCUVVrc1EwRkJReXhqUVVGakxFTkJRVU1zUTBGQlF6dFpRVU51Uml4SlFVRkpMRU5CUVVNc1lVRkJZU3hGUVVGRkxFTkJRVU1zYTBKQlFXdENMRU5CUVVNc2QwSkJRVlVzUTBGQlF5eFBRVUZQTEVWQlFVVXNTVUZCU1N4RFFVRkRMR05CUVdNc1EwRkJReXhEUVVGRE8xbEJSV3BHTEUxQlFVMHNVMEZCVXl4SFFVRkhMRTFCUVUwc1NVRkJTU3hEUVVGRExIRkNRVUZ4UWl4RFFVRkRMSGRDUVVGVkxFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdXVUZEZWtVc1owWkJRV2RHTzFsQlEyaEdMRWxCUVVrc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVWdVF5eE5RVUZOTEU5QlFVOHNSMEZCUnl4TlFVRk5MRWxCUVVrc1EwRkJReXh4UWtGQmNVSXNRMEZCUXl4M1FrRkJWU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETzFsQlEzSkZMRGhGUVVFNFJUdFpRVU01UlN4SlFVRkpMRWRCUVVjc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkZha01zVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl4NVFrRkJlVUlzUTBGQlF5eERRVUZETzFsQlJYWkRMRTlCUVU4c1NVRkJTU3hEUVVGRExHbENRVUZwUWl4RFFVRkRMRU5CUVVNc1NVRkJTU3hGUVVGRkxFZEJRVWNzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTnFSQ3hEUVVGRE8wdEJRVUU3U1VGRlJDeFpRVUZaTEVOQlFVTXNVVUZCWVR0UlFVTjRRaXhKUVVGSkxGZEJRVmNzUjBGQlJ5eFhRVUZYTEVOQlFVTTdVVUZGT1VJc1NVRkJTU3hSUVVGUkxFTkJRVU1zWTBGQll5eEZRVUZGTzFsQlF6TkNMRmRCUVZjc1NVRkJTU3g1UWtGQmVVSXNVVUZCVVN4RFFVRkRMR05CUVdNc1NVRkJTU3hEUVVGRE8xTkJRM0pGTzFGQlJVUXNTVUZCU1N4UlFVRlJMRU5CUVVNc1lVRkJZU3hGUVVGRk8xbEJRekZDTEZkQlFWY3NTVUZCU1N4NVFrRkJlVUlzVVVGQlVTeERRVUZETEdGQlFXRXNTVUZCU1N4RFFVRkRPMU5CUTNCRk8xRkJSVVFzU1VGQlNTeFJRVUZSTEVOQlFVTXNVVUZCVVN4RlFVRkZPMWxCUTNKQ0xGRkJRVkVzUTBGQlF5eFJRVUZSTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1QwRkJXU3hGUVVGRkxFVkJRVVU3WjBKQlEzcERMRWxCUVVrc1QwRkJUeXhEUVVGRExGRkJRVkVzUlVGQlJUdHZRa0ZEY0VJc1YwRkJWeXhKUVVGSkxGZEJRVmNzVDBGQlR5eERRVUZETEZGQlFWRXNSVUZCUlN4RFFVRkRPMjlDUVVNM1F5eFhRVUZYTEVsQlFVa3NTVUZCU1N4RFFVRkRPMmxDUVVOeVFqdG5Ra0ZEUkN4WFFVRlhMRWxCUVVrc1IwRkJSeXhQUVVGUExFTkJRVU1zUjBGQlJ5eEpRVUZKTEVOQlFVTTdXVUZEY0VNc1EwRkJReXhEUVVGRExFTkJRVU03VTBGRFNqdFJRVVZFTEU5QlFVOHNWMEZCVnl4RFFVRkRPMGxCUTNKQ0xFTkJRVU03U1VGRlJDeHBRa0ZCYVVJc1EwRkJReXhoUVVGMVFqdFJRVU4yUXl4TlFVRk5MRlZCUVZVc1IwRkJSeXhoUVVGaExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNVVUZCVVN4RlFVRkZMRVZCUVVVN1dVRkRhRVFzVFVGQlRTeFZRVUZWTEVkQlFVY3NTVUZCU1N4dlFrRkJUU3hGUVVGRkxFTkJRVU03V1VGRmFFTXNWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dFpRVU14UWl4VlFVRlZMRU5CUVVNc1IwRkJSeXhGUVVGRkxFTkJRVU03V1VGRmFrSXNiVVJCUVcxRU8xbEJRMjVFTEUxQlFVMHNVVUZCVVN4SFFVRkhMRlZCUVZVc1EwRkJReXhSUVVGUkxFTkJRVU03V1VGRGNrTXNTVUZCU1N4UlFVRlJMRU5CUVVNc1VVRkJVU3hGUVVGRk8yZENRVU55UWl4UlFVRlJMRU5CUVVNc1VVRkJVU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEU5QlFWa3NSVUZCUlN4RlFVRkZPMjlDUVVONlF5d3lSRUZCTWtRN2IwSkJRek5FTEUxQlFVMHNZMEZCWXl4SFFVRkhMRWxCUVVrc1RVRkJUU3hEUVVGRExITkRRVUZ6UXl4UFFVRlBMRU5CUVVNc1IwRkJSeXhGUVVGRkxFTkJRVU1zUTBGQlF6dHZRa0ZEZGtZc1RVRkJUU3hMUVVGTExFZEJRVWNzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4alFVRmpMRU5CUVVNc1EwRkJRenR2UWtGRk4wTXNTVUZCU1N4TFFVRkxMRVZCUVVVN2QwSkJRMVFzVDBGQlR5eERRVUZETEV0QlFVc3NSMEZCUnl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRPM0ZDUVVOcVJEdG5Ra0ZEU0N4RFFVRkRMRU5CUVVNc1EwRkJRenRoUVVOS08xbEJSVVFzVDBGQlR5eFJRVUZSTEVOQlFVTTdVVUZEYkVJc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRlNDeE5RVUZOTEd0Q1FVRnJRaXhIUVVGSExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTjZReXhOUVVGTkxHbENRVUZwUWl4SFFVRkhMRlZCUVZVc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdVVUZGT1VNc1NVRkJTU3hyUWtGQmEwSXNRMEZCUXl4UlFVRlJMRVZCUVVVN1dVRkRMMElzVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl3clEwRkJLME1zUlVGQlJTeHJRa0ZCYTBJc1EwRkJReXhSUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTTdXVUZEYWtjc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eHZRMEZCYjBNc1JVRkJSU3hwUWtGQmFVSXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRaUVVVMVJTeEpRVUZKTEdOQlFXTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1dVRkZka0lzWjBoQlFXZElPMWxCUTJoSUxFdEJRVXNzU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4RlFVRkZMRU5CUVVNc1IwRkJSeXhyUWtGQmEwSXNRMEZCUXl4UlFVRlJMRU5CUVVNc1RVRkJUU3hGUVVGRkxFTkJRVU1zUlVGQlJTeEZRVUZGTzJkQ1FVTXpSQ3hOUVVGTkxHbENRVUZwUWl4SFFVRkhMR3RDUVVGclFpeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRmVrUXNTVUZCU1N4VFFVRlRMRWRCUVVjc1MwRkJTeXhEUVVGRE8yZENRVVYwUWl4SlFVRkpMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zYVVKQlFXbENMRU5CUVVNc1MwRkJTeXhEUVVGRExFVkJRVVU3YjBKQlEzaERMR2xDUVVGcFFpeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMR2RDUVVGblFpeEZRVUZGTEVWQlFVVTdPM2RDUVVNM1F5eDNTa0ZCZDBvN2QwSkJRM2hLTEUxQlFVMHNaVUZCWlN4SFFVRkhMRTFCUVVFc1owSkJRV2RDTEdGQlFXaENMR2RDUVVGblFpeDFRa0ZCYUVJc1owSkJRV2RDTEVOQlFVVXNVVUZCVVN3d1EwRkJSU3hKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZSTEVWQlFVVXNSVUZCUlRzMFFrRkRjRVVzU1VGQlNTeEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJReXhMUVVGTExFTkJRVU03WjBOQlFVVXNUMEZCVHl4TFFVRkxMRU5CUVVNN05FSkJSWHBETEUxQlFVMHNZVUZCWVN4SFFVRkhMRWxCUVVrc1NVRkJTU3hEUVVGRExHbENRVUZwUWl4RFFVRkRMR05CUVdNc1EwRkJReXhEUVVGRE96UkNRVU5xUlN4TlFVRk5MRmRCUVZjc1IwRkJSeXhKUVVGSkxFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTXNZMEZCWXl4RFFVRkRMRU5CUVVNN05FSkJRMnBFTEdGQlFXRXNRMEZCUXl4bFFVRmxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03TkVKQlEycERMRmRCUVZjc1EwRkJReXhsUVVGbExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdORUpCUlM5Q0xFOUJRVThzWVVGQllTeERRVUZETEU5QlFVOHNSVUZCUlN4TFFVRkxMRmRCUVZjc1EwRkJReXhQUVVGUExFVkJRVVVzUTBGQlF6dDNRa0ZETTBRc1EwRkJReXhEUVVGRExFTkJRVU03ZDBKQlJVZ3NTVUZCU1N4bFFVRmxMRVZCUVVVN05FSkJRMjVDTERCRVFVRXdSRHMwUWtGRE1VUXNhMEpCUVd0Q0xFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMR1ZCUVdVc1EwRkJRenMwUWtGRGFrUXNVMEZCVXl4SFFVRkhMRWxCUVVrc1EwRkJRenQ1UWtGRGJFSTdiMEpCUTBnc1EwRkJReXhEUVVGRExFTkJRVU03YjBKQlJVZ3NjVVZCUVhGRk8yOUNRVU55UlN4SlFVRkpMRU5CUVVNc1UwRkJVeXhGUVVGRk8zZENRVU5rTEd0Q1FVRnJRaXhEUVVGRExGRkJRVkVzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRE8zZENRVU42UXl4RFFVRkRMRVZCUVVVc1EwRkJRenQzUWtGRFNpeGpRVUZqTEVWQlFVVXNRMEZCUXp0eFFrRkRiRUk3YVVKQlJVWTdZVUZEUmp0WlFVVkVMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zTmtKQlFUWkNMRVZCUVVVc1kwRkJZeXhEUVVGRExFTkJRVU03VTBGRE5VUTdVVUZGUkN4eFJVRkJjVVU3VVVGRGNrVXNUVUZCVFN4dlFrRkJiMElzUjBGQlJ5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMR3RDUVVGclFpeERRVUZETEVOQlFVTTdVVUZEYmtVc1owVkJRV2RGTzFGQlEyaEZMRTlCUVU4c2IwSkJRVzlDTEVOQlFVTTdTVUZET1VJc1EwRkJRenRKUVVWTExIRkNRVUZ4UWl4RFFVRkRMRlZCUVhOQ096dFpRVU5vUkN4UlFVRlJMRU5CUVVNc1pVRkJaU3hIUVVGSExGVkJRVlVzUTBGQlF5eERRVUZETzFsQlJYWkRMRWxCUVVrc1NVRkJTU3hIUVVGaExFVkJRVVVzUTBGQlF6dFpRVU40UWl4SlFVRkpMRTlCUVU4c1IwRkJZU3hKUVVGSkxFTkJRVU1zWVVGQllTeEZRVUZGTEVOQlFVTXNjVUpCUVhGQ0xFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTTdXVUZGTDBVc1MwRkJTeXhOUVVGTkxFMUJRVTBzU1VGQlNTeFBRVUZQTEVWQlFVVTdaMEpCUXpWQ0xEWkRRVUUyUXp0blFrRkROME1zVFVGQlRTeFRRVUZUTEVkQlFVY3NUVUZCVFN4RFFVRkRMR0ZCUVdFc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NUVUZCVFN4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8yZENRVVUzUlN4dlJFRkJiMFE3WjBKQlEzQkVMRTFCUVUwc1NVRkJTU3hIUVVGWExFMUJRVTBzUTBGQlF5eE5RVUZOTEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1UwRkJVeXhoUVVGVUxGTkJRVk1zZFVKQlFWUXNVMEZCVXl4RFFVRkZMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeEZRVUZGTEVOQlFVTTdaMEpCUTNwRkxFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1owSkJRMmhDTEVsQlFVa3NTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJUdHZRa0ZEY0VJc1VVRkJVU3hEUVVGRExHVkJRV1VzUjBGQlJ5eFZRVUZWTEVkQlFVY3NZMEZCWXl4RFFVRkRMRU5CUVVNN2IwSkJRM2hFTEVsQlFVa3NRMEZCUXl4aFFVRmhMRVZCUVVVc1EwRkJReXhaUVVGWkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTTdiMEpCUXpGRExGTkJRVk03YVVKQlExWTdaMEpCUlVRc1QwRkJUeXhGUVVGRkxFbEJRVWtzUlVGQlJTeEpRVUZKTEVWQlFVVXNTVUZCU1N4RlFVRkZMRWxCUVVrc1JVRkJSU3hEUVVGRE8yRkJRMjVETzFsQlJVUXNUMEZCVHl4RlFVRkZMRWxCUVVrc1JVRkJSU3hKUVVGSkxFVkJRVVVzU1VGQlNTeEZRVUZGTEVsQlFVa3NSVUZCUlN4RFFVRkRPMUZCUTNCRExFTkJRVU03UzBGQlFUdEpRVVZFTEZWQlFWVXNRMEZCUXl4WFFVRnRRanRSUVVNMVFpeFJRVUZSTEVOQlFVTXNhVUpCUVdsQ0xFVkJRVVVzVjBGQlZ5eERRVUZETEVOQlFVTTdVVUZEZWtNc1NVRkJTU3hEUVVGRExHRkJRV0VzUjBGQlJ5eFhRVUZYTEVOQlFVTTdVVUZGYWtNc1RVRkJUU3hoUVVGaExFZEJRVWNzU1VGQlNTeGxRVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRE8xRkJRM0pFTEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETzBsQlEzUkRMRU5CUVVNN1EwRkRSanRCUVhaT1JDeDNRa0YxVGtNaWZRPT0iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlN0cmVhbVR5cGUgPSB2b2lkIDA7XHJcbnZhciBTdHJlYW1UeXBlO1xyXG4oZnVuY3Rpb24gKFN0cmVhbVR5cGUpIHtcclxuICAgIFN0cmVhbVR5cGVbXCJQSUNUVVJFXCJdID0gXCJwaWN0dXJlLWluLXBpY3R1cmVcIjtcclxuICAgIFN0cmVhbVR5cGVbXCJUSFVOREVSRE9NRVwiXSA9IFwidGh1bmRlcmRvbWVcIjtcclxuICAgIFN0cmVhbVR5cGVbXCJFTUJFRFwiXSA9IFwiZW1iZWRcIjtcclxuICAgIFN0cmVhbVR5cGVbXCJGUk9OVFBBR0VcIl0gPSBcImZyb250cGFnZVwiO1xyXG4gICAgU3RyZWFtVHlwZVtcIlNJVEVcIl0gPSBcInNpdGVcIjtcclxuICAgIFN0cmVhbVR5cGVbXCJFWFRFUk5BTFwiXSA9IFwiZXh0ZXJuYWxcIjtcclxuICAgIFN0cmVhbVR5cGVbXCJETlNcIl0gPSBcImRuc1wiO1xyXG59KShTdHJlYW1UeXBlID0gZXhwb3J0cy5TdHJlYW1UeXBlIHx8IChleHBvcnRzLlN0cmVhbVR5cGUgPSB7fSkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljM1J5WldGdExtVnVkVzB1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTh1TGk4dUxpOHVMaTl6Y21NdmJXOWtkV3hsY3k5emRISmxZVzB2YVc1MFpYSm1ZV05sTDNOMGNtVmhiUzVsYm5WdExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSTdPenRCUVVGQkxFbEJRVmtzVlVGUldEdEJRVkpFTEZkQlFWa3NWVUZCVlR0SlFVTndRaXcwUTBGQk9FSXNRMEZCUVR0SlFVTTVRaXg1UTBGQk1rSXNRMEZCUVR0SlFVTXpRaXcyUWtGQlpTeERRVUZCTzBsQlEyWXNjVU5CUVhWQ0xFTkJRVUU3U1VGRGRrSXNNa0pCUVdFc1EwRkJRVHRKUVVOaUxHMURRVUZ4UWl4RFFVRkJPMGxCUTNKQ0xIbENRVUZYTEVOQlFVRTdRVUZEWWl4RFFVRkRMRVZCVWxjc1ZVRkJWU3hIUVVGV0xHdENRVUZWTEV0QlFWWXNhMEpCUVZVc1VVRlJja0lpZlE9PSIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuU2VydmVyID0gZXhwb3J0cy5TdHJlYW1VcmwgPSB2b2lkIDA7XHJcbmNsYXNzIFN0cmVhbVVybCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnVybCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5xdWFsaXR5ID0gXCJcIjtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlN0cmVhbVVybCA9IFN0cmVhbVVybDtcclxuY2xhc3MgU2VydmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcnRpYWwpIHtcclxuICAgICAgICB0aGlzLmJlc3RRdWFsaXR5ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cmxMaXN0WzBdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5maW5kQnlRdWFsaXR5ID0gKHF1YWxpdHkpID0+IHRoaXMudXJsTGlzdC5maW5kKCh4KSA9PiB4LnF1YWxpdHkgPT0gcXVhbGl0eSk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBwYXJ0aWFsKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlNlcnZlciA9IFNlcnZlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzNSeVpXRnRMblI1Y0dWekxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTGk0dkxpNHZMaTR2TGk0dmMzSmpMMjF2WkhWc1pYTXZjM1J5WldGdEwybHVkR1Z5Wm1GalpTOXpkSEpsWVcwdWRIbHdaWE11ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWpzN08wRkJRVUVzVFVGQllTeFRRVUZUTzBsQlFYUkNPMUZCUTBVc1VVRkJSeXhIUVVGWExFVkJRVVVzUTBGQlF6dFJRVU5xUWl4WlFVRlBMRWRCUVZjc1JVRkJSU3hEUVVGRE8wbEJRM1pDTEVOQlFVTTdRMEZCUVR0QlFVaEVMRGhDUVVkRE8wRkJRMFFzVFVGQllTeE5RVUZOTzBsQlZXcENMRmxCUVZrc1QwRkJkMEk3VVVGTWNFTXNaMEpCUVZjc1IwRkJSeXhIUVVGSExFVkJRVVU3V1VGRGFrSXNUMEZCVHl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzFGQlEzcENMRU5CUVVNc1EwRkJRenRSUVVOR0xHdENRVUZoTEVkQlFVY3NRMEZCUXl4UFFVRmxMRVZCUVVVc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4SlFVRkpMRTlCUVU4c1EwRkJReXhEUVVGRE8xRkJSMnhHTEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hGUVVGRkxFOUJRVThzUTBGQlF5eERRVUZETzBsQlF5OUNMRU5CUVVNN1EwRkRSanRCUVdKRUxIZENRV0ZESW4wPSIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5TdHJlYW0gPSB2b2lkIDA7XHJcbmNvbnN0IHR3aXRjaF9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi4vdHdpdGNoL3R3aXRjaC5zZXJ2aWNlXCIpO1xyXG5jb25zdCBzdHJlYW1fdHlwZXNfMSA9IHJlcXVpcmUoXCIuL2ludGVyZmFjZS9zdHJlYW0udHlwZXNcIik7XHJcbmNsYXNzIFN0cmVhbSB7XHJcbiAgICBjb25zdHJ1Y3RvcihjaGFubmVsTmFtZSkge1xyXG4gICAgICAgIHRoaXMuc2VydmVyTGlzdCA9IFtdOyAvL3RoZSBsaXN0IG9mIHNlcnZlcnMgbGlua3MgbTN1OFxyXG4gICAgICAgIHRoaXMuY2hhbm5lbE5hbWUgPSBjaGFubmVsTmFtZTtcclxuICAgICAgICB0aGlzLnR3aXRjaFNlcnZpY2UgPSBuZXcgdHdpdGNoX3NlcnZpY2VfMS5Ud2l0Y2hTZXJ2aWNlKFwiXCIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlU2VydmVyKHNlcnZlcikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZXJ2ZXJMaXN0LmluZGV4T2Yoc2VydmVyKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSlcclxuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJMaXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgICAvL2FkZCBtM3U4IGxpbmtzIHdpdGggcXVhbGl0eSB0byB0aGUgbGlzdCBvZiBzZXJ2ZXJzXHJcbiAgICBjcmVhdGVTZXJ2ZXIodGV4dCwgdHlwZSA9IFwibG9jYWxcIiwgc2lnID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHF1YWxpdHlVcmxTcGxpdCA9IFtdO1xyXG4gICAgICAgIGxldCBjYXB0dXJlQXJyYXk7XHJcbiAgICAgICAgY29uc3QgUkVHRVggPSAvTkFNRT1cIigoPzpcXFMrXFxzK1xcUyt8XFxTKykpXCIsQVVUTyg/Ol58XFxTK1xccyspKD86XnxcXFMrXFxzKykoaHR0cHM6XFwvXFwvdmlkZW8oXFxTKykubTN1OCkvZztcclxuICAgICAgICB3aGlsZSAoKGNhcHR1cmVBcnJheSA9IFJFR0VYLmV4ZWModGV4dCkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1YWxpdHlVcmxTcGxpdC5wdXNoKHsgcXVhbGl0eTogY2FwdHVyZUFycmF5WzFdLCB1cmw6IGNhcHR1cmVBcnJheVsyXSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3RyZWFtTGlzdCA9IG5ldyBzdHJlYW1fdHlwZXNfMS5TZXJ2ZXIoeyB0eXBlOiB0eXBlLCB1cmxMaXN0OiBxdWFsaXR5VXJsU3BsaXQsIHNpZzogc2lnIH0pO1xyXG4gICAgICAgIHRoaXMuc2VydmVyTGlzdC5wdXNoKHN0cmVhbUxpc3QpO1xyXG4gICAgfVxyXG4gICAgLy9jcmVhdGUgYSBuZXcgc3RyZWFtIGFjY2Vzc1xyXG4gICAgY3JlYXRlU3RyZWFtQWNjZXNzKHBsYXllclR5cGUsIGludGVncml0eVRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbURhdGFBY2Nlc3MgPSB5aWVsZCB0aGlzLnR3aXRjaFNlcnZpY2UucGxheWJhY2tBY2Nlc3NUb2tlbl9UZW1wbGF0ZSh0aGlzLmNoYW5uZWxOYW1lLCBwbGF5ZXJUeXBlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG0zdThUZXh0ID0geWllbGQgdGhpcy50d2l0Y2hTZXJ2aWNlLmdldE0zVTgodGhpcy5jaGFubmVsTmFtZSwgc3RyZWFtRGF0YUFjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVNlcnZlcihtM3U4VGV4dCwgcGxheWVyVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGxvZ1ByaW50KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRTdHJlYW1CeVN0cmVhbVR5cGUoYWNjZXNzVHlwZSkge1xyXG4gICAgICAgIC8vZmlsdGVyIGFsbCBzZXJ2ZXIgYnkgdHlwZVxyXG4gICAgICAgIGNvbnN0IHNlcnZlcnMgPSB0aGlzLnNlcnZlckxpc3QuZmlsdGVyKCh4KSA9PiB4LnR5cGUgPT0gYWNjZXNzVHlwZSk7XHJcbiAgICAgICAgaWYgKCFzZXJ2ZXJzKVxyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgcmV0dXJuIHNlcnZlcnM7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5TdHJlYW0gPSBTdHJlYW07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMzUnlaV0Z0TG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMaTR2TGk0dkxpNHZjM0pqTDIxdlpIVnNaWE12YzNSeVpXRnRMM04wY21WaGJTNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lPenM3T3pzN096czdPenM3UVVGQlFTdzJSRUZCZVVRN1FVRkZla1FzTWtSQlFUWkVPMEZCUlRkRUxFMUJRV0VzVFVGQlRUdEpRVXRxUWl4WlFVRlpMRmRCUVcxQ08xRkJTaTlDTEdWQlFWVXNSMEZCWVN4RlFVRkZMRU5CUVVNc1EwRkJReXhuUTBGQlowTTdVVUZMZWtRc1NVRkJTU3hEUVVGRExGZEJRVmNzUjBGQlJ5eFhRVUZYTEVOQlFVTTdVVUZETDBJc1NVRkJTU3hEUVVGRExHRkJRV0VzUjBGQlJ5eEpRVUZKTERoQ1FVRmhMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU03U1VGRE4wTXNRMEZCUXp0SlFVVkVMRmxCUVZrc1EwRkJReXhOUVVGak8xRkJRM3BDTEUxQlFVMHNTMEZCU3l4SFFVRkhMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMUZCUXpsRExFbEJRVWtzUzBGQlN5eEhRVUZITEVOQlFVTXNRMEZCUXp0WlFVRkZMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOdVJDeERRVUZETzBsQlJVUXNiMFJCUVc5RU8wbEJRM0JFTEZsQlFWa3NRMEZCUXl4SlFVRlpMRVZCUVVVc1NVRkJTU3hIUVVGSExFOUJRVThzUlVGQlJTeEhRVUZITEVkQlFVY3NTVUZCU1R0UlFVTnVSQ3hOUVVGTkxHVkJRV1VzUjBGQlowSXNSVUZCUlN4RFFVRkRPMUZCUTNoRExFbEJRVWtzV1VGQmIwTXNRMEZCUXp0UlFVVjZReXhOUVVGTkxFdEJRVXNzUjBGQlJ5eHhSa0ZCY1VZc1EwRkJRenRSUVVWd1J5eFBRVUZQTEVOQlFVTXNXVUZCV1N4SFFVRkhMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNTMEZCU3l4SlFVRkpMRVZCUVVVN1dVRkRha1FzWlVGQlpTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRTlCUVU4c1JVRkJSU3haUVVGWkxFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNSMEZCUnl4RlFVRkZMRmxCUVZrc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTTdVMEZETVVVN1VVRkZSQ3hOUVVGTkxGVkJRVlVzUjBGQlZ5eEpRVUZKTEhGQ1FVRk5MRU5CUVVNc1JVRkJSU3hKUVVGSkxFVkJRVVVzU1VGQlNTeEZRVUZGTEU5QlFVOHNSVUZCUlN4bFFVRmxMRVZCUVVVc1IwRkJSeXhGUVVGRkxFZEJRVWNzUlVGQlJTeERRVUZETEVOQlFVTTdVVUZETVVZc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1NVRkRia01zUTBGQlF6dEpRVVZFTERSQ1FVRTBRanRKUVVOMFFpeHJRa0ZCYTBJc1EwRkJReXhWUVVGelFpeEZRVUZGTEdOQlFYTkNPenRaUVVOeVJTeEpRVUZKTzJkQ1FVTkdMRTFCUVUwc1owSkJRV2RDTEVkQlFVY3NUVUZCVFN4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExEUkNRVUUwUWl4RFFVRkRMRWxCUVVrc1EwRkJReXhYUVVGWExFVkJRVVVzVlVGQlZTeERRVUZETEVOQlFVTTdaMEpCUXpkSExFMUJRVTBzVVVGQlVTeEhRVUZITEUxQlFVMHNTVUZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETEZkQlFWY3NSVUZCUlN4blFrRkJaMElzUTBGQlF5eERRVUZETzJkQ1FVTjBSaXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEZGQlFWRXNSVUZCUlN4VlFVRlZMRU5CUVVNc1EwRkJRenRoUVVONlF6dFpRVUZETEU5QlFVOHNRMEZCUXl4RlFVRkZPMmRDUVVOV0xGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0aFFVTmlPMUZCUTBnc1EwRkJRenRMUVVGQk8wbEJSVVFzY1VKQlFYRkNMRU5CUVVNc1ZVRkJjMEk3VVVGRE1VTXNNa0pCUVRKQ08xRkJRek5DTEUxQlFVMHNUMEZCVHl4SFFVRkhMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeEpRVUZKTEZWQlFWVXNRMEZCUXl4RFFVRkRPMUZCUTNCRkxFbEJRVWtzUTBGQlF5eFBRVUZQTzFsQlFVVXNUMEZCVHl4RlFVRkZMRU5CUVVNN1VVRkZlRUlzVDBGQlR5eFBRVUZQTEVOQlFVTTdTVUZEYWtJc1EwRkJRenREUVVOR08wRkJhRVJFTEhkQ1FXZEVReUo5IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlR3aXRjaFNlcnZpY2UgPSB2b2lkIDA7XHJcbmNsYXNzIFR3aXRjaFNlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IoaW50ZWdyaXR5VG9rZW4pIHtcclxuICAgICAgICB0aGlzLmludGVncml0eVRva2VuID0gaW50ZWdyaXR5VG9rZW47XHJcbiAgICB9XHJcbiAgICBwbGF5YmFja0FjY2Vzc1Rva2VuKHBsYXllclR5cGUpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogXCJcIiwgc2lnbmF0dXJlOiBcIlwiIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwbGF5YmFja0FjY2Vzc1Rva2VuX1RlbXBsYXRlKGNoYW5uZWxOYW1lLCBwbGF5ZXJUeXBlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAncXVlcnkgUGxheWJhY2tBY2Nlc3NUb2tlbl9UZW1wbGF0ZSgkbG9naW46IFN0cmluZyEsICRpc0xpdmU6IEJvb2xlYW4hLCAkdm9kSUQ6IElEISwgJGlzVm9kOiBCb29sZWFuISwgJHBsYXllclR5cGU6IFN0cmluZyEpIHsgc3RyZWFtUGxheWJhY2tBY2Nlc3NUb2tlbihjaGFubmVsTmFtZTogJGxvZ2luLCBwYXJhbXM6IHtwbGF0Zm9ybTogXCJ3ZWJcIiwgcGxheWVyQmFja2VuZDogXCJtZWRpYXBsYXllclwiLCBwbGF5ZXJUeXBlOiAkcGxheWVyVHlwZX0pIEBpbmNsdWRlKGlmOiAkaXNMaXZlKSB7IHZhbHVlIHNpZ25hdHVyZSBfX3R5cGVuYW1lIH0gdmlkZW9QbGF5YmFja0FjY2Vzc1Rva2VuKGlkOiAkdm9kSUQsIHBhcmFtczoge3BsYXRmb3JtOiBcIndlYlwiLCBwbGF5ZXJCYWNrZW5kOiBcIm1lZGlhcGxheWVyXCIsIHBsYXllclR5cGU6ICRwbGF5ZXJUeXBlfSkgQGluY2x1ZGUoaWY6ICRpc1ZvZCkgeyB2YWx1ZSBzaWduYXR1cmUgX190eXBlbmFtZSB9fSc7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25OYW1lOiBcIlBsYXliYWNrQWNjZXNzVG9rZW5fVGVtcGxhdGVcIixcclxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcclxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc1ZvZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdm9kSUQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9naW46IGNoYW5uZWxOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllclR5cGU6IHBsYXllclR5cGUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBncWwgPSB5aWVsZCBnbG9iYWwucmVxdWVzdChcImh0dHBzOi8vZ3FsLnR3aXRjaC50di9ncWxcIiwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJIb3N0XCI6IFwiZ3FsLnR3aXRjaC50dlwiLCBcIkNsaWVudC1JRFwiOiBcImtpbW5lNzhreDNuY3g2YnJnbzRtdjZ3a2k1aDFrb1wiIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbURhdGFBY2Nlc3MgPSB5aWVsZCBncWwuanNvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4geyB0b2tlbjogc3RyZWFtRGF0YUFjY2Vzcy5kYXRhLnN0cmVhbVBsYXliYWNrQWNjZXNzVG9rZW4udmFsdWUsIHNpZ25hdHVyZTogc3RyZWFtRGF0YUFjY2Vzcy5kYXRhLnN0cmVhbVBsYXliYWNrQWNjZXNzVG9rZW4uc2lnbmF0dXJlIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRNM1U4KGNoYW5uZWxOYW1lLCBwbGF5YmFja0FjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gXCJhbGxvd19zb3VyY2U9dHJ1ZSZmYXN0X2JyZWFkPXRydWUmcD1cIiArXHJcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxZTcpICtcclxuICAgICAgICAgICAgICAgIFwiJnBsYXllcl9iYWNrZW5kPW1lZGlhcGxheWVyJnBsYXlsaXN0X2luY2x1ZGVfZnJhbWVyYXRlPXRydWUmcmVhc3NpZ25tZW50c19zdXBwb3J0ZWQ9ZmFsc2Umc2lnPVwiICtcclxuICAgICAgICAgICAgICAgIHBsYXliYWNrQWNjZXNzVG9rZW4uc2lnbmF0dXJlICtcclxuICAgICAgICAgICAgICAgIFwiJnN1cHBvcnRlZF9jb2RlY3M9YXZjMSZ0b2tlbj1cIiArXHJcbiAgICAgICAgICAgICAgICBwbGF5YmFja0FjY2Vzc1Rva2VuLnRva2VuO1xyXG4gICAgICAgICAgICByZXR1cm4gKHlpZWxkIGdsb2JhbC5yZXF1ZXN0KFwiaHR0cHM6Ly91c2hlci50dHZudy5uZXQvYXBpL2NoYW5uZWwvaGxzL1wiICsgY2hhbm5lbE5hbWUgKyBcIi5tM3U4P1wiICsgcGFyYW1zKSkudGV4dCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuVHdpdGNoU2VydmljZSA9IFR3aXRjaFNlcnZpY2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWRIZHBkR05vTG5ObGNuWnBZMlV1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTh1TGk4dUxpOXpjbU12Ylc5a2RXeGxjeTkwZDJsMFkyZ3ZkSGRwZEdOb0xuTmxjblpwWTJVdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklqczdPenM3T3pzN096czdPMEZCUVVFc1RVRkJZU3hoUVVGaE8wbEJRM1JDTEZsQlFUWkNMR05CUVhOQ08xRkJRWFJDTEcxQ1FVRmpMRWRCUVdRc1kwRkJZeXhEUVVGUk8wbEJRVWtzUTBGQlF6dEpRVWRzUkN4dFFrRkJiVUlzUTBGQlF5eFZRVUZyUWpzN1dVRkRlRU1zVDBGQlR5eEZRVUZGTEV0QlFVc3NSVUZCUlN4RlFVRkZMRVZCUVVVc1UwRkJVeXhGUVVGRkxFVkJRVVVzUlVGQlJTeERRVUZETzFGQlEzaERMRU5CUVVNN1MwRkJRVHRKUVVWTExEUkNRVUUwUWl4RFFVRkRMRmRCUVcxQ0xFVkJRVVVzVlVGQmEwSTdPMWxCUTNSRkxFMUJRVTBzUzBGQlN5eEhRVU5RTEdsbFFVRnBaU3hEUVVGRE8xbEJRM1JsTEUxQlFVMHNTVUZCU1N4SFFVRkhPMmRDUVVOVUxHRkJRV0VzUlVGQlJTdzRRa0ZCT0VJN1owSkJRemRETEV0QlFVc3NSVUZCUlN4TFFVRkxPMmRDUVVOYUxGTkJRVk1zUlVGQlJUdHZRa0ZEVUN4TlFVRk5MRVZCUVVVc1NVRkJTVHR2UWtGRFdpeExRVUZMTEVWQlFVVXNTMEZCU3p0dlFrRkRXaXhMUVVGTExFVkJRVVVzUlVGQlJUdHZRa0ZEVkN4TFFVRkxMRVZCUVVVc1YwRkJWenR2UWtGRGJFSXNWVUZCVlN4RlFVRkZMRlZCUVZVN2FVSkJRM3BDTzJGQlEwb3NRMEZCUXp0WlFVVkdMRTFCUVUwc1IwRkJSeXhIUVVGSExFMUJRVTBzVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl3eVFrRkJNa0lzUlVGQlJUdG5Ra0ZETVVRc1RVRkJUU3hGUVVGRkxFMUJRVTA3WjBKQlEyUXNUMEZCVHl4RlFVRkZMRVZCUVVVc1RVRkJUU3hGUVVGRkxHVkJRV1VzUlVGQlJTeFhRVUZYTEVWQlFVVXNaME5CUVdkRExFVkJRVVU3WjBKQlEyNUdMRWxCUVVrc1JVRkJSU3hKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXp0aFFVTTNRaXhEUVVGRExFTkJRVU03V1VGRFNDeE5RVUZOTEdkQ1FVRm5RaXhIUVVGSExFMUJRVTBzUjBGQlJ5eERRVUZETEVsQlFVa3NSVUZCUlN4RFFVRkRPMWxCUlRGRExFOUJRVThzUlVGQlJTeExRVUZMTEVWQlFVVXNaMEpCUVdkQ0xFTkJRVU1zU1VGQlNTeERRVUZETEhsQ1FVRjVRaXhEUVVGRExFdEJRVXNzUlVGQlJTeFRRVUZUTEVWQlFVVXNaMEpCUVdkQ0xFTkJRVU1zU1VGQlNTeERRVUZETEhsQ1FVRjVRaXhEUVVGRExGTkJRVk1zUlVGQlJTeERRVUZETzFGQlEyeEtMRU5CUVVNN1MwRkJRVHRKUVVWTExFOUJRVThzUTBGQlF5eFhRVUZ0UWl4RlFVRkZMRzFDUVVGNVJEczdXVUZEZUVZc1RVRkJUU3hOUVVGTkxFZEJRMUlzYzBOQlFYTkRPMmRDUVVOMFF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFVkJRVVVzUjBGQlJ5eEhRVUZITEVOQlFVTTdaMEpCUXk5Q0xHZEhRVUZuUnp0blFrRkRhRWNzYlVKQlFXMUNMRU5CUVVNc1UwRkJVenRuUWtGRE4wSXNLMEpCUVN0Q08yZENRVU12UWl4dFFrRkJiVUlzUTBGQlF5eExRVUZMTEVOQlFVTTdXVUZGT1VJc1QwRkJUeXhEUVVGRExFMUJRVTBzVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl3d1EwRkJNRU1zUjBGQlJ5eFhRVUZYTEVkQlFVY3NVVUZCVVN4SFFVRkhMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeEZRVUZGTEVOQlFVTTdVVUZEZGtnc1EwRkJRenRMUVVGQk8wTkJRMG83UVVFMVEwUXNjME5CTkVOREluMD0iLCJpbXBvcnQgd2luZG93IGZyb20gJ2dsb2JhbC93aW5kb3cnO1xuXG52YXIgYXRvYiA9IGZ1bmN0aW9uIGF0b2Iocykge1xuICByZXR1cm4gd2luZG93LmF0b2IgPyB3aW5kb3cuYXRvYihzKSA6IEJ1ZmZlci5mcm9tKHMsICdiYXNlNjQnKS50b1N0cmluZygnYmluYXJ5Jyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWNvZGVCNjRUb1VpbnQ4QXJyYXkoYjY0VGV4dCkge1xuICB2YXIgZGVjb2RlZFN0cmluZyA9IGF0b2IoYjY0VGV4dCk7XG4gIHZhciBhcnJheSA9IG5ldyBVaW50OEFycmF5KGRlY29kZWRTdHJpbmcubGVuZ3RoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGRlY29kZWRTdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJheVtpXSA9IGRlY29kZWRTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn0iLCIvKipcbiAqIEBmaWxlIHN0cmVhbS5qc1xuICovXG5cbi8qKlxuICogQSBsaWdodHdlaWdodCByZWFkYWJsZSBzdHJlYW0gaW1wbGVtZW50aW9uIHRoYXQgaGFuZGxlcyBldmVudCBkaXNwYXRjaGluZy5cbiAqXG4gKiBAY2xhc3MgU3RyZWFtXG4gKi9cbnZhciBTdHJlYW0gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTdHJlYW0oKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgc3BlY2lmaWVkIGV2ZW50IHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIHRoZSBldmVudCBuYW1lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIHRoZSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gYW4gZXZlbnQgb2ZcbiAgICogdGhlIHNwZWNpZmllZCB0eXBlIG9jY3Vyc1xuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBTdHJlYW0ucHJvdG90eXBlO1xuXG4gIF9wcm90by5vbiA9IGZ1bmN0aW9uIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKCF0aGlzLmxpc3RlbmVyc1t0eXBlXSkge1xuICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0gPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgbGlzdGVuZXIgZm9yIGEgc3BlY2lmaWVkIGV2ZW50IHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIHRoZSBldmVudCBuYW1lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyICBhIGZ1bmN0aW9uIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBmb3IgdGhpc1xuICAgKiB0eXBlIG9mIGV2ZW50IHRocm91Z2ggYG9uYFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBpZiB3ZSBjb3VsZCB0dXJuIGl0IG9mZiBvciBub3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8ub2ZmID0gZnVuY3Rpb24gb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKCF0aGlzLmxpc3RlbmVyc1t0eXBlXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IHRoaXMubGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOyAvLyBUT0RPOiB3aGljaCBpcyBiZXR0ZXI/XG4gICAgLy8gSW4gVmlkZW8uanMgd2Ugc2xpY2UgbGlzdGVuZXIgZnVuY3Rpb25zXG4gICAgLy8gb24gdHJpZ2dlciBzbyB0aGF0IGl0IGRvZXMgbm90IG1lc3MgdXAgdGhlIG9yZGVyXG4gICAgLy8gd2hpbGUgd2UgbG9vcCB0aHJvdWdoLlxuICAgIC8vXG4gICAgLy8gSGVyZSB3ZSBzbGljZSBvbiBvZmYgc28gdGhhdCB0aGUgbG9vcCBpbiB0cmlnZ2VyXG4gICAgLy8gY2FuIGNvbnRpbnVlIHVzaW5nIGl0J3Mgb2xkIHJlZmVyZW5jZSB0byBsb29wIHdpdGhvdXRcbiAgICAvLyBtZXNzaW5nIHVwIHRoZSBvcmRlci5cblxuICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdID0gdGhpcy5saXN0ZW5lcnNbdHlwZV0uc2xpY2UoMCk7XG4gICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gaW5kZXggPiAtMTtcbiAgfVxuICAvKipcbiAgICogVHJpZ2dlciBhbiBldmVudCBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgb24gdGhpcyBzdHJlYW0uIEFueSBhZGRpdGlvbmFsXG4gICAqIGFyZ3VtZW50cyB0byB0aGlzIGZ1bmN0aW9uIGFyZSBwYXNzZWQgYXMgcGFyYW1ldGVycyB0byBldmVudCBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIHRoZSBldmVudCBuYW1lXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRyaWdnZXIgPSBmdW5jdGlvbiB0cmlnZ2VyKHR5cGUpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5saXN0ZW5lcnNbdHlwZV07XG5cbiAgICBpZiAoIWNhbGxiYWNrcykge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gU2xpY2luZyB0aGUgYXJndW1lbnRzIG9uIGV2ZXJ5IGludm9jYXRpb24gb2YgdGhpcyBtZXRob2RcbiAgICAvLyBjYW4gYWRkIGEgc2lnbmlmaWNhbnQgYW1vdW50IG9mIG92ZXJoZWFkLiBBdm9pZCB0aGVcbiAgICAvLyBpbnRlcm1lZGlhdGUgb2JqZWN0IGNyZWF0aW9uIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYVxuICAgIC8vIHNpbmdsZSBjYWxsYmFjayBhcmd1bWVudFxuXG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgdmFyIGxlbmd0aCA9IGNhbGxiYWNrcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgdmFyIF9sZW5ndGggPSBjYWxsYmFja3MubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgX2xlbmd0aDsgKytfaSkge1xuICAgICAgICBjYWxsYmFja3NbX2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGVzdHJveXMgdGhlIHN0cmVhbSBhbmQgY2xlYW5zIHVwLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBGb3J3YXJkcyBhbGwgYGRhdGFgIGV2ZW50cyBvbiB0aGlzIHN0cmVhbSB0byB0aGUgZGVzdGluYXRpb24gc3RyZWFtLiBUaGVcbiAgICogZGVzdGluYXRpb24gc3RyZWFtIHNob3VsZCBwcm92aWRlIGEgbWV0aG9kIGBwdXNoYCB0byByZWNlaXZlIHRoZSBkYXRhXG4gICAqIGV2ZW50cyBhcyB0aGV5IGFycml2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJlYW19IGRlc3RpbmF0aW9uIHRoZSBzdHJlYW0gdGhhdCB3aWxsIHJlY2VpdmUgYWxsIGBkYXRhYCBldmVudHNcbiAgICogQHNlZSBodHRwOi8vbm9kZWpzLm9yZy9hcGkvc3RyZWFtLmh0bWwjc3RyZWFtX3JlYWRhYmxlX3BpcGVfZGVzdGluYXRpb25fb3B0aW9uc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5waXBlID0gZnVuY3Rpb24gcGlwZShkZXN0aW5hdGlvbikge1xuICAgIHRoaXMub24oJ2RhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgZGVzdGluYXRpb24ucHVzaChkYXRhKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gU3RyZWFtO1xufSgpO1xuXG5leHBvcnQgeyBTdHJlYW0gYXMgZGVmYXVsdCB9OyIsInZhciB3aW47XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luID0gZ2xvYmFsO1xufSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgd2luID0gc2VsZjtcbn0gZWxzZSB7XG4gICAgd2luID0ge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2luO1xuIiwiLyohIEBuYW1lIG0zdTgtcGFyc2VyIEB2ZXJzaW9uIDYuMC4wIEBsaWNlbnNlIEFwYWNoZS0yLjAgKi9cbmltcG9ydCBTdHJlYW0gZnJvbSAnQHZpZGVvanMvdmhzLXV0aWxzL2VzL3N0cmVhbS5qcyc7XG5pbXBvcnQgX2V4dGVuZHMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzJztcbmltcG9ydCBkZWNvZGVCNjRUb1VpbnQ4QXJyYXkgZnJvbSAnQHZpZGVvanMvdmhzLXV0aWxzL2VzL2RlY29kZS1iNjQtdG8tdWludDgtYXJyYXkuanMnO1xuXG4vKipcbiAqIEBmaWxlIG0zdTgvbGluZS1zdHJlYW0uanNcbiAqL1xuLyoqXG4gKiBBIHN0cmVhbSB0aGF0IGJ1ZmZlcnMgc3RyaW5nIGlucHV0IGFuZCBnZW5lcmF0ZXMgYSBgZGF0YWAgZXZlbnQgZm9yIGVhY2hcbiAqIGxpbmUuXG4gKlxuICogQGNsYXNzIExpbmVTdHJlYW1cbiAqIEBleHRlbmRzIFN0cmVhbVxuICovXG5cbmNsYXNzIExpbmVTdHJlYW0gZXh0ZW5kcyBTdHJlYW0ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBuZXcgZGF0YSB0byBiZSBwYXJzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhIHRoZSB0ZXh0IHRvIHByb2Nlc3NcbiAgICovXG5cblxuICBwdXNoKGRhdGEpIHtcbiAgICBsZXQgbmV4dE5ld2xpbmU7XG4gICAgdGhpcy5idWZmZXIgKz0gZGF0YTtcbiAgICBuZXh0TmV3bGluZSA9IHRoaXMuYnVmZmVyLmluZGV4T2YoJ1xcbicpO1xuXG4gICAgZm9yICg7IG5leHROZXdsaW5lID4gLTE7IG5leHROZXdsaW5lID0gdGhpcy5idWZmZXIuaW5kZXhPZignXFxuJykpIHtcbiAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHRoaXMuYnVmZmVyLnN1YnN0cmluZygwLCBuZXh0TmV3bGluZSkpO1xuICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zdWJzdHJpbmcobmV4dE5ld2xpbmUgKyAxKTtcbiAgICB9XG4gIH1cblxufVxuXG5jb25zdCBUQUIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDkpO1xuXG5jb25zdCBwYXJzZUJ5dGVyYW5nZSA9IGZ1bmN0aW9uIChieXRlcmFuZ2VTdHJpbmcpIHtcbiAgLy8gb3B0aW9uYWxseSBtYXRjaCBhbmQgY2FwdHVyZSAwKyBkaWdpdHMgYmVmb3JlIGBAYFxuICAvLyBvcHRpb25hbGx5IG1hdGNoIGFuZCBjYXB0dXJlIDArIGRpZ2l0cyBhZnRlciBgQGBcbiAgY29uc3QgbWF0Y2ggPSAvKFswLTkuXSopP0A/KFswLTkuXSopPy8uZXhlYyhieXRlcmFuZ2VTdHJpbmcgfHwgJycpO1xuICBjb25zdCByZXN1bHQgPSB7fTtcblxuICBpZiAobWF0Y2hbMV0pIHtcbiAgICByZXN1bHQubGVuZ3RoID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgfVxuXG4gIGlmIChtYXRjaFsyXSkge1xuICAgIHJlc3VsdC5vZmZzZXQgPSBwYXJzZUludChtYXRjaFsyXSwgMTApO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIFwiZm9yZ2l2aW5nXCIgYXR0cmlidXRlIGxpc3QgcHN1ZWRvLWdyYW1tYXI6XG4gKiBhdHRyaWJ1dGVzIC0+IGtleXZhbHVlICgnLCcga2V5dmFsdWUpKlxuICoga2V5dmFsdWUgICAtPiBrZXkgJz0nIHZhbHVlXG4gKiBrZXkgICAgICAgIC0+IFtePV0qXG4gKiB2YWx1ZSAgICAgIC0+ICdcIicgW15cIl0qICdcIicgfCBbXixdKlxuICovXG5cblxuY29uc3QgYXR0cmlidXRlU2VwYXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBrZXkgPSAnW149XSonO1xuICBjb25zdCB2YWx1ZSA9ICdcIlteXCJdKlwifFteLF0qJztcbiAgY29uc3Qga2V5dmFsdWUgPSAnKD86JyArIGtleSArICcpPSg/OicgKyB2YWx1ZSArICcpJztcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJyg/Ol58LCkoJyArIGtleXZhbHVlICsgJyknKTtcbn07XG4vKipcbiAqIFBhcnNlIGF0dHJpYnV0ZXMgZnJvbSBhIGxpbmUgZ2l2ZW4gdGhlIHNlcGFyYXRvclxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVzIHRoZSBhdHRyaWJ1dGUgbGluZSB0byBwYXJzZVxuICovXG5cblxuY29uc3QgcGFyc2VBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0ge307XG5cbiAgaWYgKCFhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSAvLyBzcGxpdCB0aGUgc3RyaW5nIHVzaW5nIGF0dHJpYnV0ZXMgYXMgdGhlIHNlcGFyYXRvclxuXG5cbiAgY29uc3QgYXR0cnMgPSBhdHRyaWJ1dGVzLnNwbGl0KGF0dHJpYnV0ZVNlcGFyYXRvcigpKTtcbiAgbGV0IGkgPSBhdHRycy5sZW5ndGg7XG4gIGxldCBhdHRyO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICAvLyBmaWx0ZXIgb3V0IHVubWF0Y2hlZCBwb3J0aW9ucyBvZiB0aGUgc3RyaW5nXG4gICAgaWYgKGF0dHJzW2ldID09PSAnJykge1xuICAgICAgY29udGludWU7XG4gICAgfSAvLyBzcGxpdCB0aGUga2V5IGFuZCB2YWx1ZVxuXG5cbiAgICBhdHRyID0gLyhbXj1dKik9KC4qKS8uZXhlYyhhdHRyc1tpXSkuc2xpY2UoMSk7IC8vIHRyaW0gd2hpdGVzcGFjZSBhbmQgcmVtb3ZlIG9wdGlvbmFsIHF1b3RlcyBhcm91bmQgdGhlIHZhbHVlXG5cbiAgICBhdHRyWzBdID0gYXR0clswXS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgYXR0clsxXSA9IGF0dHJbMV0ucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuICAgIGF0dHJbMV0gPSBhdHRyWzFdLnJlcGxhY2UoL15bJ1wiXSguKilbJ1wiXSQvZywgJyQxJyk7XG4gICAgcmVzdWx0W2F0dHJbMF1dID0gYXR0clsxXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuLyoqXG4gKiBBIGxpbmUtbGV2ZWwgTTNVOCBwYXJzZXIgZXZlbnQgc3RyZWFtLiBJdCBleHBlY3RzIHRvIHJlY2VpdmUgaW5wdXQgb25lXG4gKiBsaW5lIGF0IGEgdGltZSBhbmQgcGVyZm9ybXMgYSBjb250ZXh0LWZyZWUgcGFyc2Ugb2YgaXRzIGNvbnRlbnRzLiBBIHN0cmVhbVxuICogaW50ZXJwcmV0YXRpb24gb2YgYSBtYW5pZmVzdCBjYW4gYmUgdXNlZnVsIGlmIHRoZSBtYW5pZmVzdCBpcyBleHBlY3RlZCB0b1xuICogYmUgdG9vIGxhcmdlIHRvIGZpdCBjb21mb3J0YWJseSBpbnRvIG1lbW9yeSBvciB0aGUgZW50aXJldHkgb2YgdGhlIGlucHV0XG4gKiBpcyBub3QgaW1tZWRpYXRlbHkgYXZhaWxhYmxlLiBPdGhlcndpc2UsIGl0J3MgcHJvYmFibHkgbXVjaCBlYXNpZXIgdG8gd29ya1xuICogd2l0aCBhIHJlZ3VsYXIgYFBhcnNlcmAgb2JqZWN0LlxuICpcbiAqIFByb2R1Y2VzIGBkYXRhYCBldmVudHMgd2l0aCBhbiBvYmplY3QgdGhhdCBjYXB0dXJlcyB0aGUgcGFyc2VyJ3NcbiAqIGludGVycHJldGF0aW9uIG9mIHRoZSBpbnB1dC4gVGhhdCBvYmplY3QgaGFzIGEgcHJvcGVydHkgYHRhZ2AgdGhhdCBpcyBvbmVcbiAqIG9mIGB1cmlgLCBgY29tbWVudGAsIG9yIGB0YWdgLiBVUklzIG9ubHkgaGF2ZSBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gKiBwcm9wZXJ0eSwgYGxpbmVgLCB3aGljaCBjYXB0dXJlcyB0aGUgZW50aXJldHkgb2YgdGhlIGlucHV0IHdpdGhvdXRcbiAqIGludGVycHJldGF0aW9uLiBDb21tZW50cyBzaW1pbGFybHkgaGF2ZSBhIHNpbmdsZSBhZGRpdGlvbmFsIHByb3BlcnR5XG4gKiBgdGV4dGAgd2hpY2ggaXMgdGhlIGlucHV0IHdpdGhvdXQgdGhlIGxlYWRpbmcgYCNgLlxuICpcbiAqIFRhZ3MgYWx3YXlzIGhhdmUgYSBwcm9wZXJ0eSBgdGFnVHlwZWAgd2hpY2ggaXMgdGhlIGxvd2VyLWNhc2VkIHZlcnNpb24gb2ZcbiAqIHRoZSBNM1U4IGRpcmVjdGl2ZSB3aXRob3V0IHRoZSBgI0VYVGAgb3IgYCNFWFQtWC1gIHByZWZpeC4gRm9yIGluc3RhbmNlLFxuICogYCNFWFQtWC1NRURJQS1TRVFVRU5DRWAgYmVjb21lcyBgbWVkaWEtc2VxdWVuY2VgIHdoZW4gcGFyc2VkLiBVbnJlY29nbml6ZWRcbiAqIHRhZ3MgYXJlIGdpdmVuIHRoZSB0YWcgdHlwZSBgdW5rbm93bmAgYW5kIGEgc2luZ2xlIGFkZGl0aW9uYWwgcHJvcGVydHlcbiAqIGBkYXRhYCB3aXRoIHRoZSByZW1haW5kZXIgb2YgdGhlIGlucHV0LlxuICpcbiAqIEBjbGFzcyBQYXJzZVN0cmVhbVxuICogQGV4dGVuZHMgU3RyZWFtXG4gKi9cblxuXG5jbGFzcyBQYXJzZVN0cmVhbSBleHRlbmRzIFN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jdXN0b21QYXJzZXJzID0gW107XG4gICAgdGhpcy50YWdNYXBwZXJzID0gW107XG4gIH1cbiAgLyoqXG4gICAqIFBhcnNlcyBhbiBhZGRpdGlvbmFsIGxpbmUgb2YgaW5wdXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lIGEgc2luZ2xlIGxpbmUgb2YgYW4gTTNVOCBmaWxlIHRvIHBhcnNlXG4gICAqL1xuXG5cbiAgcHVzaChsaW5lKSB7XG4gICAgbGV0IG1hdGNoO1xuICAgIGxldCBldmVudDsgLy8gc3RyaXAgd2hpdGVzcGFjZVxuXG4gICAgbGluZSA9IGxpbmUudHJpbSgpO1xuXG4gICAgaWYgKGxpbmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBpZ25vcmUgZW1wdHkgbGluZXNcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFVSSXNcblxuXG4gICAgaWYgKGxpbmVbMF0gIT09ICcjJykge1xuICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywge1xuICAgICAgICB0eXBlOiAndXJpJyxcbiAgICAgICAgdXJpOiBsaW5lXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIG1hcCB0YWdzXG5cblxuICAgIGNvbnN0IG5ld0xpbmVzID0gdGhpcy50YWdNYXBwZXJzLnJlZHVjZSgoYWNjLCBtYXBwZXIpID0+IHtcbiAgICAgIGNvbnN0IG1hcHBlZExpbmUgPSBtYXBwZXIobGluZSk7IC8vIHNraXAgaWYgdW5jaGFuZ2VkXG5cbiAgICAgIGlmIChtYXBwZWRMaW5lID09PSBsaW5lKSB7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY2MuY29uY2F0KFttYXBwZWRMaW5lXSk7XG4gICAgfSwgW2xpbmVdKTtcbiAgICBuZXdMaW5lcy5mb3JFYWNoKG5ld0xpbmUgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1c3RvbVBhcnNlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tUGFyc2Vyc1tpXS5jYWxsKHRoaXMsIG5ld0xpbmUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IC8vIENvbW1lbnRzXG5cblxuICAgICAgaWYgKG5ld0xpbmUuaW5kZXhPZignI0VYVCcpICE9PSAwKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAnY29tbWVudCcsXG4gICAgICAgICAgdGV4dDogbmV3TGluZS5zbGljZSgxKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBzdHJpcCBvZmYgYW55IGNhcnJpYWdlIHJldHVybnMgaGVyZSBzbyB0aGUgcmVnZXggbWF0Y2hpbmdcbiAgICAgIC8vIGRvZXNuJ3QgaGF2ZSB0byBhY2NvdW50IGZvciB0aGVtLlxuXG5cbiAgICAgIG5ld0xpbmUgPSBuZXdMaW5lLnJlcGxhY2UoJ1xccicsICcnKTsgLy8gVGFnc1xuXG4gICAgICBtYXRjaCA9IC9eI0VYVE0zVS8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnbTN1J1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVElORjooWzAtOVxcLl0qKT8sPyguKik/JC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdpbmYnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuZHVyYXRpb24gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgIGV2ZW50LnRpdGxlID0gbWF0Y2hbMl07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1UQVJHRVREVVJBVElPTjooWzAtOS5dKik/Ly5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3RhcmdldGR1cmF0aW9uJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmR1cmF0aW9uID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVZFUlNJT046KFswLTkuXSopPy8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICd2ZXJzaW9uJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LnZlcnNpb24gPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUVESUEtU0VRVUVOQ0U6KFxcLT9bMC05Ll0qKT8vLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnbWVkaWEtc2VxdWVuY2UnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQubnVtYmVyID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLURJU0NPTlRJTlVJVFktU0VRVUVOQ0U6KFxcLT9bMC05Ll0qKT8vLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZGlzY29udGludWl0eS1zZXF1ZW5jZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5udW1iZXIgPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtUExBWUxJU1QtVFlQRTooLiopPyQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAncGxheWxpc3QtdHlwZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5wbGF5bGlzdFR5cGUgPSBtYXRjaFsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUJZVEVSQU5HRTooLiopPyQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IF9leHRlbmRzKHBhcnNlQnl0ZXJhbmdlKG1hdGNoWzFdKSwge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdieXRlcmFuZ2UnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1BTExPVy1DQUNIRTooWUVTfE5PKT8vLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnYWxsb3ctY2FjaGUnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuYWxsb3dlZCA9ICEvTk8vLnRlc3QobWF0Y2hbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUFQOiguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ21hcCdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKG1hdGNoWzFdKTtcblxuICAgICAgICAgIGlmIChhdHRyaWJ1dGVzLlVSSSkge1xuICAgICAgICAgICAgZXZlbnQudXJpID0gYXR0cmlidXRlcy5VUkk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuQllURVJBTkdFKSB7XG4gICAgICAgICAgICBldmVudC5ieXRlcmFuZ2UgPSBwYXJzZUJ5dGVyYW5nZShhdHRyaWJ1dGVzLkJZVEVSQU5HRSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtU1RSRUFNLUlORjooLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdzdHJlYW0taW5mJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuXG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuUkVTT0xVVElPTikge1xuICAgICAgICAgICAgY29uc3Qgc3BsaXQgPSBldmVudC5hdHRyaWJ1dGVzLlJFU09MVVRJT04uc3BsaXQoJ3gnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb24gPSB7fTtcblxuICAgICAgICAgICAgaWYgKHNwbGl0WzBdKSB7XG4gICAgICAgICAgICAgIHJlc29sdXRpb24ud2lkdGggPSBwYXJzZUludChzcGxpdFswXSwgMTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3BsaXRbMV0pIHtcbiAgICAgICAgICAgICAgcmVzb2x1dGlvbi5oZWlnaHQgPSBwYXJzZUludChzcGxpdFsxXSwgMTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLlJFU09MVVRJT04gPSByZXNvbHV0aW9uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLkJBTkRXSURUSCkge1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5CQU5EV0lEVEggPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzLkJBTkRXSURUSCwgMTApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzWydGUkFNRS1SQVRFJ10pIHtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNbJ0ZSQU1FLVJBVEUnXSA9IHBhcnNlRmxvYXQoZXZlbnQuYXR0cmlidXRlc1snRlJBTUUtUkFURSddKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlc1snUFJPR1JBTS1JRCddKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzWydQUk9HUkFNLUlEJ10gPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzWydQUk9HUkFNLUlEJ10sIDEwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1NRURJQTooLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdtZWRpYSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKG1hdGNoWzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUVORExJU1QvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ2VuZGxpc3QnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtRElTQ09OVElOVUlUWS8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZGlzY29udGludWl0eSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1QUk9HUkFNLURBVEUtVElNRTooLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdwcm9ncmFtLWRhdGUtdGltZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5kYXRlVGltZVN0cmluZyA9IG1hdGNoWzFdO1xuICAgICAgICAgIGV2ZW50LmRhdGVUaW1lT2JqZWN0ID0gbmV3IERhdGUobWF0Y2hbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtS0VZOiguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ2tleSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKG1hdGNoWzFdKTsgLy8gcGFyc2UgdGhlIElWIHN0cmluZyBpbnRvIGEgVWludDMyQXJyYXlcblxuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLklWKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5JVi5zdWJzdHJpbmcoMCwgMikudG9Mb3dlckNhc2UoKSA9PT0gJzB4Jykge1xuICAgICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLklWID0gZXZlbnQuYXR0cmlidXRlcy5JVi5zdWJzdHJpbmcoMik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuSVYgPSBldmVudC5hdHRyaWJ1dGVzLklWLm1hdGNoKC8uezh9L2cpO1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JVlswXSA9IHBhcnNlSW50KGV2ZW50LmF0dHJpYnV0ZXMuSVZbMF0sIDE2KTtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuSVZbMV0gPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzLklWWzFdLCAxNik7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLklWWzJdID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlcy5JVlsyXSwgMTYpO1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JVlszXSA9IHBhcnNlSW50KGV2ZW50LmF0dHJpYnV0ZXMuSVZbM10sIDE2KTtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuSVYgPSBuZXcgVWludDMyQXJyYXkoZXZlbnQuYXR0cmlidXRlcy5JVik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtU1RBUlQ6KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnc3RhcnQnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuYXR0cmlidXRlcyA9IHBhcnNlQXR0cmlidXRlcyhtYXRjaFsxXSk7XG4gICAgICAgICAgZXZlbnQuYXR0cmlidXRlc1snVElNRS1PRkZTRVQnXSA9IHBhcnNlRmxvYXQoZXZlbnQuYXR0cmlidXRlc1snVElNRS1PRkZTRVQnXSk7XG4gICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5QUkVDSVNFID0gL1lFUy8udGVzdChldmVudC5hdHRyaWJ1dGVzLlBSRUNJU0UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtQ1VFLU9VVC1DT05UOiguKik/JC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdjdWUtb3V0LWNvbnQnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9IG1hdGNoWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV2ZW50LmRhdGEgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUNVRS1PVVQ6KC4qKT8kLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ2N1ZS1vdXQnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9IG1hdGNoWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV2ZW50LmRhdGEgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUNVRS1JTjooLiopPyQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnY3VlLWluJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmRhdGEgPSBtYXRjaFsxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBldmVudC5kYXRhID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1TS0lQOiguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3NraXAnXG4gICAgICAgIH07XG4gICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuXG4gICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KCdTS0lQUEVELVNFR01FTlRTJykpIHtcbiAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzWydTS0lQUEVELVNFR01FTlRTJ10gPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzWydTS0lQUEVELVNFR01FTlRTJ10sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KCdSRUNFTlRMWS1SRU1PVkVELURBVEVSQU5HRVMnKSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNbJ1JFQ0VOVExZLVJFTU9WRUQtREFURVJBTkdFUyddID0gZXZlbnQuYXR0cmlidXRlc1snUkVDRU5UTFktUkVNT1ZFRC1EQVRFUkFOR0VTJ10uc3BsaXQoVEFCKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBBUlQ6KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAncGFydCdcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnQuYXR0cmlidXRlcyA9IHBhcnNlQXR0cmlidXRlcyhtYXRjaFsxXSk7XG4gICAgICAgIFsnRFVSQVRJT04nXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzW2tleV0gPSBwYXJzZUZsb2F0KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgWydJTkRFUEVOREVOVCcsICdHQVAnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzW2tleV0gPSAvWUVTLy50ZXN0KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eSgnQllURVJBTkdFJykpIHtcbiAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLmJ5dGVyYW5nZSA9IHBhcnNlQnl0ZXJhbmdlKGV2ZW50LmF0dHJpYnV0ZXMuQllURVJBTkdFKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVNFUlZFUi1DT05UUk9MOiguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3NlcnZlci1jb250cm9sJ1xuICAgICAgICB9O1xuICAgICAgICBldmVudC5hdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKG1hdGNoWzFdKTtcbiAgICAgICAgWydDQU4tU0tJUC1VTlRJTCcsICdQQVJULUhPTEQtQkFDSycsICdIT0xELUJBQ0snXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzW2tleV0gPSBwYXJzZUZsb2F0KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgWydDQU4tU0tJUC1EQVRFUkFOR0VTJywgJ0NBTi1CTE9DSy1SRUxPQUQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzW2tleV0gPSAvWUVTLy50ZXN0KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtUEFSVC1JTkY6KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAncGFydC1pbmYnXG4gICAgICAgIH07XG4gICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuICAgICAgICBbJ1BBUlQtVEFSR0VUJ10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlc1trZXldID0gcGFyc2VGbG9hdChldmVudC5hdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBSRUxPQUQtSElOVDooLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdwcmVsb2FkLWhpbnQnXG4gICAgICAgIH07XG4gICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuICAgICAgICBbJ0JZVEVSQU5HRS1TVEFSVCcsICdCWVRFUkFOR0UtTEVOR1RIJ10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlc1trZXldID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlc1trZXldLCAxMCk7XG4gICAgICAgICAgICBjb25zdCBzdWJrZXkgPSBrZXkgPT09ICdCWVRFUkFOR0UtTEVOR1RIJyA/ICdsZW5ndGgnIDogJ29mZnNldCc7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLmJ5dGVyYW5nZSA9IGV2ZW50LmF0dHJpYnV0ZXMuYnl0ZXJhbmdlIHx8IHt9O1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5ieXRlcmFuZ2Vbc3Via2V5XSA9IGV2ZW50LmF0dHJpYnV0ZXNba2V5XTsgLy8gb25seSBrZWVwIHRoZSBwYXJzZWQgYnl0ZXJhbmdlIG9iamVjdC5cblxuICAgICAgICAgICAgZGVsZXRlIGV2ZW50LmF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1SRU5ESVRJT04tUkVQT1JUOiguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3JlbmRpdGlvbi1yZXBvcnQnXG4gICAgICAgIH07XG4gICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuICAgICAgICBbJ0xBU1QtTVNOJywgJ0xBU1QtUEFSVCddLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNba2V5XSA9IHBhcnNlSW50KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSwgMTApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyB1bmtub3duIHRhZyB0eXBlXG5cblxuICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywge1xuICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgZGF0YTogbmV3TGluZS5zbGljZSg0KVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHBhcnNlciBmb3IgY3VzdG9tIGhlYWRlcnNcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9ucyAgICAgICAgICAgICAgYSBtYXAgb2Ygb3B0aW9ucyBmb3IgdGhlIGFkZGVkIHBhcnNlclxuICAgKiBAcGFyYW0ge1JlZ0V4cH0gICBvcHRpb25zLmV4cHJlc3Npb24gICBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgY3VzdG9tIGhlYWRlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gICBvcHRpb25zLmN1c3RvbVR5cGUgICB0aGUgY3VzdG9tIHR5cGUgdG8gcmVnaXN0ZXIgdG8gdGhlIG91dHB1dFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5kYXRhUGFyc2VyXSBmdW5jdGlvbiB0byBwYXJzZSB0aGUgbGluZSBpbnRvIGFuIG9iamVjdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59ICBbb3B0aW9ucy5zZWdtZW50XSAgICBzaG91bGQgdGFnIGRhdGEgYmUgYXR0YWNoZWQgdG8gdGhlIHNlZ21lbnQgb2JqZWN0XG4gICAqL1xuXG5cbiAgYWRkUGFyc2VyKHtcbiAgICBleHByZXNzaW9uLFxuICAgIGN1c3RvbVR5cGUsXG4gICAgZGF0YVBhcnNlcixcbiAgICBzZWdtZW50XG4gIH0pIHtcbiAgICBpZiAodHlwZW9mIGRhdGFQYXJzZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGRhdGFQYXJzZXIgPSBsaW5lID0+IGxpbmU7XG4gICAgfVxuXG4gICAgdGhpcy5jdXN0b21QYXJzZXJzLnB1c2gobGluZSA9PiB7XG4gICAgICBjb25zdCBtYXRjaCA9IGV4cHJlc3Npb24uZXhlYyhsaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICBkYXRhOiBkYXRhUGFyc2VyKGxpbmUpLFxuICAgICAgICAgIGN1c3RvbVR5cGUsXG4gICAgICAgICAgc2VnbWVudFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGN1c3RvbSBoZWFkZXIgbWFwcGVyXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWdFeHB9ICAgb3B0aW9ucy5leHByZXNzaW9uICAgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggdGhlIGN1c3RvbSBoZWFkZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5tYXAgICAgICAgICAgZnVuY3Rpb24gdG8gdHJhbnNsYXRlIHRhZyBpbnRvIGEgZGlmZmVyZW50IHRhZ1xuICAgKi9cblxuXG4gIGFkZFRhZ01hcHBlcih7XG4gICAgZXhwcmVzc2lvbixcbiAgICBtYXBcbiAgfSkge1xuICAgIGNvbnN0IG1hcEZuID0gbGluZSA9PiB7XG4gICAgICBpZiAoZXhwcmVzc2lvbi50ZXN0KGxpbmUpKSB7XG4gICAgICAgIHJldHVybiBtYXAobGluZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH07XG5cbiAgICB0aGlzLnRhZ01hcHBlcnMucHVzaChtYXBGbik7XG4gIH1cblxufVxuXG5jb25zdCBjYW1lbENhc2UgPSBzdHIgPT4gc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLShcXHcpL2csIGEgPT4gYVsxXS50b1VwcGVyQ2FzZSgpKTtcblxuY29uc3QgY2FtZWxDYXNlS2V5cyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXN1bHRbY2FtZWxDYXNlKGtleSldID0gYXR0cmlidXRlc1trZXldO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07IC8vIHNldCBTRVJWRVItQ09OVFJPTCBob2xkIGJhY2sgYmFzZWQgdXBvbiB0YXJnZXREdXJhdGlvbiBhbmQgcGFydFRhcmdldER1cmF0aW9uXG4vLyB3ZSBuZWVkIHRoaXMgaGVscGVyIGJlY2F1c2UgZGVmYXVsdHMgYXJlIGJhc2VkIHVwb24gdGFyZ2V0RHVyYXRpb24gYW5kXG4vLyBwYXJ0VGFyZ2V0RHVyYXRpb24gYmVpbmcgc2V0LCBidXQgdGhleSBtYXkgbm90IGJlIGlmIFNFUlZFUi1DT05UUk9MIGFwcGVhcnMgYmVmb3JlXG4vLyB0YXJnZXQgZHVyYXRpb25zIGFyZSBzZXQuXG5cblxuY29uc3Qgc2V0SG9sZEJhY2sgPSBmdW5jdGlvbiAobWFuaWZlc3QpIHtcbiAgY29uc3Qge1xuICAgIHNlcnZlckNvbnRyb2wsXG4gICAgdGFyZ2V0RHVyYXRpb24sXG4gICAgcGFydFRhcmdldER1cmF0aW9uXG4gIH0gPSBtYW5pZmVzdDtcblxuICBpZiAoIXNlcnZlckNvbnRyb2wpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB0YWcgPSAnI0VYVC1YLVNFUlZFUi1DT05UUk9MJztcbiAgY29uc3QgaGIgPSAnaG9sZEJhY2snO1xuICBjb25zdCBwaGIgPSAncGFydEhvbGRCYWNrJztcbiAgY29uc3QgbWluVGFyZ2V0RHVyYXRpb24gPSB0YXJnZXREdXJhdGlvbiAmJiB0YXJnZXREdXJhdGlvbiAqIDM7XG4gIGNvbnN0IG1pblBhcnREdXJhdGlvbiA9IHBhcnRUYXJnZXREdXJhdGlvbiAmJiBwYXJ0VGFyZ2V0RHVyYXRpb24gKiAyO1xuXG4gIGlmICh0YXJnZXREdXJhdGlvbiAmJiAhc2VydmVyQ29udHJvbC5oYXNPd25Qcm9wZXJ0eShoYikpIHtcbiAgICBzZXJ2ZXJDb250cm9sW2hiXSA9IG1pblRhcmdldER1cmF0aW9uO1xuICAgIHRoaXMudHJpZ2dlcignaW5mbycsIHtcbiAgICAgIG1lc3NhZ2U6IGAke3RhZ30gZGVmYXVsdGluZyBIT0xELUJBQ0sgdG8gdGFyZ2V0RHVyYXRpb24gKiAzICgke21pblRhcmdldER1cmF0aW9ufSkuYFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKG1pblRhcmdldER1cmF0aW9uICYmIHNlcnZlckNvbnRyb2xbaGJdIDwgbWluVGFyZ2V0RHVyYXRpb24pIHtcbiAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICBtZXNzYWdlOiBgJHt0YWd9IGNsYW1waW5nIEhPTEQtQkFDSyAoJHtzZXJ2ZXJDb250cm9sW2hiXX0pIHRvIHRhcmdldER1cmF0aW9uICogMyAoJHttaW5UYXJnZXREdXJhdGlvbn0pYFxuICAgIH0pO1xuICAgIHNlcnZlckNvbnRyb2xbaGJdID0gbWluVGFyZ2V0RHVyYXRpb247XG4gIH0gLy8gZGVmYXVsdCBubyBwYXJ0IGhvbGQgYmFjayB0byBwYXJ0IHRhcmdldCBkdXJhdGlvbiAqIDNcblxuXG4gIGlmIChwYXJ0VGFyZ2V0RHVyYXRpb24gJiYgIXNlcnZlckNvbnRyb2wuaGFzT3duUHJvcGVydHkocGhiKSkge1xuICAgIHNlcnZlckNvbnRyb2xbcGhiXSA9IHBhcnRUYXJnZXREdXJhdGlvbiAqIDM7XG4gICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgbWVzc2FnZTogYCR7dGFnfSBkZWZhdWx0aW5nIFBBUlQtSE9MRC1CQUNLIHRvIHBhcnRUYXJnZXREdXJhdGlvbiAqIDMgKCR7c2VydmVyQ29udHJvbFtwaGJdfSkuYFxuICAgIH0pO1xuICB9IC8vIGlmIHBhcnQgaG9sZCBiYWNrIGlzIHRvbyBzbWFsbCBkZWZhdWx0IGl0IHRvIHBhcnQgdGFyZ2V0IGR1cmF0aW9uICogMlxuXG5cbiAgaWYgKHBhcnRUYXJnZXREdXJhdGlvbiAmJiBzZXJ2ZXJDb250cm9sW3BoYl0gPCBtaW5QYXJ0RHVyYXRpb24pIHtcbiAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICBtZXNzYWdlOiBgJHt0YWd9IGNsYW1waW5nIFBBUlQtSE9MRC1CQUNLICgke3NlcnZlckNvbnRyb2xbcGhiXX0pIHRvIHBhcnRUYXJnZXREdXJhdGlvbiAqIDIgKCR7bWluUGFydER1cmF0aW9ufSkuYFxuICAgIH0pO1xuICAgIHNlcnZlckNvbnRyb2xbcGhiXSA9IG1pblBhcnREdXJhdGlvbjtcbiAgfVxufTtcbi8qKlxuICogQSBwYXJzZXIgZm9yIE0zVTggZmlsZXMuIFRoZSBjdXJyZW50IGludGVycHJldGF0aW9uIG9mIHRoZSBpbnB1dCBpc1xuICogZXhwb3NlZCBhcyBhIHByb3BlcnR5IGBtYW5pZmVzdGAgb24gcGFyc2VyIG9iamVjdHMuIEl0J3MganVzdCB0d28gbGluZXMgdG9cbiAqIGNyZWF0ZSBhbmQgcGFyc2UgYSBtYW5pZmVzdCBvbmNlIHlvdSBoYXZlIHRoZSBjb250ZW50cyBhdmFpbGFibGUgYXMgYSBzdHJpbmc6XG4gKlxuICogYGBganNcbiAqIHZhciBwYXJzZXIgPSBuZXcgbTN1OC5QYXJzZXIoKTtcbiAqIHBhcnNlci5wdXNoKHhoci5yZXNwb25zZVRleHQpO1xuICogYGBgXG4gKlxuICogTmV3IGlucHV0IGNhbiBsYXRlciBiZSBhcHBsaWVkIHRvIHVwZGF0ZSB0aGUgbWFuaWZlc3Qgb2JqZWN0IGJ5IGNhbGxpbmdcbiAqIGBwdXNoYCBhZ2Fpbi5cbiAqXG4gKiBUaGUgcGFyc2VyIGF0dGVtcHRzIHRvIGNyZWF0ZSBhIHVzYWJsZSBtYW5pZmVzdCBvYmplY3QgZXZlbiBpZiB0aGVcbiAqIHVuZGVybHlpbmcgaW5wdXQgaXMgc29tZXdoYXQgbm9uc2Vuc2ljYWwuIEl0IGVtaXRzIGBpbmZvYCBhbmQgYHdhcm5pbmdgXG4gKiBldmVudHMgZHVyaW5nIHRoZSBwYXJzZSBpZiBpdCBlbmNvdW50ZXJzIGlucHV0IHRoYXQgc2VlbXMgaW52YWxpZCBvclxuICogcmVxdWlyZXMgc29tZSBwcm9wZXJ0eSBvZiB0aGUgbWFuaWZlc3Qgb2JqZWN0IHRvIGJlIGRlZmF1bHRlZC5cbiAqXG4gKiBAY2xhc3MgUGFyc2VyXG4gKiBAZXh0ZW5kcyBTdHJlYW1cbiAqL1xuXG5cbmNsYXNzIFBhcnNlciBleHRlbmRzIFN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5saW5lU3RyZWFtID0gbmV3IExpbmVTdHJlYW0oKTtcbiAgICB0aGlzLnBhcnNlU3RyZWFtID0gbmV3IFBhcnNlU3RyZWFtKCk7XG4gICAgdGhpcy5saW5lU3RyZWFtLnBpcGUodGhpcy5wYXJzZVN0cmVhbSk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC10aGlzICovXG5cbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAvKiBlc2xpbnQtZW5hYmxlIGNvbnNpc3RlbnQtdGhpcyAqL1xuXG4gICAgY29uc3QgdXJpcyA9IFtdO1xuICAgIGxldCBjdXJyZW50VXJpID0ge307IC8vIGlmIHNwZWNpZmllZCwgdGhlIGFjdGl2ZSBFWFQtWC1NQVAgZGVmaW5pdGlvblxuXG4gICAgbGV0IGN1cnJlbnRNYXA7IC8vIGlmIHNwZWNpZmllZCwgdGhlIGFjdGl2ZSBkZWNyeXB0aW9uIGtleVxuXG4gICAgbGV0IGtleTtcbiAgICBsZXQgaGFzUGFydHMgPSBmYWxzZTtcblxuICAgIGNvbnN0IG5vb3AgPSBmdW5jdGlvbiAoKSB7fTtcblxuICAgIGNvbnN0IGRlZmF1bHRNZWRpYUdyb3VwcyA9IHtcbiAgICAgICdBVURJTyc6IHt9LFxuICAgICAgJ1ZJREVPJzoge30sXG4gICAgICAnQ0xPU0VELUNBUFRJT05TJzoge30sXG4gICAgICAnU1VCVElUTEVTJzoge31cbiAgICB9OyAvLyBUaGlzIGlzIHRoZSBXaWRldmluZSBVVUlEIGZyb20gREFTSCBJRiBJT1AuIFRoZSBzYW1lIGV4YWN0IHN0cmluZyBpc1xuICAgIC8vIHVzZWQgaW4gTVBEcyB3aXRoIFdpZGV2aW5lIGVuY3J5cHRlZCBzdHJlYW1zLlxuXG4gICAgY29uc3Qgd2lkZXZpbmVVdWlkID0gJ3Vybjp1dWlkOmVkZWY4YmE5LTc5ZDYtNGFjZS1hM2M4LTI3ZGNkNTFkMjFlZCc7IC8vIGdyb3VwIHNlZ21lbnRzIGludG8gbnVtYmVyZWQgdGltZWxpbmVzIGRlbGluZWF0ZWQgYnkgZGlzY29udGludWl0aWVzXG5cbiAgICBsZXQgY3VycmVudFRpbWVsaW5lID0gMDsgLy8gdGhlIG1hbmlmZXN0IGlzIGVtcHR5IHVudGlsIHRoZSBwYXJzZSBzdHJlYW0gYmVnaW5zIGRlbGl2ZXJpbmcgZGF0YVxuXG4gICAgdGhpcy5tYW5pZmVzdCA9IHtcbiAgICAgIGFsbG93Q2FjaGU6IHRydWUsXG4gICAgICBkaXNjb250aW51aXR5U3RhcnRzOiBbXSxcbiAgICAgIHNlZ21lbnRzOiBbXVxuICAgIH07IC8vIGtlZXAgdHJhY2sgb2YgdGhlIGxhc3Qgc2VlbiBzZWdtZW50J3MgYnl0ZSByYW5nZSBlbmQsIGFzIHNlZ21lbnRzIGFyZSBub3QgcmVxdWlyZWRcbiAgICAvLyB0byBwcm92aWRlIHRoZSBvZmZzZXQsIGluIHdoaWNoIGNhc2UgaXQgZGVmYXVsdHMgdG8gdGhlIG5leHQgYnl0ZSBhZnRlciB0aGVcbiAgICAvLyBwcmV2aW91cyBzZWdtZW50XG5cbiAgICBsZXQgbGFzdEJ5dGVyYW5nZUVuZCA9IDA7IC8vIGtlZXAgdHJhY2sgb2YgdGhlIGxhc3Qgc2VlbiBwYXJ0J3MgYnl0ZSByYW5nZSBlbmQuXG5cbiAgICBsZXQgbGFzdFBhcnRCeXRlcmFuZ2VFbmQgPSAwO1xuICAgIHRoaXMub24oJ2VuZCcsICgpID0+IHtcbiAgICAgIC8vIG9ubHkgYWRkIHByZWxvYWRTZWdtZW50IGlmIHdlIGRvbid0IHlldCBoYXZlIGEgdXJpIGZvciBpdC5cbiAgICAgIC8vIGFuZCB3ZSBhY3R1YWxseSBoYXZlIHBhcnRzL3ByZWxvYWRIaW50c1xuICAgICAgaWYgKGN1cnJlbnRVcmkudXJpIHx8ICFjdXJyZW50VXJpLnBhcnRzICYmICFjdXJyZW50VXJpLnByZWxvYWRIaW50cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghY3VycmVudFVyaS5tYXAgJiYgY3VycmVudE1hcCkge1xuICAgICAgICBjdXJyZW50VXJpLm1hcCA9IGN1cnJlbnRNYXA7XG4gICAgICB9XG5cbiAgICAgIGlmICghY3VycmVudFVyaS5rZXkgJiYga2V5KSB7XG4gICAgICAgIGN1cnJlbnRVcmkua2V5ID0ga2V5O1xuICAgICAgfVxuXG4gICAgICBpZiAoIWN1cnJlbnRVcmkudGltZWxpbmUgJiYgdHlwZW9mIGN1cnJlbnRUaW1lbGluZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY3VycmVudFVyaS50aW1lbGluZSA9IGN1cnJlbnRUaW1lbGluZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYW5pZmVzdC5wcmVsb2FkU2VnbWVudCA9IGN1cnJlbnRVcmk7XG4gICAgfSk7IC8vIHVwZGF0ZSB0aGUgbWFuaWZlc3Qgd2l0aCB0aGUgbTN1OCBlbnRyeSBmcm9tIHRoZSBwYXJzZSBzdHJlYW1cblxuICAgIHRoaXMucGFyc2VTdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgIGxldCBtZWRpYUdyb3VwO1xuICAgICAgbGV0IHJlbmRpdGlvbjtcbiAgICAgICh7XG4gICAgICAgIHRhZygpIHtcbiAgICAgICAgICAvLyBzd2l0Y2ggYmFzZWQgb24gdGhlIHRhZyB0eXBlXG4gICAgICAgICAgKCh7XG4gICAgICAgICAgICB2ZXJzaW9uKCkge1xuICAgICAgICAgICAgICBpZiAoZW50cnkudmVyc2lvbikge1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QudmVyc2lvbiA9IGVudHJ5LnZlcnNpb247XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICdhbGxvdy1jYWNoZScoKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuYWxsb3dDYWNoZSA9IGVudHJ5LmFsbG93ZWQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEoJ2FsbG93ZWQnIGluIGVudHJ5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIGFsbG93Q2FjaGUgdG8gWUVTJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuYWxsb3dDYWNoZSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGJ5dGVyYW5nZSgpIHtcbiAgICAgICAgICAgICAgY29uc3QgYnl0ZXJhbmdlID0ge307XG5cbiAgICAgICAgICAgICAgaWYgKCdsZW5ndGgnIGluIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVyaS5ieXRlcmFuZ2UgPSBieXRlcmFuZ2U7XG4gICAgICAgICAgICAgICAgYnl0ZXJhbmdlLmxlbmd0aCA9IGVudHJ5Lmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGlmICghKCdvZmZzZXQnIGluIGVudHJ5KSkge1xuICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAqIEZyb20gdGhlIGxhdGVzdCBzcGVjIChhcyBvZiB0aGlzIHdyaXRpbmcpOlxuICAgICAgICAgICAgICAgICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LXBhbnRvcy1odHRwLWxpdmUtc3RyZWFtaW5nLTIzI3NlY3Rpb24tNC4zLjIuMlxuICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAqIFNhbWUgdGV4dCBzaW5jZSBFWFQtWC1CWVRFUkFOR0UncyBpbnRyb2R1Y3Rpb24gaW4gZHJhZnQgNzpcbiAgICAgICAgICAgICAgICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1wYW50b3MtaHR0cC1saXZlLXN0cmVhbWluZy0wNyNzZWN0aW9uLTMuMy4xKVxuICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAqIFwiSWYgbyBbb2Zmc2V0XSBpcyBub3QgcHJlc2VudCwgdGhlIHN1Yi1yYW5nZSBiZWdpbnMgYXQgdGhlIG5leHQgYnl0ZVxuICAgICAgICAgICAgICAgICAgICogZm9sbG93aW5nIHRoZSBzdWItcmFuZ2Ugb2YgdGhlIHByZXZpb3VzIG1lZGlhIHNlZ21lbnQuXCJcbiAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgZW50cnkub2Zmc2V0ID0gbGFzdEJ5dGVyYW5nZUVuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoJ29mZnNldCcgaW4gZW50cnkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VXJpLmJ5dGVyYW5nZSA9IGJ5dGVyYW5nZTtcbiAgICAgICAgICAgICAgICBieXRlcmFuZ2Uub2Zmc2V0ID0gZW50cnkub2Zmc2V0O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgbGFzdEJ5dGVyYW5nZUVuZCA9IGJ5dGVyYW5nZS5vZmZzZXQgKyBieXRlcmFuZ2UubGVuZ3RoO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZW5kbGlzdCgpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5lbmRMaXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGluZigpIHtcbiAgICAgICAgICAgICAgaWYgKCEoJ21lZGlhU2VxdWVuY2UnIGluIHRoaXMubWFuaWZlc3QpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5tZWRpYVNlcXVlbmNlID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2luZm8nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZGVmYXVsdGluZyBtZWRpYSBzZXF1ZW5jZSB0byB6ZXJvJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCEoJ2Rpc2NvbnRpbnVpdHlTZXF1ZW5jZScgaW4gdGhpcy5tYW5pZmVzdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmRpc2NvbnRpbnVpdHlTZXF1ZW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2RlZmF1bHRpbmcgZGlzY29udGludWl0eSBzZXF1ZW5jZSB0byB6ZXJvJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmR1cmF0aW9uID4gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRVcmkuZHVyYXRpb24gPSBlbnRyeS5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5kdXJhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRVcmkuZHVyYXRpb24gPSAwLjAxO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICd1cGRhdGluZyB6ZXJvIHNlZ21lbnQgZHVyYXRpb24gdG8gYSBzbWFsbCB2YWx1ZSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3Quc2VnbWVudHMgPSB1cmlzO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAga2V5KCkge1xuICAgICAgICAgICAgICBpZiAoIWVudHJ5LmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3Jpbmcga2V5IGRlY2xhcmF0aW9uIHdpdGhvdXQgYXR0cmlidXRlIGxpc3QnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9IC8vIGNsZWFyIHRoZSBhY3RpdmUgZW5jcnlwdGlvbiBrZXlcblxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLk1FVEhPRCA9PT0gJ05PTkUnKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoIWVudHJ5LmF0dHJpYnV0ZXMuVVJJKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIGtleSBkZWNsYXJhdGlvbiB3aXRob3V0IFVSSSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5LRVlGT1JNQVQgPT09ICdjb20uYXBwbGUuc3RyZWFtaW5na2V5ZGVsaXZlcnknKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5jb250ZW50UHJvdGVjdGlvbiA9IHRoaXMubWFuaWZlc3QuY29udGVudFByb3RlY3Rpb24gfHwge307IC8vIFRPRE86IGFkZCBmdWxsIHN1cHBvcnQgZm9yIHRoaXMuXG5cbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmNvbnRlbnRQcm90ZWN0aW9uWydjb20uYXBwbGUuZnBzLjFfMCddID0ge1xuICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogZW50cnkuYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuS0VZRk9STUFUID09PSAnY29tLm1pY3Jvc29mdC5wbGF5cmVhZHknKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5jb250ZW50UHJvdGVjdGlvbiA9IHRoaXMubWFuaWZlc3QuY29udGVudFByb3RlY3Rpb24gfHwge307IC8vIFRPRE86IGFkZCBmdWxsIHN1cHBvcnQgZm9yIHRoaXMuXG5cbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmNvbnRlbnRQcm90ZWN0aW9uWydjb20ubWljcm9zb2Z0LnBsYXlyZWFkeSddID0ge1xuICAgICAgICAgICAgICAgICAgdXJpOiBlbnRyeS5hdHRyaWJ1dGVzLlVSSVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9IC8vIGNoZWNrIGlmIHRoZSBjb250ZW50IGlzIGVuY3J5cHRlZCBmb3IgV2lkZXZpbmVcbiAgICAgICAgICAgICAgLy8gV2lkZXZpbmUvSExTIHNwZWM6IGh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS93dmRvY3MvV2lkZXZpbmVfRFJNX0hMUy5wZGZcblxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLktFWUZPUk1BVCA9PT0gd2lkZXZpbmVVdWlkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgVkFMSURfTUVUSE9EUyA9IFsnU0FNUExFLUFFUycsICdTQU1QTEUtQUVTLUNUUicsICdTQU1QTEUtQUVTLUNFTkMnXTtcblxuICAgICAgICAgICAgICAgIGlmIChWQUxJRF9NRVRIT0RTLmluZGV4T2YoZW50cnkuYXR0cmlidXRlcy5NRVRIT0QpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaW52YWxpZCBrZXkgbWV0aG9kIHByb3ZpZGVkIGZvciBXaWRldmluZSdcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLk1FVEhPRCA9PT0gJ1NBTVBMRS1BRVMtQ0VOQycpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1NBTVBMRS1BRVMtQ0VOQyBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFNBTVBMRS1BRVMtQ1RSIGluc3RlYWQnXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5VUkkuc3Vic3RyaW5nKDAsIDIzKSAhPT0gJ2RhdGE6dGV4dC9wbGFpbjtiYXNlNjQsJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaW52YWxpZCBrZXkgVVJJIHByb3ZpZGVkIGZvciBXaWRldmluZSdcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LmF0dHJpYnV0ZXMuS0VZSUQgJiYgZW50cnkuYXR0cmlidXRlcy5LRVlJRC5zdWJzdHJpbmcoMCwgMikgPT09ICcweCcpKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbnZhbGlkIGtleSBJRCBwcm92aWRlZCBmb3IgV2lkZXZpbmUnXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IC8vIGlmIFdpZGV2aW5lIGtleSBhdHRyaWJ1dGVzIGFyZSB2YWxpZCwgc3RvcmUgdGhlbSBhcyBgY29udGVudFByb3RlY3Rpb25gXG4gICAgICAgICAgICAgICAgLy8gb24gdGhlIG1hbmlmZXN0IHRvIGVtdWxhdGUgV2lkZXZpbmUgdGFnIHN0cnVjdHVyZSBpbiBhIERBU0ggbXBkXG5cblxuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuY29udGVudFByb3RlY3Rpb24gPSB0aGlzLm1hbmlmZXN0LmNvbnRlbnRQcm90ZWN0aW9uIHx8IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuY29udGVudFByb3RlY3Rpb25bJ2NvbS53aWRldmluZS5hbHBoYSddID0ge1xuICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWVJZFVyaTogZW50cnkuYXR0cmlidXRlcy5LRVlGT1JNQVQsXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSAnMHgnIGZyb20gdGhlIGtleSBpZCBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAga2V5SWQ6IGVudHJ5LmF0dHJpYnV0ZXMuS0VZSUQuc3Vic3RyaW5nKDIpXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgLy8gZGVjb2RlIHRoZSBiYXNlNjQtZW5jb2RlZCBQU1NIIGJveFxuICAgICAgICAgICAgICAgICAgcHNzaDogZGVjb2RlQjY0VG9VaW50OEFycmF5KGVudHJ5LmF0dHJpYnV0ZXMuVVJJLnNwbGl0KCcsJylbMV0pXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoIWVudHJ5LmF0dHJpYnV0ZXMuTUVUSE9EKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2RlZmF1bHRpbmcga2V5IG1ldGhvZCB0byBBRVMtMTI4J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IC8vIHNldHVwIGFuIGVuY3J5cHRpb24ga2V5IGZvciB1cGNvbWluZyBzZWdtZW50c1xuXG5cbiAgICAgICAgICAgICAga2V5ID0ge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogZW50cnkuYXR0cmlidXRlcy5NRVRIT0QgfHwgJ0FFUy0xMjgnLFxuICAgICAgICAgICAgICAgIHVyaTogZW50cnkuYXR0cmlidXRlcy5VUklcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGVudHJ5LmF0dHJpYnV0ZXMuSVYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAga2V5Lml2ID0gZW50cnkuYXR0cmlidXRlcy5JVjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ21lZGlhLXNlcXVlbmNlJygpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc0Zpbml0ZShlbnRyeS5udW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIGludmFsaWQgbWVkaWEgc2VxdWVuY2U6ICcgKyBlbnRyeS5udW1iZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0Lm1lZGlhU2VxdWVuY2UgPSBlbnRyeS5udW1iZXI7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAnZGlzY29udGludWl0eS1zZXF1ZW5jZScoKSB7XG4gICAgICAgICAgICAgIGlmICghaXNGaW5pdGUoZW50cnkubnVtYmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBpbnZhbGlkIGRpc2NvbnRpbnVpdHkgc2VxdWVuY2U6ICcgKyBlbnRyeS5udW1iZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmRpc2NvbnRpbnVpdHlTZXF1ZW5jZSA9IGVudHJ5Lm51bWJlcjtcbiAgICAgICAgICAgICAgY3VycmVudFRpbWVsaW5lID0gZW50cnkubnVtYmVyO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ3BsYXlsaXN0LXR5cGUnKCkge1xuICAgICAgICAgICAgICBpZiAoIS9WT0R8RVZFTlQvLnRlc3QoZW50cnkucGxheWxpc3RUeXBlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyB1bmtub3duIHBsYXlsaXN0IHR5cGU6ICcgKyBlbnRyeS5wbGF5bGlzdFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucGxheWxpc3RUeXBlID0gZW50cnkucGxheWxpc3RUeXBlO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbWFwKCkge1xuICAgICAgICAgICAgICBjdXJyZW50TWFwID0ge307XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LnVyaSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXAudXJpID0gZW50cnkudXJpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmJ5dGVyYW5nZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXAuYnl0ZXJhbmdlID0gZW50cnkuYnl0ZXJhbmdlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXAua2V5ID0ga2V5O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAnc3RyZWFtLWluZicoKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucGxheWxpc3RzID0gdXJpcztcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5tZWRpYUdyb3VwcyA9IHRoaXMubWFuaWZlc3QubWVkaWFHcm91cHMgfHwgZGVmYXVsdE1lZGlhR3JvdXBzO1xuXG4gICAgICAgICAgICAgIGlmICghZW50cnkuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBlbXB0eSBzdHJlYW0taW5mIGF0dHJpYnV0ZXMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCFjdXJyZW50VXJpLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VXJpLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIF9leHRlbmRzKGN1cnJlbnRVcmkuYXR0cmlidXRlcywgZW50cnkuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBtZWRpYSgpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5tZWRpYUdyb3VwcyA9IHRoaXMubWFuaWZlc3QubWVkaWFHcm91cHMgfHwgZGVmYXVsdE1lZGlhR3JvdXBzO1xuXG4gICAgICAgICAgICAgIGlmICghKGVudHJ5LmF0dHJpYnV0ZXMgJiYgZW50cnkuYXR0cmlidXRlcy5UWVBFICYmIGVudHJ5LmF0dHJpYnV0ZXNbJ0dST1VQLUlEJ10gJiYgZW50cnkuYXR0cmlidXRlcy5OQU1FKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBpbmNvbXBsZXRlIG9yIG1pc3NpbmcgbWVkaWEgZ3JvdXAnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9IC8vIGZpbmQgdGhlIG1lZGlhIGdyb3VwLCBjcmVhdGluZyBkZWZhdWx0cyBhcyBuZWNlc3NhcnlcblxuXG4gICAgICAgICAgICAgIGNvbnN0IG1lZGlhR3JvdXBUeXBlID0gdGhpcy5tYW5pZmVzdC5tZWRpYUdyb3Vwc1tlbnRyeS5hdHRyaWJ1dGVzLlRZUEVdO1xuICAgICAgICAgICAgICBtZWRpYUdyb3VwVHlwZVtlbnRyeS5hdHRyaWJ1dGVzWydHUk9VUC1JRCddXSA9IG1lZGlhR3JvdXBUeXBlW2VudHJ5LmF0dHJpYnV0ZXNbJ0dST1VQLUlEJ11dIHx8IHt9O1xuICAgICAgICAgICAgICBtZWRpYUdyb3VwID0gbWVkaWFHcm91cFR5cGVbZW50cnkuYXR0cmlidXRlc1snR1JPVVAtSUQnXV07IC8vIGNvbGxlY3QgdGhlIHJlbmRpdGlvbiBtZXRhZGF0YVxuXG4gICAgICAgICAgICAgIHJlbmRpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAveWVzL2kudGVzdChlbnRyeS5hdHRyaWJ1dGVzLkRFRkFVTFQpXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgaWYgKHJlbmRpdGlvbi5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmF1dG9zZWxlY3QgPSB0cnVlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi5hdXRvc2VsZWN0ID0gL3llcy9pLnRlc3QoZW50cnkuYXR0cmlidXRlcy5BVVRPU0VMRUNUKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLkxBTkdVQUdFKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmxhbmd1YWdlID0gZW50cnkuYXR0cmlidXRlcy5MQU5HVUFHRTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLlVSSSkge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi51cmkgPSBlbnRyeS5hdHRyaWJ1dGVzLlVSSTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzWydJTlNUUkVBTS1JRCddKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmluc3RyZWFtSWQgPSBlbnRyeS5hdHRyaWJ1dGVzWydJTlNUUkVBTS1JRCddO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuQ0hBUkFDVEVSSVNUSUNTKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmNoYXJhY3RlcmlzdGljcyA9IGVudHJ5LmF0dHJpYnV0ZXMuQ0hBUkFDVEVSSVNUSUNTO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuRk9SQ0VEKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmZvcmNlZCA9IC95ZXMvaS50ZXN0KGVudHJ5LmF0dHJpYnV0ZXMuRk9SQ0VEKTtcbiAgICAgICAgICAgICAgfSAvLyBpbnNlcnQgdGhlIG5ldyByZW5kaXRpb25cblxuXG4gICAgICAgICAgICAgIG1lZGlhR3JvdXBbZW50cnkuYXR0cmlidXRlcy5OQU1FXSA9IHJlbmRpdGlvbjtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGRpc2NvbnRpbnVpdHkoKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lbGluZSArPSAxO1xuICAgICAgICAgICAgICBjdXJyZW50VXJpLmRpc2NvbnRpbnVpdHkgPSB0cnVlO1xuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmRpc2NvbnRpbnVpdHlTdGFydHMucHVzaCh1cmlzLmxlbmd0aCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAncHJvZ3JhbS1kYXRlLXRpbWUnKCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMubWFuaWZlc3QuZGF0ZVRpbWVTdHJpbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgLy8gUFJPR1JBTS1EQVRFLVRJTUUgaXMgYSBtZWRpYS1zZWdtZW50IHRhZywgYnV0IGZvciBiYWNrd2FyZHNcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmlsaXR5LCB3ZSBhZGQgdGhlIGZpcnN0IG9jY3VyZW5jZSBvZiB0aGUgUFJPR1JBTS1EQVRFLVRJTUUgdGFnXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIG1hbmlmZXN0IG9iamVjdFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHJlbW92aW5nIHRoaXMgaW4gZnV0dXJlIG1ham9yIHZlcnNpb25cbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmRhdGVUaW1lU3RyaW5nID0gZW50cnkuZGF0ZVRpbWVTdHJpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5kYXRlVGltZU9iamVjdCA9IGVudHJ5LmRhdGVUaW1lT2JqZWN0O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY3VycmVudFVyaS5kYXRlVGltZVN0cmluZyA9IGVudHJ5LmRhdGVUaW1lU3RyaW5nO1xuICAgICAgICAgICAgICBjdXJyZW50VXJpLmRhdGVUaW1lT2JqZWN0ID0gZW50cnkuZGF0ZVRpbWVPYmplY3Q7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB0YXJnZXRkdXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc0Zpbml0ZShlbnRyeS5kdXJhdGlvbikgfHwgZW50cnkuZHVyYXRpb24gPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIGludmFsaWQgdGFyZ2V0IGR1cmF0aW9uOiAnICsgZW50cnkuZHVyYXRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnRhcmdldER1cmF0aW9uID0gZW50cnkuZHVyYXRpb247XG4gICAgICAgICAgICAgIHNldEhvbGRCYWNrLmNhbGwodGhpcywgdGhpcy5tYW5pZmVzdCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzdGFydCgpIHtcbiAgICAgICAgICAgICAgaWYgKCFlbnRyeS5hdHRyaWJ1dGVzIHx8IGlzTmFOKGVudHJ5LmF0dHJpYnV0ZXNbJ1RJTUUtT0ZGU0VUJ10pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIHN0YXJ0IGRlY2xhcmF0aW9uIHdpdGhvdXQgYXBwcm9wcmlhdGUgYXR0cmlidXRlIGxpc3QnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5zdGFydCA9IHtcbiAgICAgICAgICAgICAgICB0aW1lT2Zmc2V0OiBlbnRyeS5hdHRyaWJ1dGVzWydUSU1FLU9GRlNFVCddLFxuICAgICAgICAgICAgICAgIHByZWNpc2U6IGVudHJ5LmF0dHJpYnV0ZXMuUFJFQ0lTRVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ2N1ZS1vdXQnKCkge1xuICAgICAgICAgICAgICBjdXJyZW50VXJpLmN1ZU91dCA9IGVudHJ5LmRhdGE7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAnY3VlLW91dC1jb250JygpIHtcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5jdWVPdXRDb250ID0gZW50cnkuZGF0YTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICdjdWUtaW4nKCkge1xuICAgICAgICAgICAgICBjdXJyZW50VXJpLmN1ZUluID0gZW50cnkuZGF0YTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICdza2lwJygpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5za2lwID0gY2FtZWxDYXNlS2V5cyhlbnRyeS5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgdGhpcy53YXJuT25NaXNzaW5nQXR0cmlidXRlc18oJyNFWFQtWC1TS0lQJywgZW50cnkuYXR0cmlidXRlcywgWydTS0lQUEVELVNFR01FTlRTJ10pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ3BhcnQnKCkge1xuICAgICAgICAgICAgICBoYXNQYXJ0cyA9IHRydWU7IC8vIHBhcnRzIGFyZSBhbHdheXMgc3BlY2lmZWQgYmVmb3JlIGEgc2VnbWVudFxuXG4gICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRJbmRleCA9IHRoaXMubWFuaWZlc3Quc2VnbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gY2FtZWxDYXNlS2V5cyhlbnRyeS5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5wYXJ0cyA9IGN1cnJlbnRVcmkucGFydHMgfHwgW107XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkucGFydHMucHVzaChwYXJ0KTtcblxuICAgICAgICAgICAgICBpZiAocGFydC5ieXRlcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnQuYnl0ZXJhbmdlLmhhc093blByb3BlcnR5KCdvZmZzZXQnKSkge1xuICAgICAgICAgICAgICAgICAgcGFydC5ieXRlcmFuZ2Uub2Zmc2V0ID0gbGFzdFBhcnRCeXRlcmFuZ2VFbmQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFzdFBhcnRCeXRlcmFuZ2VFbmQgPSBwYXJ0LmJ5dGVyYW5nZS5vZmZzZXQgKyBwYXJ0LmJ5dGVyYW5nZS5sZW5ndGg7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCBwYXJ0SW5kZXggPSBjdXJyZW50VXJpLnBhcnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIHRoaXMud2Fybk9uTWlzc2luZ0F0dHJpYnV0ZXNfKGAjRVhULVgtUEFSVCAjJHtwYXJ0SW5kZXh9IGZvciBzZWdtZW50ICMke3NlZ21lbnRJbmRleH1gLCBlbnRyeS5hdHRyaWJ1dGVzLCBbJ1VSSScsICdEVVJBVElPTiddKTtcblxuICAgICAgICAgICAgICBpZiAodGhpcy5tYW5pZmVzdC5yZW5kaXRpb25SZXBvcnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5yZW5kaXRpb25SZXBvcnRzLmZvckVhY2goKHIsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICghci5oYXNPd25Qcm9wZXJ0eSgnbGFzdFBhcnQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYCNFWFQtWC1SRU5ESVRJT04tUkVQT1JUICMke2l9IGxhY2tzIHJlcXVpcmVkIGF0dHJpYnV0ZShzKTogTEFTVC1QQVJUYFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ3NlcnZlci1jb250cm9sJygpIHtcbiAgICAgICAgICAgICAgY29uc3QgYXR0cnMgPSB0aGlzLm1hbmlmZXN0LnNlcnZlckNvbnRyb2wgPSBjYW1lbENhc2VLZXlzKGVudHJ5LmF0dHJpYnV0ZXMpO1xuXG4gICAgICAgICAgICAgIGlmICghYXR0cnMuaGFzT3duUHJvcGVydHkoJ2NhbkJsb2NrUmVsb2FkJykpIHtcbiAgICAgICAgICAgICAgICBhdHRycy5jYW5CbG9ja1JlbG9hZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICcjRVhULVgtU0VSVkVSLUNPTlRST0wgZGVmYXVsdGluZyBDQU4tQkxPQ0stUkVMT0FEIHRvIGZhbHNlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2V0SG9sZEJhY2suY2FsbCh0aGlzLCB0aGlzLm1hbmlmZXN0KTtcblxuICAgICAgICAgICAgICBpZiAoYXR0cnMuY2FuU2tpcERhdGVyYW5nZXMgJiYgIWF0dHJzLmhhc093blByb3BlcnR5KCdjYW5Ta2lwVW50aWwnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICcjRVhULVgtU0VSVkVSLUNPTlRST0wgbGFja3MgcmVxdWlyZWQgYXR0cmlidXRlIENBTi1TS0lQLVVOVElMIHdoaWNoIGlzIHJlcXVpcmVkIHdoZW4gQ0FOLVNLSVAtREFURVJBTkdFUyBpcyBzZXQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICdwcmVsb2FkLWhpbnQnKCkge1xuICAgICAgICAgICAgICAvLyBwYXJ0cyBhcmUgYWx3YXlzIHNwZWNpZmVkIGJlZm9yZSBhIHNlZ21lbnRcbiAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudEluZGV4ID0gdGhpcy5tYW5pZmVzdC5zZWdtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgIGNvbnN0IGhpbnQgPSBjYW1lbENhc2VLZXlzKGVudHJ5LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICBjb25zdCBpc1BhcnQgPSBoaW50LnR5cGUgJiYgaGludC50eXBlID09PSAnUEFSVCc7XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkucHJlbG9hZEhpbnRzID0gY3VycmVudFVyaS5wcmVsb2FkSGludHMgfHwgW107XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkucHJlbG9hZEhpbnRzLnB1c2goaGludCk7XG5cbiAgICAgICAgICAgICAgaWYgKGhpbnQuYnl0ZXJhbmdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFoaW50LmJ5dGVyYW5nZS5oYXNPd25Qcm9wZXJ0eSgnb2Zmc2V0JykpIHtcbiAgICAgICAgICAgICAgICAgIC8vIHVzZSBsYXN0IHBhcnQgYnl0ZXJhbmdlIGVuZCBvciB6ZXJvIGlmIG5vdCBhIHBhcnQuXG4gICAgICAgICAgICAgICAgICBoaW50LmJ5dGVyYW5nZS5vZmZzZXQgPSBpc1BhcnQgPyBsYXN0UGFydEJ5dGVyYW5nZUVuZCA6IDA7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChpc1BhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcnRCeXRlcmFuZ2VFbmQgPSBoaW50LmJ5dGVyYW5nZS5vZmZzZXQgKyBoaW50LmJ5dGVyYW5nZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdXJyZW50VXJpLnByZWxvYWRIaW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICB0aGlzLndhcm5Pbk1pc3NpbmdBdHRyaWJ1dGVzXyhgI0VYVC1YLVBSRUxPQUQtSElOVCAjJHtpbmRleH0gZm9yIHNlZ21lbnQgIyR7c2VnbWVudEluZGV4fWAsIGVudHJ5LmF0dHJpYnV0ZXMsIFsnVFlQRScsICdVUkknXSk7XG5cbiAgICAgICAgICAgICAgaWYgKCFoaW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH0gLy8gc2VhcmNoIHRocm91Z2ggYWxsIHByZWxvYWQgaGludHMgZXhjZXB0IGZvciB0aGUgY3VycmVudCBvbmUgZm9yXG4gICAgICAgICAgICAgIC8vIGEgZHVwbGljYXRlIHR5cGUuXG5cblxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRVcmkucHJlbG9hZEhpbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG90aGVySGludCA9IGN1cnJlbnRVcmkucHJlbG9hZEhpbnRzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFvdGhlckhpbnQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG90aGVySGludC50eXBlID09PSBoaW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYCNFWFQtWC1QUkVMT0FELUhJTlQgIyR7aW5kZXh9IGZvciBzZWdtZW50ICMke3NlZ21lbnRJbmRleH0gaGFzIHRoZSBzYW1lIFRZUEUgJHtoaW50LnR5cGV9IGFzIHByZWxvYWQgaGludCAjJHtpfWBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ3JlbmRpdGlvbi1yZXBvcnQnKCkge1xuICAgICAgICAgICAgICBjb25zdCByZXBvcnQgPSBjYW1lbENhc2VLZXlzKGVudHJ5LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnJlbmRpdGlvblJlcG9ydHMgPSB0aGlzLm1hbmlmZXN0LnJlbmRpdGlvblJlcG9ydHMgfHwgW107XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucmVuZGl0aW9uUmVwb3J0cy5wdXNoKHJlcG9ydCk7XG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5tYW5pZmVzdC5yZW5kaXRpb25SZXBvcnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkID0gWydMQVNULU1TTicsICdVUkknXTtcblxuICAgICAgICAgICAgICBpZiAoaGFzUGFydHMpIHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZC5wdXNoKCdMQVNULVBBUlQnKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMud2Fybk9uTWlzc2luZ0F0dHJpYnV0ZXNfKGAjRVhULVgtUkVORElUSU9OLVJFUE9SVCAjJHtpbmRleH1gLCBlbnRyeS5hdHRyaWJ1dGVzLCByZXF1aXJlZCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAncGFydC1pbmYnKCkge1xuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnBhcnRJbmYgPSBjYW1lbENhc2VLZXlzKGVudHJ5LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICB0aGlzLndhcm5Pbk1pc3NpbmdBdHRyaWJ1dGVzXygnI0VYVC1YLVBBUlQtSU5GJywgZW50cnkuYXR0cmlidXRlcywgWydQQVJULVRBUkdFVCddKTtcblxuICAgICAgICAgICAgICBpZiAodGhpcy5tYW5pZmVzdC5wYXJ0SW5mLnBhcnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnBhcnRUYXJnZXREdXJhdGlvbiA9IHRoaXMubWFuaWZlc3QucGFydEluZi5wYXJ0VGFyZ2V0O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2V0SG9sZEJhY2suY2FsbCh0aGlzLCB0aGlzLm1hbmlmZXN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0pW2VudHJ5LnRhZ1R5cGVdIHx8IG5vb3ApLmNhbGwoc2VsZik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXJpKCkge1xuICAgICAgICAgIGN1cnJlbnRVcmkudXJpID0gZW50cnkudXJpO1xuICAgICAgICAgIHVyaXMucHVzaChjdXJyZW50VXJpKTsgLy8gaWYgbm8gZXhwbGljaXQgZHVyYXRpb24gd2FzIGRlY2xhcmVkLCB1c2UgdGhlIHRhcmdldCBkdXJhdGlvblxuXG4gICAgICAgICAgaWYgKHRoaXMubWFuaWZlc3QudGFyZ2V0RHVyYXRpb24gJiYgISgnZHVyYXRpb24nIGluIGN1cnJlbnRVcmkpKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIHNlZ21lbnQgZHVyYXRpb24gdG8gdGhlIHRhcmdldCBkdXJhdGlvbidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY3VycmVudFVyaS5kdXJhdGlvbiA9IHRoaXMubWFuaWZlc3QudGFyZ2V0RHVyYXRpb247XG4gICAgICAgICAgfSAvLyBhbm5vdGF0ZSB3aXRoIGVuY3J5cHRpb24gaW5mb3JtYXRpb24sIGlmIG5lY2Vzc2FyeVxuXG5cbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBjdXJyZW50VXJpLmtleSA9IGtleTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyZW50VXJpLnRpbWVsaW5lID0gY3VycmVudFRpbWVsaW5lOyAvLyBhbm5vdGF0ZSB3aXRoIGluaXRpYWxpemF0aW9uIHNlZ21lbnQgaW5mb3JtYXRpb24sIGlmIG5lY2Vzc2FyeVxuXG4gICAgICAgICAgaWYgKGN1cnJlbnRNYXApIHtcbiAgICAgICAgICAgIGN1cnJlbnRVcmkubWFwID0gY3VycmVudE1hcDtcbiAgICAgICAgICB9IC8vIHJlc2V0IHRoZSBsYXN0IGJ5dGVyYW5nZSBlbmQgYXMgaXQgbmVlZHMgdG8gYmUgMCBiZXR3ZWVuIHBhcnRzXG5cblxuICAgICAgICAgIGxhc3RQYXJ0Qnl0ZXJhbmdlRW5kID0gMDsgLy8gcHJlcGFyZSBmb3IgdGhlIG5leHQgVVJJXG5cbiAgICAgICAgICBjdXJyZW50VXJpID0ge307XG4gICAgICAgIH0sXG5cbiAgICAgICAgY29tbWVudCgpIHsvLyBjb21tZW50cyBhcmUgbm90IGltcG9ydGFudCBmb3IgcGxheWJhY2tcbiAgICAgICAgfSxcblxuICAgICAgICBjdXN0b20oKSB7XG4gICAgICAgICAgLy8gaWYgdGhpcyBpcyBzZWdtZW50LWxldmVsIGRhdGEgYXR0YWNoIHRoZSBvdXRwdXQgdG8gdGhlIHNlZ21lbnRcbiAgICAgICAgICBpZiAoZW50cnkuc2VnbWVudCkge1xuICAgICAgICAgICAgY3VycmVudFVyaS5jdXN0b20gPSBjdXJyZW50VXJpLmN1c3RvbSB8fCB7fTtcbiAgICAgICAgICAgIGN1cnJlbnRVcmkuY3VzdG9tW2VudHJ5LmN1c3RvbVR5cGVdID0gZW50cnkuZGF0YTsgLy8gaWYgdGhpcyBpcyBtYW5pZmVzdC1sZXZlbCBkYXRhIGF0dGFjaCB0byB0aGUgdG9wIGxldmVsIG1hbmlmZXN0IG9iamVjdFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmN1c3RvbSA9IHRoaXMubWFuaWZlc3QuY3VzdG9tIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5jdXN0b21bZW50cnkuY3VzdG9tVHlwZV0gPSBlbnRyeS5kYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB9KVtlbnRyeS50eXBlXS5jYWxsKHNlbGYpO1xuICAgIH0pO1xuICB9XG5cbiAgd2Fybk9uTWlzc2luZ0F0dHJpYnV0ZXNfKGlkZW50aWZpZXIsIGF0dHJpYnV0ZXMsIHJlcXVpcmVkKSB7XG4gICAgY29uc3QgbWlzc2luZyA9IFtdO1xuICAgIHJlcXVpcmVkLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKCFhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgbWlzc2luZy5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAobWlzc2luZy5sZW5ndGgpIHtcbiAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgbWVzc2FnZTogYCR7aWRlbnRpZmllcn0gbGFja3MgcmVxdWlyZWQgYXR0cmlidXRlKHMpOiAke21pc3Npbmcuam9pbignLCAnKX1gXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFBhcnNlIHRoZSBpbnB1dCBzdHJpbmcgYW5kIHVwZGF0ZSB0aGUgbWFuaWZlc3Qgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2h1bmsgYSBwb3RlbnRpYWxseSBpbmNvbXBsZXRlIHBvcnRpb24gb2YgdGhlIG1hbmlmZXN0XG4gICAqL1xuXG5cbiAgcHVzaChjaHVuaykge1xuICAgIHRoaXMubGluZVN0cmVhbS5wdXNoKGNodW5rKTtcbiAgfVxuICAvKipcbiAgICogRmx1c2ggYW55IHJlbWFpbmluZyBpbnB1dC4gVGhpcyBjYW4gYmUgaGFuZHkgaWYgdGhlIGxhc3QgbGluZSBvZiBhbiBNM1U4XG4gICAqIG1hbmlmZXN0IGRpZCBub3QgY29udGFpbiBhIHRyYWlsaW5nIG5ld2xpbmUgYnV0IHRoZSBmaWxlIGhhcyBiZWVuXG4gICAqIGNvbXBsZXRlbHkgcmVjZWl2ZWQuXG4gICAqL1xuXG5cbiAgZW5kKCkge1xuICAgIC8vIGZsdXNoIGFueSBidWZmZXJlZCBpbnB1dFxuICAgIHRoaXMubGluZVN0cmVhbS5wdXNoKCdcXG4nKTtcbiAgICB0aGlzLnRyaWdnZXIoJ2VuZCcpO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYW4gYWRkaXRpb25hbCBwYXJzZXIgZm9yIG5vbi1zdGFuZGFyZCB0YWdzXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgIG9wdGlvbnMgICAgICAgICAgICAgIGEgbWFwIG9mIG9wdGlvbnMgZm9yIHRoZSBhZGRlZCBwYXJzZXJcbiAgICogQHBhcmFtIHtSZWdFeHB9ICAgb3B0aW9ucy5leHByZXNzaW9uICAgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggdGhlIGN1c3RvbSBoZWFkZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgb3B0aW9ucy50eXBlICAgICAgICAgdGhlIHR5cGUgdG8gcmVnaXN0ZXIgdG8gdGhlIG91dHB1dFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5kYXRhUGFyc2VyXSBmdW5jdGlvbiB0byBwYXJzZSB0aGUgbGluZSBpbnRvIGFuIG9iamVjdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59ICBbb3B0aW9ucy5zZWdtZW50XSAgICBzaG91bGQgdGFnIGRhdGEgYmUgYXR0YWNoZWQgdG8gdGhlIHNlZ21lbnQgb2JqZWN0XG4gICAqL1xuXG5cbiAgYWRkUGFyc2VyKG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcnNlU3RyZWFtLmFkZFBhcnNlcihvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgY3VzdG9tIGhlYWRlciBtYXBwZXJcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9uc1xuICAgKiBAcGFyYW0ge1JlZ0V4cH0gICBvcHRpb25zLmV4cHJlc3Npb24gICBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgY3VzdG9tIGhlYWRlclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm1hcCAgICAgICAgICBmdW5jdGlvbiB0byB0cmFuc2xhdGUgdGFnIGludG8gYSBkaWZmZXJlbnQgdGFnXG4gICAqL1xuXG5cbiAgYWRkVGFnTWFwcGVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcnNlU3RyZWFtLmFkZFRhZ01hcHBlcihvcHRpb25zKTtcbiAgfVxuXG59XG5cbmV4cG9ydCB7IExpbmVTdHJlYW0sIFBhcnNlU3RyZWFtLCBQYXJzZXIgfTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG4gIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2FwcC53b3JrZXIudHNcIik7XG4iLCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0Esd0NBQXdDLG1CQUFPLENBQUMsbURBQXVCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsdUJBQXVCLGNBQWMsR0FBRztBQUN4QywrREFBK0QseUJBQXlCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFCQUFNO0FBQ3RCLGdCQUFnQixxQkFBTTtBQUN0QiwyQ0FBMkMscUJBQU07QUFDakQ7QUFDQTtBQUNBLGlEQUFpRCx1Q0FBdUM7QUFDeEY7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtDQUFrQztBQUMvRTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsb0RBQW9EO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCwyQ0FBMkM7QUFDNUY7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDBDQUEwQztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDBEQUEwRDtBQUMzRztBQUNBO0FBQ0E7QUFDQSxpREFBaUQsZ0NBQWdDO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGtEQUFrRDtBQUNuRztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMkNBQTJDOzs7Ozs7Ozs7Ozs7Ozs7O1VDL0czQztVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEdBQUc7V0FDSDtXQUNBO1dBQ0EsQ0FBQzs7Ozs7VUVQRDtVQUNBO1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly8vd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy90aGlzIGxpbmUgZ29ubmEgaW1wb3J0IHRoZSBjb250ZW50IGZyb20gY29tcGlsZSB3b3JrZXIgYXMgc3RyaW5nXHJcbi8vQHRzLWV4cGVjdC1lcnJvclxyXG5jb25zdCBhcHBfd29ya2VyX2pzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL2Rpc3QvYXBwLndvcmtlci5qc1wiKSk7XHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgbWFpbldvcmtlcjtcclxuICAgIHdpbmRvdy5Xb3JrZXIgPSBjbGFzcyBXb3JrZXJJbmplY3RvciBleHRlbmRzIFdvcmtlciB7XHJcbiAgICAgICAgY29uc3RydWN0b3IodHdpdGNoQmxvYlVybCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5ldyB3b3JrZXIgaW50YW5jZSBcIiArIHR3aXRjaEJsb2JVcmwpO1xyXG4gICAgICAgICAgICBpZiAodHdpdGNoQmxvYlVybCA9PSBcIlwiKVxyXG4gICAgICAgICAgICAgICAgc3VwZXIodHdpdGNoQmxvYlVybCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1B1cnBsZV06IGluaXQgXCIgKyB0d2l0Y2hCbG9iVXJsKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3QmxvYlN0ciA9IGAke2FwcF93b3JrZXJfanNfMS5kZWZhdWx0fVxuICAgICAgaW1wb3J0U2NyaXB0cygnJHt0d2l0Y2hCbG9iVXJsfScpO2A7XHJcbiAgICAgICAgICAgIHN1cGVyKFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW25ld0Jsb2JTdHJdLCB7IHR5cGU6IFwidGV4dC9qYXZhc2NyaXB0XCIgfSkpKTtcclxuICAgICAgICAgICAgbWFpbldvcmtlciA9IHRoaXM7XHJcbiAgICAgICAgICAgIG1haW5Xb3JrZXIuZGVjbGFyZUV2ZW50V29ya2VyKCk7XHJcbiAgICAgICAgICAgIG1haW5Xb3JrZXIuZGVjbGFyZUV2ZW50V2luZG93KCk7XHJcbiAgICAgICAgICAgIG1haW5Xb3JrZXIuaW50ZWdyaXR5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVncml0eSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGdsb2JhbC5yZXF1ZXN0ID0gZmV0Y2g7XHJcbiAgICAgICAgICAgICAgICBnbG9iYWwuZmV0Y2ggPSAodXJsLCBvcHRpb25zKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBnbG9iYWwucmVxdWVzdCh1cmwsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB5aWVsZCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVybCA9PSBcImh0dHBzOi8vZ3FsLnR3aXRjaC50di9pbnRlZ3JpdHlcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWluV29ya2VyLnBvc3RNZXNzYWdlKHsgZnVuY05hbWU6IFwic2V0SW50ZWdyaXR5XCIsIHZhbHVlOiBib2R5IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVjbGFyZUV2ZW50V29ya2VyKCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoKF9hID0gZXZlbnQgPT09IG51bGwgfHwgZXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2ZW50LmRhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImdldFNldHRpbmdzXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJnZXRTZXR0aW5nc1wiLCB2YWx1ZTogbnVsbCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQbGF5ZXJRdWFsaXR5Q2hhbmdlZFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Xb3JrZXIucG9zdE1lc3NhZ2UoeyBmdW5jTmFtZTogXCJzZXRRdWFsaXR5XCIsIHZhbHVlOiBldmVudC5kYXRhLmFyZy5uYW1lIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhdXNlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbldvcmtlci5wb3N0TWVzc2FnZSh7IGZ1bmNOYW1lOiBcInBhdXNlXCIsIGFyZ3M6IHVuZGVmaW5lZCwgaWQ6IDEgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGxheVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Xb3JrZXIucG9zdE1lc3NhZ2UoeyBmdW5jTmFtZTogXCJwbGF5XCIsIGFyZ3M6IHVuZGVmaW5lZCwgaWQ6IDEgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoKF9jID0gKF9iID0gZXZlbnQgPT09IG51bGwgfHwgZXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2ZW50LmRhdGEpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5hcmcpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5rZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicXVhbGl0eVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQuZGF0YS5hcmcudmFsdWUubmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNoYW5nZWQgcXVhbGl0eSBieSBwbGF5ZXI6IFwiICsgZXZlbnQuZGF0YS5hcmcudmFsdWUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Xb3JrZXIucG9zdE1lc3NhZ2UoeyBmdW5jTmFtZTogXCJzZXRRdWFsaXR5XCIsIHZhbHVlOiBldmVudC5kYXRhLmFyZy52YWx1ZS5uYW1lIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0YXRlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbldvcmtlci5wb3N0TWVzc2FnZSh7IGZ1bmNOYW1lOiBldmVudC5kYXRhLmFyZy52YWx1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKChfZSA9IChfZCA9IGV2ZW50ID09PSBudWxsIHx8IGV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldmVudC5kYXRhKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuYXJnKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwYXVzZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGxheVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlY2xhcmVFdmVudFdpbmRvdygpIHtcclxuICAgICAgICAgICAgLy9FdmVudCBsaXN0ZW5lciBmcm9tIHdpbmRvdyBhbmQgZXh0ZW5zaW9uLlxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZXRTZXR0aW5nc1wiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBzZXR0aW5ncyB0byB3b3JrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbldvcmtlci5wb3N0TWVzc2FnZSh7IGZ1bmNOYW1lOiBcInNldFNldHRpbmdzXCIsIHZhbHVlOiBldmVudC5kYXRhLnZhbHVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkoKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYVc1a1pYZ3Vhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdUxpOXpjbU12YVc1a1pYZ3VkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJanM3T3pzN096czdPenM3T3pzN1FVRkJRU3hyUlVGQmEwVTdRVUZEYkVVc2EwSkJRV3RDTzBGQlEyeENMREJGUVVGM1F6dEJRVVY0UXl4RFFVRkRPMGxCUTBNc1NVRkJTU3hWUVVGbExFTkJRVU03U1VGRmNFSXNUVUZCVFN4RFFVRkRMRTFCUVUwc1IwRkJSeXhOUVVGTkxHTkJRV1VzVTBGQlVTeE5RVUZOTzFGQlEycEVMRmxCUVZrc1lVRkJhMEk3V1VGRE5VSXNUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXh4UWtGQmNVSXNSMEZCUnl4aFFVRmhMRU5CUVVNc1EwRkJRenRaUVVWdVJDeEpRVUZKTEdGQlFXRXNTVUZCU1N4RlFVRkZPMmRDUVVGRkxFdEJRVXNzUTBGQlF5eGhRVUZoTEVOQlFVTXNRMEZCUXp0WlFVTTVReXhQUVVGUExFTkJRVU1zUjBGQlJ5eERRVUZETEdsQ1FVRnBRaXhIUVVGSExHRkJRV0VzUTBGQlF5eERRVUZETzFsQlJTOURMRTFCUVUwc1ZVRkJWU3hIUVVGSExFZEJRVWNzZFVKQlFVYzdkVUpCUTFJc1lVRkJZU3hMUVVGTExFTkJRVU03V1VGRmNFTXNTMEZCU3l4RFFVRkRMRWRCUVVjc1EwRkJReXhsUVVGbExFTkJRVU1zU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1JVRkJSU3hGUVVGRkxFbEJRVWtzUlVGQlJTeHBRa0ZCYVVJc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEyaEdMRlZCUVZVc1IwRkJSeXhKUVVGSkxFTkJRVU03V1VGRGJFSXNWVUZCVlN4RFFVRkRMR3RDUVVGclFpeEZRVUZGTEVOQlFVTTdXVUZEYUVNc1ZVRkJWU3hEUVVGRExHdENRVUZyUWl4RlFVRkZMRU5CUVVNN1dVRkRhRU1zVlVGQlZTeERRVUZETEZOQlFWTXNSVUZCUlN4RFFVRkRPMUZCUTNwQ0xFTkJRVU03VVVGRlN5eFRRVUZUT3p0blFrRkRZaXhOUVVGTkxFTkJRVU1zVDBGQlR5eEhRVUZITEV0QlFVc3NRMEZCUVR0blFrRkRkRUlzVFVGQlRTeERRVUZETEV0QlFVc3NSMEZCUnl4RFFVRlBMRWRCUVZFc1JVRkJSU3hQUVVGWkxFVkJRVVVzUlVGQlJUdHZRa0ZET1VNc1RVRkJUU3hSUVVGUkxFZEJRVWNzVFVGQlRTeE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWRCUVVjc1JVRkJSU3hQUVVGUExFTkJRVU1zUTBGQlF6dHZRa0ZEY0VRc1RVRkJUU3hKUVVGSkxFZEJRVWNzVFVGQlRTeFJRVUZSTEVOQlFVTXNTVUZCU1N4RlFVRkZMRU5CUVVNN2IwSkJSVzVETEVsQlFVa3NSMEZCUnl4SlFVRkpMR2xEUVVGcFF5eEZRVUZGTzNkQ1FVTTFReXhWUVVGVkxFTkJRVU1zVjBGQlZ5eERRVUZETEVWQlFVVXNVVUZCVVN4RlFVRkZMR05CUVdNc1JVRkJSU3hMUVVGTExFVkJRVVVzU1VGQlNTeEZRVUZGTEVOQlFVTXNRMEZCUXp0eFFrRkRia1U3YjBKQlJVUXNUMEZCVHl4SlFVRkpMRkZCUVZFc1EwRkJReXhKUVVGSkxFVkJRVVVzVVVGQlVTeERRVUZETEVOQlFVTTdaMEpCUTNSRExFTkJRVU1zUTBGQlFTeERRVUZETzFsQlEwb3NRMEZCUXp0VFFVRkJPMUZCUjBRc2EwSkJRV3RDTzFsQlEyaENMRWxCUVVrc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4VFFVRlRMRVZCUVVVc1EwRkJReXhMUVVGTExFVkJRVVVzUlVGQlJUczdaMEpCUlhwRExGRkJRVkVzVFVGQlFTeExRVUZMTEdGQlFVd3NTMEZCU3l4MVFrRkJUQ3hMUVVGTExFTkJRVVVzU1VGQlNTd3dRMEZCUlN4SlFVRkpMRVZCUVVVN2IwSkJRM3BDTEV0QlFVc3NZVUZCWVN4RFFVRkRMRU5CUVVNN2QwSkJRMnhDTEUxQlFVMHNRMEZCUXl4WFFVRlhMRU5CUVVNc1JVRkJSU3hKUVVGSkxFVkJRVVVzWVVGQllTeEZRVUZGTEV0QlFVc3NSVUZCUlN4SlFVRkpMRVZCUVVVc1EwRkJReXhEUVVGRE8zZENRVU42UkN4TlFVRk5PM0ZDUVVOUU8yOUNRVU5FTEV0QlFVc3NjMEpCUVhOQ0xFTkJRVU1zUTBGQlF6dDNRa0ZETTBJc1ZVRkJWU3hEUVVGRExGZEJRVmNzUTBGQlF5eEZRVUZGTEZGQlFWRXNSVUZCUlN4WlFVRlpMRVZCUVVVc1MwRkJTeXhGUVVGRkxFdEJRVXNzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1JVRkJSU3hEUVVGRExFTkJRVU03ZDBKQlF5OUZMRTFCUVUwN2NVSkJRMUE3YjBKQlEwUXNTMEZCU3l4UFFVRlBMRU5CUVVNc1EwRkJRenQzUWtGRFdpeFZRVUZWTEVOQlFVTXNWMEZCVnl4RFFVRkRMRVZCUVVVc1VVRkJVU3hGUVVGRkxFOUJRVThzUlVGQlJTeEpRVUZKTEVWQlFVVXNVMEZCVXl4RlFVRkZMRVZCUVVVc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETzNkQ1FVTjBSU3hOUVVGTk8zRkNRVU5RTzI5Q1FVTkVMRXRCUVVzc1RVRkJUU3hEUVVGRExFTkJRVU03ZDBKQlExZ3NWVUZCVlN4RFFVRkRMRmRCUVZjc1EwRkJReXhGUVVGRkxGRkJRVkVzUlVGQlJTeE5RVUZOTEVWQlFVVXNTVUZCU1N4RlFVRkZMRk5CUVZNc1JVRkJSU3hGUVVGRkxFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXp0M1FrRkRja1VzVFVGQlRUdHhRa0ZEVUR0dlFrRkRSQ3hQUVVGUExFTkJRVU1zUTBGQlF6dDNRa0ZEVUN4TlFVRk5PM0ZDUVVOUU8ybENRVU5HTzJkQ1FVVkVMRkZCUVZFc1RVRkJRU3hOUVVGQkxFdEJRVXNzWVVGQlRDeExRVUZMTEhWQ1FVRk1MRXRCUVVzc1EwRkJSU3hKUVVGSkxEQkRRVUZGTEVkQlFVY3NNRU5CUVVVc1IwRkJSeXhGUVVGRk8yOUNRVU0zUWl4TFFVRkxMRk5CUVZNc1EwRkJReXhEUVVGRE8zZENRVU5rTEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTXNTVUZCU1RzMFFrRkJSU3hOUVVGTk8zZENRVU4wUXl4UFFVRlBMRU5CUVVNc1IwRkJSeXhEUVVGRExEWkNRVUUyUWl4SFFVRkhMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenQzUWtGRGRrVXNWVUZCVlN4RFFVRkRMRmRCUVZjc1EwRkJReXhGUVVGRkxGRkJRVkVzUlVGQlJTeFpRVUZaTEVWQlFVVXNTMEZCU3l4RlFVRkZMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRVZCUVVVc1EwRkJReXhEUVVGRE8zZENRVU55Uml4TlFVRk5PM0ZDUVVOUU8yOUNRVU5FTEV0QlFVc3NUMEZCVHl4RFFVRkRMRU5CUVVNN2QwSkJRMW9zVlVGQlZTeERRVUZETEZkQlFWY3NRMEZCUXl4RlFVRkZMRkZCUVZFc1JVRkJSU3hMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRVZCUVVVc1EwRkJReXhEUVVGRE8zRkNRVU0xUkR0dlFrRkRSQ3hQUVVGUExFTkJRVU1zUTBGQlF6dDNRa0ZEVUN4TlFVRk5PM0ZDUVVOUU8ybENRVU5HTzJkQ1FVVkVMRkZCUVZFc1RVRkJRU3hOUVVGQkxFdEJRVXNzWVVGQlRDeExRVUZMTEhWQ1FVRk1MRXRCUVVzc1EwRkJSU3hKUVVGSkxEQkRRVUZGTEVkQlFVY3NNRU5CUVVVc1NVRkJTU3hGUVVGRk8yOUNRVU01UWl4TFFVRkxMRTlCUVU4c1EwRkJReXhEUVVGRE8zZENRVU5hTEUxQlFVMDdjVUpCUTFBN2IwSkJRMFFzUzBGQlN5eE5RVUZOTEVOQlFVTXNRMEZCUXp0M1FrRkRXQ3hOUVVGTk8zRkNRVU5RTzI5Q1FVTkVMRTlCUVU4c1EwRkJReXhEUVVGRE8zZENRVU5RTEUxQlFVMDdjVUpCUTFBN2FVSkJRMFk3V1VGRFNDeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTk1MRU5CUVVNN1VVRkZSQ3hyUWtGQmEwSTdXVUZEYUVJc01rTkJRVEpETzFsQlF6TkRMRTFCUVUwc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4VFFVRlRMRVZCUVVVc1EwRkJReXhMUVVGTExFVkJRVVVzUlVGQlJUdG5Ra0ZETTBNc1VVRkJVU3hMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NSVUZCUlR0dlFrRkRka0lzUzBGQlN5eGhRVUZoTEVOQlFVTXNRMEZCUXp0M1FrRkRiRUlzZVVKQlFYbENPM2RDUVVONlFpeFZRVUZWTEVOQlFVTXNWMEZCVnl4RFFVRkRMRVZCUVVVc1VVRkJVU3hGUVVGRkxHRkJRV0VzUlVGQlJTeExRVUZMTEVWQlFVVXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFVkJRVVVzUTBGQlF5eERRVUZETzNGQ1FVTTVSVHRwUWtGRFJqdFpRVU5JTEVOQlFVTXNRMEZCUXl4RFFVRkRPMUZCUTB3c1EwRkJRenRMUVVOR0xFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRJbjA9IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgudHNcIik7XG4iLCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=